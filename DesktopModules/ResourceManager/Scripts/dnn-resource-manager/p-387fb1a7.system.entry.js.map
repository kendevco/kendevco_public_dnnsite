{"version":3,"names":["DnnServicesFramework","moduleId","_this","this","getServiceRoot","moduleName","serviceRoot","window","top","dnn","getVar","getTabId","tabId","parseInt","getModuleId","_moduleId","getAntiForgeryValue","el","document","querySelector","value","getModuleHeaders","headers","Headers","append","toString","afValue","appendToMap","map","propName","items","get","set","includes","push","debounce","fn","ms","timeoutId","args","_i","arguments","length","clearTimeout","setTimeout","apply","isConnected","maybeElement","cleanupElements","_p","keys","key","filter","stencilSubscription","getRenderingRef","elmsToUpdate","Map","dispose","clear","elm","elements","forceUpdate","reset","forEach","elms","unwrap","val","createObservableMap","defaultState","shouldUpdate","a","b","unwrappedState","states","Object","entries","handlers","_a","cb","oldValue","state","Proxy","_","ownKeys","Array","from","getOwnPropertyDescriptor","enumerable","configurable","has","on","eventName","callback","removeFromArray","onChange","unSet","newValue","unReset","use","subscriptions","unsubs","reduce","subscription","unsub","array","item","index","indexOf","createStore","layout","pageSize","lastSearchRequestedPage","selectedItems","canManageFolderTypes","dnnActionCss","DnnActionCopyUrl","exports","class_1","prototype","handleClick","t","path","concat","location","protocol","host","navigator","clipboard","writeText","render","h","Host","onClick","xmlns","height","viewBox","width","fill","d","localization","CopyUrl","SortField","itemName","SortFieldInfo","lastModifiedOnDate","size","parentFolder","createdOnDate","sortKey","defineProperty","sortField","ItemsClient","sf","requestUrl","getSettings","Promise","resolve","reject","url","getGroupId","fetch","then","response","status","json","data","error","catch","getFolderContent","folderId","startIndex","numItems","sorting","abortController","abort","AbortController","signal","message","getFolderIconUrl","getAllowedFileExtensions","syncFolderContent","recursive","download","fileId","forceDownload","filename","split","decodeRFC5987ContentDisposition","blob","oldDownloadLink","remove","downloadLink","createElement","id","href","URL","createObjectURL","body","appendChild","click","replace","startsWith","endsWith","encoded","slice","decodeURIComponent","atob","c","charCodeAt","join","search","pageIndex","culture","getFolderMappings","getAddFolderTypeUrl","createNewFolder","request","method","JSON","stringify","ExceptionMessage","reason","getFolderItem","getFolderDetails","getFileDetails","getRoleGroups","getRoles","searchUsers","query","saveFolderDetails","saveFileDetails","moveFile","moveFolder","deleteFolder","deleteFile","result","pathname","parts","groupIdIndex","searchParams","URLSearchParams","groupId","ModuleMode","DnnActionCreateFolder","class_2","hostRef","itemsClient","parentFolderId","currentItems","showModal","alert","modal","backdropDismiss","showCloseButton","editor","show","AddFolder","DnnActionDeleteItems","class_3","Delete","DnnActionDownloadItem","class_4","itemId","Download","DnnActionEditItem","class_5","isFolder","Edit","DnnActionMoveItems","class_6","Move","DnnActionOpenFile","class_7","open","OpenFile","DnnActionUnlinkItems","class_8","Unlink","DnnActionUploadFile","class_9","container","style","overflowY","maxHeight","addEventListener","dnnRmFoldersChanged","emit","Upload","dnnButtonCss","DnnButton","class_10","type","reversed","confirm","confirmYesText","confirmNoText","confirmMessage","disabled","modalVisible","componentDidLoad","shadowRoot","handleConfirm","hide","confirmed","handleCancel","canceled","getElementClasses","classes","class","display","justifyContent","margin","dnnCheckboxCss","DnnCheckbox","class_11","checked","useIntermediate","changeState","checkedchange","name","htmlFor","dnnCollapsibleCss","DnnCollapsible","class_12","expanded","transitionDuration","handleHeightChanged","requestAnimationFrame","updateSize","scrollHeight","handledExpandedChanged","dnnCollapsibleHeightChanged","transition","ref","dnnDropzoneCss","DnnDropzone","class_13","resx","dragAndDropFile","capture","or","takePicture","uploadFile","allowCameraMode","captureQuality","canTakeSnapshots","takingPicture","handleDragOver","event","stopPropagation","preventDefault","dataTransfer","dropEffect","dropzone","classList","add","handleDrop","dropEvent","files","hasInvalidExtensions","fileList","getFilesFromFileList","filesSelected","checkIfBrowserCanTakeSnapshots","allowedExtensions","undefined","extensionsWithDots","e","extensionsList","fileInput","accept","mediaDevices","enumerateDevices","devices","some","device","kind","file","handleUploadButton","element","hasInvalid","fileIndex","regex","fileExtension","exec","takeSnapshot","getUserMedia","video","audio","stream","videoPreview","srcObject","play","videoSettings","getVideoTracks","applySnapshot","canvas","context","getContext","drawImage","toBlob","File","_b","_c","_d","_e","_f","onDragOver","onDrop","onDragLeave","target","cx","cy","r","dnnModalCss","DnnModal","class_14","closeText","visible","handleDismiss","dismissed","handleBackdropClick","dnnPermissionsGridCss","DnnPermissionsGrid","class_15","Add","AllRoles","FilterByGroup","GlobalRoles","Role","RolePermissions","SelectRole","User","UserPermissions","foundUsers","selectedRoleGroupId","handleFoundUsersChanged","userCollapsible","componentWillLoad","dismissUserResults","bind","disconnectedCallback","removeEventListener","dropdownRect","roleDropDown","getBoundingClientRect","pageX","right","left","pageY","bottom","handleRoleGroupChanged","dropdown","selectedIndex","Number","options","addRole","roleId","role","roles","RoleId","permissions","assign","rolePermissions","__spreadArray","default","locked","roleName","RoleName","permissionsChanged","addUser","pickedUser","userPermissions","displayName","userId","userQuery","filteredRoles","rp","IsSystemRole","RoleGroupId","renderRoleCheckBox","rolePermission","permissionDefinition","permission","permissionId","opacity","allowAccess","onCheckedchange","handleRoleChanged","detail","slot","permissionName","renderUserCheckBox","userPermission","handleUserChanged","newRolePermission","p","fullControl","permissionCode","permissionKey","view","u","newUserPermission","removeRole","removeUser","up","handleQueryChanged","userSearchQueryChanged","handleSearchUserFieldKeyDown","firstButton","focus","handleSearchedUserKeyDown","button","nextButton","nextElementSibling","previousButton","previousElementSibling","handleUserPicked","searchedUser","getFilteredUsers","fu","selected","roleGroups","roleGroup","permissionDefinitions","placeholder","debounced","onQueryChanged","onKeyDown","LocalizationClient","getResources","LocalizationStorageKey","sessionStorage","getItem","parse","setItem","dnnResourceManagerCss","localStorageSplitWidthKey","DnnResourceManager","class_16","localizationClient","foldersExpandedChanged","lastWidth","parseFloat","localStorage","splitView","setSplitWidthPercentage","getResourcesPromise","resources","console","getSettingsPromise","settings","canManage","all","handleSplitWidthChanged","onWidthChanged","foldersExpanded","title","EditFolderMappings","folderMappingsModal","InternalServicesClient","getFolders","getFolderDescendants","parentId","sortOrder","searchText","portalId","dnnRmActionsBarCss","DnnRmActionsBar","class_17","internalServicesClient","changeLayout","renderSortButton","sortOption","sortDropdownExpanded","renderRadioButton","localizedName","folder","log","Message","HomeFolderId","rootFolders","hasAddFoldersPermission","hasAddFilesPermission","hasManagePermission","hasDeletePermission","every","i","unlinkAllowedStatus","Items","syncDropdownExpanded","Sort","Sync","Refresh","SyncThisFolder","SyncThisFolderAndSubfolders","dnnRmCreateFolderCss","DnnRmCreateFolder","class_18","FolderMappingId","FolderName","ParentFolderId","folderMappings","sort","FolderMappingID","newFolderRequest","nameField","parentElement","removeChild","handleTypeChanged","select","option","handleSave","canChooseFolderProvider","find","f","folderMappingId","IsDefault","folderName","FolderParent","Name","required","onInput","FolderNameRequiredMessage","Type","folderMapping","MappingName","m","MappedPath","MappedName","Cancel","Save","dnnRmDeleteItemsCss","DnnRmDeleteItems","class_19","closeModal","handleDelete","deleting","FolderId","UnlinkAllowedStatus","handleItemDeleted","FileId","deletedCount","currentItemName","DeleteItems","ConfirmDeleteMessage","DeletingItems","max","dnnRmEditFileCss","DnnRmEditFile","class_20","fileDetails","fileName","description","tabTitle","General","iconUrl","src","Created","createdBy","CreatedOnDate","LastModified","lastModifiedBy","_g","LastModifiedOnDate","_h","_j","_k","Title","_l","substring","_m","Description","_o","dnnRmEditFolderCss","DnnRmEditFolder","class_21","folderDetails","folderIconUrl","handlePermissionsChanged","newPermissions","adjustRelatedPermissions","browse","write","viewPermission","browsePermission","writePermission","handleUserSearchQueryChanged","Permissions","onPermissionsChanged","onUserSearchQueryChanged","contextMenuCss","DnnRmFileContextMenu","class_22","dnnRmFilesPaneCss","DnnRmFilesPane","class_23","handleScroll","checkIfMoreItemsNeeded","handleFoldersChanged","handleFileDoubleClicked","componentDidUpdate","loadedFilesHeight","loadedFilesArea","heightPerItem","totalNeededHeight","totalCount","spacerHeight","spacer","endOfFilesHeight","thisBottom","offset","preloadOffset","loadMore","itemsSearchTerm","__decorate","Debounce","DnnRmFolderContextMenu","class_24","dnnRmFolderListCss","DnnRmFolderList","class_25","handleDnnRmContextMenuOpened","dismissContextMenu","existingMenus","querySelectorAll","contextMenu","handleFolderPicked","selectedFolder","dnnRmFolderListFolderPicked","handleRootClicked","hasChildren","selectable","HomeFolderName","handleContextMenu","collapsible","folderContextMenu","dnnRmcontextMenuOpened","onContextMenu","Tree","children","onDnnRmFolderListItemClicked","dnnRmFolderListItemCss","DnnRmFolderListItem","class_26","handleFolderDoubleClicked","dnnRmFolderListItemClicked","handleUserExpanded","removeAttribute","getItemClasses","onUserExpanded","alt","child","dnnRmFolderMappingsCss","DnnRmFolderMappings","class_27","addFolderTypeUrl","dismiss","closest","FolderProvider","mapping","editUrl","FolderProviderType","AddFolderType","SelectionUtilities","isItemSelected","toggleItemSelected","selectionUtilities","dnnRmItemsCardviewCss","DnnRmItemsCardview","class_28","existingMenu","handleDoubleClick","dnnRmFolderDoubleClicked","dnnRmFileDoubleClicked","onDblClick","thumbnailAvailable","thumbnailUrl","getFileSize","fileSize","Math","round","dnnRmItemsListviewCss","DnnRmItemsListview","class_29","getLocalDateString","dateString","date","Date","toLocaleDateString","toLocaleTimeString","handleRowKeyDown","Size","tabIndex","createdOn","modifiedOn","dnnRmLeftPaneCss","DnnRmLeftPane","class_30","handleFolderClicked","onDnnRmFolderListFolderPicked","dnnRmMoveItemsCss","DnnRmMoveItems","class_31","handleMove","moving","SourceFolderId","DestinationFolderId","handleItemMoved","SourceFileId","movedCount","getMoveButtonText","NoFolderSelected","MoveItems","SelectDestinationFolder","MovingItems","onConfirmed","ConfirmMoveMessage","Yes","No","dnnRmProgressBarCss","DnnRmProgressBar","class_32","adjustProgress","setProperty","dnnRmQueuedFileCss","DnnRmQueuedFile","class_33","xhr","XMLHttpRequest","servicesFramework","fileUploadResults","successMessage","FileUploadedMessage","err","overflow","offsetHeight","toFixed","border","extension","pop","toLowerCase","InvalidExtensionMessage","alreadyExists","fileIconUrl","orientation","maxUploadFileSize","FileSizeErrorMessage","formData","FormData","folderPath","extract","overwrite","validationCode","IsHostPortal","onload","statusText","upload","onprogress","lengthComputable","percent","loaded","total","progress","onabort","setRequestHeader","send","handleOvewrite","Overwrite","dnnRmRightPaneCss","DnnRmRightPane","class_34","dnnRmStatusBarCss","DnnRmStatusBar","class_35","getLocalizedStatusBarMessage","StatusBarMessage","dnnRmTopBarCss","DnnRmTopBar","class_36","handleSearchChanged","dnnRmUnlinkItemsCss","DnnRmUnlinkItems","class_37","handleUnlink","unlinking","handleItemUnlinked","unlinkedCount","UnlinkFolders","ConfirmUnlinkMessage","dnnRmUploadFileCss","DnnRmUploadFile","class_38","handleFilesDropped","droppedFiles","queuedFiles","ExtractUploads","onFilesSelected","dnnSearchboxCss","decorators","desc","Reflect","decorate","DnnSearchbox","class_39","fireQueryChanged","debouncedHandleQueryChanged","queryChanged","dnnTabCss","DnnTab","class_40","dnnTabsCss","DnnTabs","class_41","tabTitles","selectedTabTitle","updateTitles","showFirstTab","getTabs","component","assignedElements","tabs","tab","showTab","dnnTreeviewItemCss","DnnTreeviewItem","class_42","watchExpanded","expander","childElement","count","toggleCollapse","userExpanded","userCollapsed","dnnVerticalOverflowMenuCss","DnnVerticalOverflowMenu","class_43","showDropdownButton","showDropdownMenu","previousMenuWidth","componentDidRender","moveItemsToDropDownIfNecessery","resizeObserver","ResizeObserver","entries_1","entry","contentRect","moveItemsToMenuIfPossible","observe","menuItems","menu","availableWidth","neededWidth","getComputedStyle","fontSize","getFullWidth","lastItem","hasChildNodes","firstItem","styles","marginLeft","marginRight","paddingLeft","paddingRight","toggleOverflowMenu","contentHeight_1","emHeight","gapsHeight","marginHeight","dismissMenu_1","buttonRect","clientX","clientY","dnnVerticalSplitviewCss","DnnVerticalSplitview","class_44","splitterWidth","splitWidthPercentage","leftWidth","rightWidth","newWidth","panes","pane","splitter","fullWidth","newLeft","getSplitWidthPercentage","widthChanged","handleMouseDown","handleDrag","ev","movementX","getMovementFromEvent","previousTouch","handleDragFinished","newPercentage","handleKeyDown","shiftKey","onMouseDown","onTouchStart","minWidth"],"sources":["../../../../node_modules/@dnncommunity/dnn-elements/dist/collection/utilities/dnnServicesFramework.js","../../../../node_modules/@stencil/store/dist/index.mjs","src/store/store.ts","src/components/actions/dnn-action.scss?tag=dnn-action-copy-url&encapsulation=shadow","src/components/actions/dnn-action-copy-url/dnn-action-copy-url.tsx","src/enums/SortField.ts","src/services/ItemsClient.ts","src/components/actions/dnn-action.scss?tag=dnn-action-create-folder&encapsulation=shadow","src/components/actions/dnn-action-create-folder/dnn-action-create-folder.tsx","src/components/actions/dnn-action.scss?tag=dnn-action-delete-items&encapsulation=shadow","src/components/actions/dnn-action-delete-items/dnn-action-delete-items.tsx","src/components/actions/dnn-action.scss?tag=dnn-action-download-item&encapsulation=shadow","src/components/actions/dnn-action-download-item/dnn-action-download-item.tsx","src/components/actions/dnn-action.scss?tag=dnn-action-edit-item&encapsulation=shadow","src/components/actions/dnn-action-edit-item/dnn-action-edit-item.tsx","src/components/actions/dnn-action.scss?tag=dnn-action-move-items&encapsulation=shadow","src/components/actions/dnn-action-move-items/dnn-action-move-items.tsx","src/components/actions/dnn-action.scss?tag=dnn-action-open-file&encapsulation=shadow","src/components/actions/dnn-action-open-file/dnn-action-open-file.tsx","src/components/actions/dnn-action.scss?tag=dnn-action-unlink-items&encapsulation=shadow","src/components/actions/dnn-action-unlink-items/dnn-action-unlink-items.tsx","src/components/actions/dnn-action.scss?tag=dnn-action-upload-file&encapsulation=shadow","src/components/actions/dnn-action-upload-file/dnn-action-upload-file.tsx","../../../../node_modules/@dnncommunity/dnn-elements/dist/collection/components/dnn-button/dnn-button.css?tag=dnn-button&encapsulation=shadow","../../../../node_modules/@dnncommunity/dnn-elements/dist/collection/components/dnn-button/dnn-button.js","../../../../node_modules/@dnncommunity/dnn-elements/dist/collection/components/dnn-checkbox/dnn-checkbox.css?tag=dnn-checkbox&encapsulation=shadow","../../../../node_modules/@dnncommunity/dnn-elements/dist/collection/components/dnn-checkbox/dnn-checkbox.js","../../../../node_modules/@dnncommunity/dnn-elements/dist/collection/components/dnn-collapsible/dnn-collapsible.css?tag=dnn-collapsible&encapsulation=shadow","../../../../node_modules/@dnncommunity/dnn-elements/dist/collection/components/dnn-collapsible/dnn-collapsible.js","../../../../node_modules/@dnncommunity/dnn-elements/dist/collection/components/dnn-dropzone/dnn-dropzone.css?tag=dnn-dropzone&encapsulation=shadow","../../../../node_modules/@dnncommunity/dnn-elements/dist/collection/components/dnn-dropzone/dnn-dropzone.js","../../../../node_modules/@dnncommunity/dnn-elements/dist/collection/components/dnn-modal/dnn-modal.css?tag=dnn-modal&encapsulation=shadow","../../../../node_modules/@dnncommunity/dnn-elements/dist/collection/components/dnn-modal/dnn-modal.js","../../../../node_modules/@dnncommunity/dnn-elements/dist/collection/components/dnn-permissions-grid/dnn-permissions-grid.css?tag=dnn-permissions-grid&encapsulation=shadow","../../../../node_modules/@dnncommunity/dnn-elements/dist/collection/components/dnn-permissions-grid/dnn-permissions-grid.js","src/services/LocalizationClient.ts","src/components/dnn-resource-manager/dnn-resource-manager.scss?tag=dnn-resource-manager&encapsulation=shadow","src/components/dnn-resource-manager/dnn-resource-manager.tsx","src/services/InternalServicesClient.ts","src/components/dnn-rm-actions-bar/dnn-rm-actions-bar.scss?tag=dnn-rm-actions-bar&encapsulation=shadow","src/components/dnn-rm-actions-bar/dnn-rm-actions-bar.tsx","src/components/dnn-rm-create-folder/dnn-rm-create-folder.scss?tag=dnn-rm-create-folder&encapsulation=shadow","src/components/dnn-rm-create-folder/dnn-rm-create-folder.tsx","src/components/dnn-rm-delete-items/dnn-rm-delete-items.scss?tag=dnn-rm-delete-items&encapsulation=shadow","src/components/dnn-rm-delete-items/dnn-rm-delete-items.tsx","src/components/dnn-rm-edit-file/dnn-rm-edit-file.scss?tag=dnn-rm-edit-file&encapsulation=shadow","src/components/dnn-rm-edit-file/dnn-rm-edit-file.tsx","src/components/dnn-rm-edit-folder/dnn-rm-edit-folder.scss?tag=dnn-rm-edit-folder&encapsulation=shadow","src/components/dnn-rm-edit-folder/dnn-rm-edit-folder.tsx","src/components/context-menus/context-menu.scss?tag=dnn-rm-file-context-menu&encapsulation=shadow","src/components/context-menus/dnn-rm-file-context-menu/dnn-rm-file-context-menu.tsx","src/components/dnn-rm-files-pane/dnn-rm-files-pane.scss?tag=dnn-rm-files-pane&encapsulation=shadow","src/components/dnn-rm-files-pane/dnn-rm-files-pane.tsx","src/components/context-menus/context-menu.scss?tag=dnn-rm-folder-context-menu&encapsulation=shadow","src/components/context-menus/dnn-rm-folder-context-menu/dnn-rm-folder-context-menu.tsx","src/components/dnn-rm-folder-list/dnn-rm-folder-list.scss?tag=dnn-rm-folder-list&encapsulation=shadow","src/components/dnn-rm-folder-list/dnn-rm-folder-list.tsx","src/components/dnn-rm-folder-list-item/dnn-rm-folder-list-item.scss?tag=dnn-rm-folder-list-item&encapsulation=shadow","src/components/dnn-rm-folder-list-item/dnn-rm-folder-list-item.tsx","src/components/dnn-rm-folder-mappings/dnn-rm-folder-mappings.scss?tag=dnn-rm-folder-mappings&encapsulation=shadow","src/components/dnn-rm-folder-mappings/dnn-rm-folder-mappings.tsx","src/utilities/selection-utilities.ts","src/components/dnn-rm-items-cardview/dnn-rm-items-cardview.scss?tag=dnn-rm-items-cardview&encapsulation=shadow","src/components/dnn-rm-items-cardview/dnn-rm-items-cardview.tsx","src/utilities/filesize-utilities.ts","src/components/dnn-rm-items-listview/dnn-rm-items-listview.scss?tag=dnn-rm-items-listview&encapsulation=shadow","src/components/dnn-rm-items-listview/dnn-rm-items-listview.tsx","src/components/dnn-rm-left-pane/dnn-rm-left-pane.scss?tag=dnn-rm-left-pane&encapsulation=shadow","src/components/dnn-rm-left-pane/dnn-rm-left-pane.tsx","src/components/dnn-rm-move-items/dnn-rm-move-items.scss?tag=dnn-rm-move-items&encapsulation=shadow","src/components/dnn-rm-move-items/dnn-rm-move-items.tsx","src/components/dnn-rm-progress-bar/dnn-rm-progress-bar.scss?tag=dnn-rm-progress-bar&encapsulation=shadow","src/components/dnn-rm-progress-bar/dnn-rm-progress-bar.tsx","src/components/dnn-rm-queued-file/dnn-rm-queued-file.scss?tag=dnn-rm-queued-file&encapsulation=shadow","src/components/dnn-rm-queued-file/dnn-rm-queued-file.tsx","src/components/dnn-rm-right-pane/dnn-rm-right-pane.scss?tag=dnn-rm-right-pane&encapsulation=shadow","src/components/dnn-rm-right-pane/dnn-rm-right-pane.tsx","src/components/dnn-rm-status-bar/dnn-rm-status-bar.scss?tag=dnn-rm-status-bar&encapsulation=shadow","src/components/dnn-rm-status-bar/dnn-rm-status-bar.tsx","src/components/dnn-rm-top-bar/dnn-rm-top-bar.scss?tag=dnn-rm-top-bar&encapsulation=shadow","src/components/dnn-rm-top-bar/dnn-rm-top-bar.tsx","src/components/dnn-rm-unlink-items/dnn-rm-unlink-items.scss?tag=dnn-rm-unlink-items&encapsulation=shadow","src/components/dnn-rm-unlink-items/dnn-rm-unlink-items.tsx","src/components/dnn-rm-upload-file/dnn-rm-upload-file.scss?tag=dnn-rm-upload-file&encapsulation=shadow","src/components/dnn-rm-upload-file/dnn-rm-upload-file.tsx","../../../../node_modules/@dnncommunity/dnn-elements/dist/collection/components/dnn-searchbox/dnn-searchbox.css?tag=dnn-searchbox&encapsulation=shadow","../../../../node_modules/@dnncommunity/dnn-elements/dist/collection/components/dnn-searchbox/dnn-searchbox.js","../../../../node_modules/@dnncommunity/dnn-elements/dist/collection/components/dnn-tab/dnn-tab.css?tag=dnn-tab&encapsulation=shadow","../../../../node_modules/@dnncommunity/dnn-elements/dist/collection/components/dnn-tab/dnn-tab.js","../../../../node_modules/@dnncommunity/dnn-elements/dist/collection/components/dnn-tabs/dnn-tabs.css?tag=dnn-tabs&encapsulation=shadow","../../../../node_modules/@dnncommunity/dnn-elements/dist/collection/components/dnn-tabs/dnn-tabs.js","../../../../node_modules/@dnncommunity/dnn-elements/dist/collection/components/dnn-treeview-item/dnn-treeview-item.css?tag=dnn-treeview-item&encapsulation=shadow","../../../../node_modules/@dnncommunity/dnn-elements/dist/collection/components/dnn-treeview-item/dnn-treeview-item.js","../../../../node_modules/@dnncommunity/dnn-elements/dist/collection/components/dnn-vertical-overflow-menu/dnn-vertical-overflow-menu.css?tag=dnn-vertical-overflow-menu&encapsulation=shadow","../../../../node_modules/@dnncommunity/dnn-elements/dist/collection/components/dnn-vertical-overflow-menu/dnn-vertical-overflow-menu.js","../../../../node_modules/@dnncommunity/dnn-elements/dist/collection/components/dnn-vertical-splitview/dnn-vertical-splitview.css?tag=dnn-vertical-splitview&encapsulation=shadow","../../../../node_modules/@dnncommunity/dnn-elements/dist/collection/components/dnn-vertical-splitview/dnn-vertical-splitview.js"],"sourcesContent":["export class DnnServicesFramework {\n  /**\n   * Initializes the serivces framework\n   */\n  constructor(moduleId) {\n    this.getServiceRoot = (moduleName) => {\n      var serviceRoot = window.top.dnn.getVar(\"sf_siteRoot\", \"/\");\n      serviceRoot += \"API/\" + moduleName + \"/\";\n      return serviceRoot;\n    };\n    this.getTabId = () => {\n      var tabId = window.top.dnn.getVar(\"sf_tabId\", \"-1\");\n      return parseInt(tabId);\n    };\n    this.getModuleId = () => {\n      return this._moduleId;\n    };\n    this.getAntiForgeryValue = () => {\n      const el = document.querySelector(\"input[name=__RequestVerificationToken]\");\n      if (el != null) {\n        return el.value;\n      }\n      else {\n        return null;\n      }\n    };\n    this.getModuleHeaders = () => {\n      var headers = new Headers();\n      if (this.getTabId() > -1) {\n        headers.append(\"ModuleId\", this._moduleId.toString());\n        headers.append(\"TabId\", this.getTabId().toString());\n      }\n      const afValue = this.getAntiForgeryValue();\n      if (afValue != null) {\n        headers.append(\"RequestVerificationToken\", afValue);\n      }\n      return headers;\n    };\n    this._moduleId = moduleId;\n  }\n}\n//# sourceMappingURL=dnnServicesFramework.js.map\n","import { getRenderingRef, forceUpdate } from '@stencil/core';\n\nconst appendToMap = (map, propName, value) => {\n    const items = map.get(propName);\n    if (!items) {\n        map.set(propName, [value]);\n    }\n    else if (!items.includes(value)) {\n        items.push(value);\n    }\n};\nconst debounce = (fn, ms) => {\n    let timeoutId;\n    return (...args) => {\n        if (timeoutId) {\n            clearTimeout(timeoutId);\n        }\n        timeoutId = setTimeout(() => {\n            timeoutId = 0;\n            fn(...args);\n        }, ms);\n    };\n};\n\n/**\n * Check if a possible element isConnected.\n * The property might not be there, so we check for it.\n *\n * We want it to return true if isConnected is not a property,\n * otherwise we would remove these elements and would not update.\n *\n * Better leak in Edge than to be useless.\n */\nconst isConnected = (maybeElement) => !('isConnected' in maybeElement) || maybeElement.isConnected;\nconst cleanupElements = debounce((map) => {\n    for (let key of map.keys()) {\n        map.set(key, map.get(key).filter(isConnected));\n    }\n}, 2000);\nconst stencilSubscription = () => {\n    if (typeof getRenderingRef !== 'function') {\n        // If we are not in a stencil project, we do nothing.\n        // This function is not really exported by @stencil/core.\n        return {};\n    }\n    const elmsToUpdate = new Map();\n    return {\n        dispose: () => elmsToUpdate.clear(),\n        get: (propName) => {\n            const elm = getRenderingRef();\n            if (elm) {\n                appendToMap(elmsToUpdate, propName, elm);\n            }\n        },\n        set: (propName) => {\n            const elements = elmsToUpdate.get(propName);\n            if (elements) {\n                elmsToUpdate.set(propName, elements.filter(forceUpdate));\n            }\n            cleanupElements(elmsToUpdate);\n        },\n        reset: () => {\n            elmsToUpdate.forEach((elms) => elms.forEach(forceUpdate));\n            cleanupElements(elmsToUpdate);\n        },\n    };\n};\n\nconst unwrap = (val) => (typeof val === 'function' ? val() : val);\nconst createObservableMap = (defaultState, shouldUpdate = (a, b) => a !== b) => {\n    const unwrappedState = unwrap(defaultState);\n    let states = new Map(Object.entries(unwrappedState !== null && unwrappedState !== void 0 ? unwrappedState : {}));\n    const handlers = {\n        dispose: [],\n        get: [],\n        set: [],\n        reset: [],\n    };\n    const reset = () => {\n        var _a;\n        // When resetting the state, the default state may be a function - unwrap it to invoke it.\n        // otherwise, the state won't be properly reset\n        states = new Map(Object.entries((_a = unwrap(defaultState)) !== null && _a !== void 0 ? _a : {}));\n        handlers.reset.forEach((cb) => cb());\n    };\n    const dispose = () => {\n        // Call first dispose as resetting the state would\n        // cause less updates ;)\n        handlers.dispose.forEach((cb) => cb());\n        reset();\n    };\n    const get = (propName) => {\n        handlers.get.forEach((cb) => cb(propName));\n        return states.get(propName);\n    };\n    const set = (propName, value) => {\n        const oldValue = states.get(propName);\n        if (shouldUpdate(value, oldValue, propName)) {\n            states.set(propName, value);\n            handlers.set.forEach((cb) => cb(propName, value, oldValue));\n        }\n    };\n    const state = (typeof Proxy === 'undefined'\n        ? {}\n        : new Proxy(unwrappedState, {\n            get(_, propName) {\n                return get(propName);\n            },\n            ownKeys(_) {\n                return Array.from(states.keys());\n            },\n            getOwnPropertyDescriptor() {\n                return {\n                    enumerable: true,\n                    configurable: true,\n                };\n            },\n            has(_, propName) {\n                return states.has(propName);\n            },\n            set(_, propName, value) {\n                set(propName, value);\n                return true;\n            },\n        }));\n    const on = (eventName, callback) => {\n        handlers[eventName].push(callback);\n        return () => {\n            removeFromArray(handlers[eventName], callback);\n        };\n    };\n    const onChange = (propName, cb) => {\n        const unSet = on('set', (key, newValue) => {\n            if (key === propName) {\n                cb(newValue);\n            }\n        });\n        // We need to unwrap the defaultState because it might be a function.\n        // Otherwise we might not be sending the right reset value.\n        const unReset = on('reset', () => cb(unwrap(defaultState)[propName]));\n        return () => {\n            unSet();\n            unReset();\n        };\n    };\n    const use = (...subscriptions) => {\n        const unsubs = subscriptions.reduce((unsubs, subscription) => {\n            if (subscription.set) {\n                unsubs.push(on('set', subscription.set));\n            }\n            if (subscription.get) {\n                unsubs.push(on('get', subscription.get));\n            }\n            if (subscription.reset) {\n                unsubs.push(on('reset', subscription.reset));\n            }\n            if (subscription.dispose) {\n                unsubs.push(on('dispose', subscription.dispose));\n            }\n            return unsubs;\n        }, []);\n        return () => unsubs.forEach((unsub) => unsub());\n    };\n    const forceUpdate = (key) => {\n        const oldValue = states.get(key);\n        handlers.set.forEach((cb) => cb(key, oldValue, oldValue));\n    };\n    return {\n        state,\n        get,\n        set,\n        on,\n        onChange,\n        use,\n        dispose,\n        reset,\n        forceUpdate,\n    };\n};\nconst removeFromArray = (array, item) => {\n    const index = array.indexOf(item);\n    if (index >= 0) {\n        array[index] = array[array.length - 1];\n        array.length--;\n    }\n};\n\nconst createStore = (defaultState, shouldUpdate) => {\n    const map = createObservableMap(defaultState, shouldUpdate);\n    map.use(stencilSubscription());\n    return map;\n};\n\nexport { createObservableMap, createStore };\n","import { createStore } from \"@stencil/store\";\r\nimport { SortFieldInfo } from \"../enums/SortField\";\r\nimport { GetFoldersResponse } from \"../services/InternalServicesClient\";\r\nimport { GetFolderContentResponse, GetSettingsResponse, Item } from \"../services/ItemsClient\";\r\nimport { LocalizedStrings } from \"../services/LocalizationClient\";\r\n\r\nconst { state } = createStore<{\r\n    moduleId: number;\r\n    rootFolders?: GetFoldersResponse;\r\n    currentItems?: GetFolderContentResponse;\r\n    layout: \"list\" | \"card\";\r\n    localization?: LocalizedStrings;\r\n    itemsSearchTerm?: string;\r\n    pageSize: number;\r\n    lastSearchRequestedPage: number;\r\n    sortField?: SortFieldInfo;\r\n    selectedItems: Item[];\r\n    settings?: GetSettingsResponse;\r\n    canManageFolderTypes: boolean;\r\n}>({\r\n    moduleId: -1,\r\n    layout: \"list\",\r\n    pageSize: 50,\r\n    lastSearchRequestedPage: 1,\r\n    selectedItems: [],\r\n    canManageFolderTypes: false,\r\n});\r\n\r\nexport default state;\r\n",":host{\r\n    display: inline-flex;\r\n}\r\n\r\nbutton{\r\n    cursor: pointer;\r\n    border: none;\r\n    background-color: transparent;\r\n    margin: 0;\r\n    padding: 0;\r\n    display: flex;\r\n    align-items: center;\r\n    svg{\r\n        fill: var(--dnn-color-primary);\r\n    }\r\n}","import { Component, Host, h, Prop } from '@stencil/core';\r\nimport { Item } from '../../../services/ItemsClient';\r\nimport state from \"../../../store/store\";\r\n\r\n@Component({\r\n  tag: 'dnn-action-copy-url',\r\n  styleUrl: '../dnn-action.scss',\r\n  shadow: true,\r\n})\r\nexport class DnnActionCopyUrl {\r\n\r\n  @Prop() items!: Item[];\r\n\r\n  private handleClick(): void {\r\n    let t;\r\n    if (this.items[0].path.includes(\":\")) {\r\n      t = this.items[0].path;\r\n    } else {\r\n      t = `${window.location.protocol}//${window.location.host}${this.items[0].path}`;\r\n    }   \r\n    navigator.clipboard.writeText(t);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <button onClick={() => this.handleClick()}>\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5zm-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-2zm-3-4h8v2H8z\"/></svg>\r\n          <span>{state.localization.CopyUrl}</span>\r\n        </button>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","import state from \"../store/store\"\r\nexport class SortField{\r\n    readonly itemName: SortFieldInfo;\r\n    readonly lastModifiedOnDate: SortFieldInfo;\r\n    readonly size: SortFieldInfo;\r\n    readonly parentFolder: SortFieldInfo;\r\n    readonly createdOnDate: SortFieldInfo;\r\n\r\n    constructor(){\r\n        this.itemName = new SortFieldInfo(\"ItemName\");\r\n        this.lastModifiedOnDate = new SortFieldInfo(\"LastModifiedOnDate\");\r\n        this.size = new SortFieldInfo(\"Size\");\r\n        this.parentFolder = new SortFieldInfo(\"ParentFolder\");\r\n        this.createdOnDate = new SortFieldInfo(\"CreatedOnDate\");\r\n    }\r\n}\r\n\r\nexport class SortFieldInfo{\r\n    readonly sortKey: string;\r\n    \r\n    get localizedName(){\r\n        return state.localization[`SortField_${this.sortKey}`];\r\n    }\r\n\r\n    constructor(sortKey: string){\r\n        this.sortKey = sortKey;\r\n    }\r\n}\r\n\r\nexport const sortField = new SortField();","import { DnnServicesFramework } from \"@dnncommunity/dnn-elements\";\r\nimport { IPermissions } from \"@dnncommunity/dnn-elements/dist/types/components/dnn-permissions-grid/permissions-interface\";\r\nimport { IRoleGroup } from \"@dnncommunity/dnn-elements/dist/types/components/dnn-permissions-grid/role-group-interface\";\r\nimport { IRole } from \"@dnncommunity/dnn-elements/dist/types/components/dnn-permissions-grid/role-interface\";\r\nimport { ISearchedUser } from \"@dnncommunity/dnn-elements/dist/types/components/dnn-permissions-grid/searched-user-interface\";\r\nimport { SortFieldInfo } from \"../enums/SortField\";\r\n\r\nexport class ItemsClient{\r\n    private sf: DnnServicesFramework;\r\n    private requestUrl: string;\r\n    private abortController: AbortController;\r\n\r\n    /**\r\n     * Initializes the api client.\r\n     * @param moduleId The ID of the current module.\r\n     */\r\n    constructor(moduleId: number) {\r\n        this.sf = new DnnServicesFramework(moduleId);\r\n        this.requestUrl = `${this.sf.getServiceRoot(\"ResourceManager\")}Items/`\r\n    }\r\n\r\n    public getSettings() {\r\n        return new Promise<GetSettingsResponse>((resolve, reject) => {\r\n            const url = `${this.requestUrl}GetSettings`;\r\n            const headers = this.sf.getModuleHeaders();\r\n            headers.append(\"groupId\", this.getGroupId());\r\n            fetch(url, {\r\n                headers,\r\n            })\r\n            .then(response => {\r\n                if (response.status == 200){\r\n                    response.json()\r\n                    .then(data => {\r\n                        resolve(data);\r\n                    });\r\n                }\r\n                else{\r\n                    response.json().then(error => reject(error));\r\n                }\r\n            })\r\n            .catch(error => reject(error));\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Gets a specific folder contents.\r\n     * @param folderId Gets the content of a folder.\r\n     * @param startIndex Which item to start at in the paging mechanism.\r\n     * @param numItems How many items to return.\r\n     * @param sorting How to sort the items returned.\r\n     * @returns\r\n     */\r\n    public getFolderContent(\r\n        folderId: number,\r\n        startIndex = 0,\r\n        numItems = 20,\r\n        sorting: SortFieldInfo = new SortFieldInfo(\"ItemName\")){\r\n        return new Promise<GetFolderContentResponse>((resolve, reject) => {\r\n            const url = `${this.requestUrl}GetFolderContent?folderId=${folderId}&startIndex=${startIndex}&numItems=${numItems}&sorting=${sorting.sortKey}`;\r\n            const headers = this.sf.getModuleHeaders();\r\n            headers.append(\"groupId\", this.getGroupId());\r\n            this.abortController?.abort();\r\n            this.abortController = new AbortController();\r\n            fetch(url, {\r\n                headers,\r\n                signal: this.abortController.signal,\r\n            })\r\n            .then(response => {\r\n                if (response.status == 200){\r\n                    response.json().then(data => resolve(data));\r\n                }\r\n                else{\r\n                    response.json().then(error => reject(error.message));\r\n                }\r\n            })\r\n            .catch(error => reject(error));\r\n        });\r\n    }\r\n\r\n    public getFolderIconUrl(folderId: number) {\r\n      return new Promise<string>((resolve, reject) => {\r\n        const url = `${this.requestUrl}GetFolderIconUrl?folderId=${folderId}`;\r\n        fetch(url, {\r\n            headers: this.sf.getModuleHeaders(),\r\n        })\r\n        .then(response => {\r\n            if (response.status == 200){\r\n                response.json().then(data => resolve(data.url));\r\n            }\r\n            else{\r\n                response.json().then(error => reject(error));\r\n            }\r\n        })\r\n        .catch(error => reject(error));\r\n      });\r\n    }\r\n\r\n    public getAllowedFileExtensions() {\r\n        return new Promise<GetAllowedFileExtensionsResponse>((resolve, reject) => {\r\n            const url = `${this.requestUrl}GetAllowedFileExtensions`;\r\n            fetch(url, {\r\n                headers: this.sf.getModuleHeaders(),\r\n            })\r\n            .then(response => {\r\n                if (response.status == 200){\r\n                    response.json().then(data => resolve(data));\r\n                }\r\n                else{\r\n                    response.json().then(error => reject(error));\r\n                }\r\n            })\r\n            .catch(error => reject(error));\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Syncs the folder content.\r\n     * @param folderId The folder id.\r\n     * @param numItems The number of items.\r\n     * @param sorting The sorting.\r\n     * @param recursive If true sync recursively.\r\n     * @returns\r\n     */\r\n     public syncFolderContent(\r\n        folderId: number,\r\n        numItems = 20,\r\n        sorting: SortFieldInfo = new SortFieldInfo(\"ItemName\"),\r\n        recursive = false){\r\n        return new Promise<void>((resolve, reject) => {\r\n            const url = `${this.requestUrl}SyncFolderContent?folderId=${folderId}&numItems=${numItems}&sorting=${sorting.sortKey}&recursive=${recursive}`;\r\n            const headers = this.sf.getModuleHeaders();\r\n            headers.append(\"groupId\", this.getGroupId());\r\n            this.abortController?.abort();\r\n            this.abortController = new AbortController();\r\n            fetch(url, {\r\n                headers,\r\n                signal: this.abortController.signal,\r\n            })\r\n            .then(response => {\r\n                if (response.status == 200){\r\n                    response.json().then(data => resolve(data));\r\n                }\r\n                else{\r\n                    response.json().then(error => reject(error.message));\r\n                }\r\n            })\r\n            .catch(error => reject(error));\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Downloads a file.\r\n     * @param fileId The id of the file to download.\r\n     * @param forceDownload A value indicating whether to force the download.\r\n     *                      When true, will download the file as an attachment and ensures the browser won't just render the file if supported.\r\n     *                      When false, the browser may render the file instead of downloading it for some formats like pdf or images.\r\n     * @returns The actual requested file.\r\n     */\r\n     public download(\r\n        fileId: number,\r\n        forceDownload = true){\r\n        return new Promise<void>((resolve, reject) => {\r\n            const url = `${this.requestUrl}Download?fileId=${fileId}&forceDownload=${forceDownload}`;\r\n            const headers = this.sf.getModuleHeaders();\r\n            this.abortController?.abort();\r\n            this.abortController = new AbortController();\r\n            fetch(url, {\r\n                headers,\r\n                signal: this.abortController.signal,\r\n            })\r\n            .then(response => {\r\n                if (response.status == 200) {\r\n                    var filename = response.headers.get(\"Content-Disposition\").split(\"filename=\")[1];\r\n                    filename = this.decodeRFC5987ContentDisposition(filename);\r\n                    response.blob().then(blob => {\r\n                        var oldDownloadLink = document.querySelector(\"#downloadLink\");\r\n                        if (oldDownloadLink) {\r\n                            oldDownloadLink.remove();\r\n                        }\r\n                        var downloadLink = document.createElement('a');\r\n                        downloadLink.id = \"downloadLink\";\r\n                        downloadLink.href = window.URL.createObjectURL(blob);\r\n                        downloadLink.download = filename;\r\n                        document.body.appendChild(downloadLink);\r\n                        downloadLink.click();\r\n                        resolve();\r\n                    });\r\n                }\r\n            })\r\n            .catch(error => reject(error));\r\n        });\r\n    }\r\n    private decodeRFC5987ContentDisposition(filename: string): string {\r\n        filename = filename.replace(/(^\")|(\"$)/g, '');\r\n\r\n        if (filename.startsWith(\"=?utf-8?B?\") && filename.endsWith(\"?=\")) {\r\n            const encoded = filename.slice(10, -2);\r\n            return decodeURIComponent(\r\n              atob(encoded)\r\n                .split('')\r\n                .map(c => '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2))\r\n                .join('')\r\n            );\r\n          }\r\n          return filename;\r\n    }\r\n\r\n    public search(\r\n        folderId: number,\r\n        search: string,\r\n        pageIndex: number,\r\n        pageSize = 20,\r\n        sorting: SortFieldInfo = new SortFieldInfo(\"ItemName\"),\r\n        culture = \"\")\r\n    {\r\n        return new Promise<SearchResponse>((resolve, reject) => {\r\n            const url = `${this.requestUrl}Search?folderId=${folderId}&search=${search}&pageIndex=${pageIndex}&pageSize=${pageSize}&sorting=${sorting.sortKey}&culture=${culture}`;\r\n            const headers = this.sf.getModuleHeaders();\r\n            headers.append(\"groupId\", this.getGroupId());\r\n            this.abortController?.abort();\r\n            this.abortController = new AbortController();\r\n            fetch(url, {\r\n                headers,\r\n                signal: this.abortController.signal,\r\n            })\r\n            .then(response => {\r\n                if (response.status == 200){\r\n                    response.json().then(data => resolve(data));\r\n                }\r\n                else{\r\n                    response.json().then(error => reject(error.message));\r\n                }\r\n            })\r\n            .catch(error => reject(error));\r\n        });\r\n    }\r\n\r\n    public getFolderMappings(){\r\n        return new Promise<FolderMappingInfo[]>((resolve, reject) => {\r\n            const url = `${this.requestUrl}GetFolderMappings`;\r\n            fetch(url, {\r\n                headers: this.sf.getModuleHeaders(),\r\n            })\r\n            .then(response => {\r\n                if (response.status == 200){\r\n                    response.json().then(data => resolve(data));\r\n                }\r\n                else{\r\n                    response.json().then(error => reject(error.message));\r\n                }\r\n            })\r\n            .catch(error => reject(error));\r\n        });\r\n    }\r\n\r\n    public canManageFolderTypes(){\r\n        return new Promise<boolean>((resolve, reject) => {\r\n            const url = `${this.requestUrl}CanManageFolderTypes`;\r\n            fetch(url, {\r\n                headers: this.sf.getModuleHeaders(),\r\n            })\r\n            .then(response => {\r\n                if (response.status == 200){\r\n                    response.json().then(data => resolve(data));\r\n                } else {\r\n                    response.json().then(error => reject(error.message));\r\n                }\r\n            })\r\n            .catch(error => reject(error));\r\n        })\r\n    }\r\n\r\n    public getAddFolderTypeUrl(){\r\n        return new Promise<string>((resolve, reject) => {\r\n            const url = `${this.requestUrl}GetAddFolderTypeUrl`;\r\n            fetch(url, {\r\n                headers: this.sf.getModuleHeaders(),\r\n            })\r\n            .then(response => {\r\n                if (response.status == 200){\r\n                    response.json().then(data => resolve(data));\r\n                }\r\n                else{\r\n                    response.json().then(error => reject(error.message));\r\n                }\r\n            })\r\n            .catch(error => reject(error));\r\n        });\r\n    };\r\n\r\n    public createNewFolder(request: CreateNewFolderRequest){\r\n        return new Promise<CreateNewFolderResponse>((resolve, reject) => {\r\n            const url = `${this.requestUrl}CreateNewFolder`;\r\n            const headers = this.sf.getModuleHeaders();\r\n            headers.append(\"groupId\", this.getGroupId());\r\n            headers.append(\"Content-Type\", \"application/json\");\r\n            fetch(url, {\r\n                method: \"POST\",\r\n                body: JSON.stringify(request),\r\n                headers,\r\n            })\r\n            .then(response => {\r\n                if (response.status == 200){\r\n                    response.json().then(data => resolve(data));\r\n                }\r\n                else{\r\n                    response.json().then(error => reject(error.ExceptionMessage || error.message));\r\n                }\r\n            })\r\n            .catch(reason => reject(reason));\r\n\r\n        });\r\n    }\r\n\r\n    public getFolderItem(folderId: number){\r\n        return new Promise<Item>((resolve, reject) => {\r\n            const url = `${this.requestUrl}GetFolderItem?folderId=${folderId}`;\r\n            const headers = this.sf.getModuleHeaders();\r\n            headers.append(\"groupId\", this.getGroupId());\r\n            fetch(url, {\r\n                headers,\r\n            })\r\n            .then(response => {\r\n                if (response.status == 200){\r\n                    response.json().then(data => resolve(data));\r\n                }\r\n                else{\r\n                    response.json().then(error => reject(error.ExceptionMessage || error.message));\r\n                }\r\n            })\r\n            .catch(reason => reject(reason));\r\n        });\r\n    }\r\n\r\n    public getFolderDetails(folderId: number){\r\n        return new Promise<FolderDetails>((resolve, reject) => {\r\n            const url = `${this.requestUrl}GetFolderDetails?folderId=${folderId}`;\r\n            fetch(url, {\r\n                headers: this.sf.getModuleHeaders(),\r\n            })\r\n            .then(response => {\r\n                if (response.status == 200){\r\n                    response.json().then(data => resolve(data));\r\n                }\r\n                else{\r\n                    response.json().then(error => reject(error.ExceptionMessage || error.message));\r\n                }\r\n            })\r\n            .catch(reason => reject(reason));\r\n        });\r\n    }\r\n\r\n    public getFileDetails(fileId: number){\r\n        return new Promise<FileDetails>((resolve, reject) => {\r\n            const url = `${this.requestUrl}GetFileDetails?fileId=${fileId}`;\r\n            fetch(url, {\r\n                headers: this.sf.getModuleHeaders(),\r\n            })\r\n            .then(response => {\r\n                if (response.status == 200){\r\n                    response.json().then(data => resolve(data));\r\n                }\r\n                else{\r\n                    response.json().then(error => reject(error.ExceptionMessage || error.message));\r\n                }\r\n            })\r\n            .catch(reason => reject(reason));\r\n        });\r\n    }\r\n\r\n    public getRoleGroups(){\r\n        return new Promise<IRoleGroup[]>((resolve, reject) => {\r\n            const url = `${this.requestUrl}GetRoleGroups`;\r\n            fetch(url, {\r\n                headers: this.sf.getModuleHeaders(),\r\n                })\r\n                .then(response => {\r\n                    if (response.status == 200){\r\n                        response.json().then(data => resolve(data));\r\n                    }\r\n                    else{\r\n                        response.json().then(error => reject(error.ExceptionMessage || error.message));\r\n                    }\r\n                })\r\n                .catch(reason => reject(reason));\r\n        });\r\n    }\r\n\r\n    public getRoles(){\r\n        return new Promise<IRole[]>((resolve, reject) => {\r\n            const url = `${this.requestUrl}GetRoles`;\r\n            fetch(url, {\r\n                headers: this.sf.getModuleHeaders(),\r\n            })\r\n            .then(response => {\r\n                if (response.status == 200){\r\n                    response.json().then(data => resolve(data));\r\n                }\r\n                else{\r\n                    response.json().then(error => reject(error.ExceptionMessage || error.message));\r\n                }\r\n            })\r\n            .catch(reason => reject(reason));\r\n        });\r\n    }\r\n\r\n    public searchUsers(query: string) {\r\n        return new Promise<ISearchedUser[]>((resolve, reject) => {\r\n            const url = `${this.requestUrl}GetSuggestionUsers?keyword=${query}&count=50`;\r\n            fetch(url, {\r\n                headers: this.sf.getModuleHeaders(),\r\n            })\r\n            .then(response => {\r\n                if (response.status == 200){\r\n                    response.json().then(data => resolve(data));\r\n                }\r\n                else{\r\n                    response.json().then(error => reject(error.ExceptionMessage || error.message));\r\n                }\r\n            })\r\n            .catch(reason => reject(reason));\r\n        });\r\n    }\r\n\r\n    public saveFolderDetails(request: SaveFolderDetailsRequest){\r\n        return new Promise<void>((resolve, reject) => {\r\n            const url = `${this.requestUrl}SaveFolderDetails`;\r\n            const headers = this.sf.getModuleHeaders();\r\n            headers.append(\"Content-Type\", \"application/json\");\r\n            fetch(url, {\r\n                method: \"POST\",\r\n                body: JSON.stringify(request),\r\n                headers,\r\n            })\r\n            .then(response => {\r\n                if (response.status == 200){\r\n                    resolve();\r\n                }\r\n                else{\r\n                    response.json().then(error => reject(error.ExceptionMessage || error.message));\r\n                }\r\n            })\r\n            .catch(reason => reject(reason));\r\n        });\r\n    }\r\n\r\n    public saveFileDetails(request: SaveFileDetailsRequest){\r\n        return new Promise<void>((resolve, reject) => {\r\n            const url = `${this.requestUrl}SaveFileDetails`;\r\n            const headers = this.sf.getModuleHeaders();\r\n            headers.append(\"Content-Type\", \"application/json\");\r\n            fetch(url, {\r\n                method: \"POST\",\r\n                body: JSON.stringify(request),\r\n                headers,\r\n            })\r\n            .then(response => {\r\n                if (response.status == 200){\r\n                    resolve();\r\n                }\r\n                else{\r\n                    response.json().then(error => reject(error.ExceptionMessage || error.message));\r\n                }\r\n            })\r\n            .catch(reason => reject(reason));\r\n        });\r\n    }\r\n\r\n    public moveFile(request: MoveFileRequest){\r\n        return new Promise<void>((resolve, reject) => {\r\n            const url = `${this.requestUrl}MoveFile`;\r\n            const headers = this.sf.getModuleHeaders();\r\n            headers.append(\"Content-Type\", \"application/json\");\r\n            headers.append(\"groupId\", this.getGroupId());\r\n            fetch(url, {\r\n                method: \"POST\",\r\n                body: JSON.stringify(request),\r\n                headers,\r\n            })\r\n            .then(response => {\r\n                if (response.status == 200){\r\n                    resolve();\r\n                }\r\n                else{\r\n                    response.json().then(error => reject(error.ExceptionMessage || error.message));\r\n                }\r\n            })\r\n            .catch(reason => reject(reason));\r\n        });\r\n    }\r\n\r\n    public moveFolder(request: MoveFolderRequest){\r\n        return new Promise<void>((resolve, reject) => {\r\n            const url = `${this.requestUrl}MoveFolder`;\r\n            const headers = this.sf.getModuleHeaders();\r\n            headers.append(\"Content-Type\", \"application/json\");\r\n            headers.append(\"groupId\", this.getGroupId());\r\n            fetch(url, {\r\n                method: \"POST\",\r\n                body: JSON.stringify(request),\r\n                headers,\r\n            })\r\n            .then(response => {\r\n                if (response.status == 200){\r\n                    resolve();\r\n                }\r\n                else{\r\n                    response.json().then(error => reject(error.ExceptionMessage || error.message));\r\n                }\r\n            })\r\n            .catch(reason => reject(reason));\r\n        });\r\n    }\r\n\r\n    public deleteFolder(request: DeleteFolderRequest){\r\n        return new Promise<void>((resolve, reject) => {\r\n            const url = `${this.requestUrl}DeleteFolder`;\r\n            const headers = this.sf.getModuleHeaders();\r\n            headers.append(\"Content-Type\", \"application/json\");\r\n            headers.append(\"groupId\", this.getGroupId());\r\n            fetch(url, {\r\n                method: \"POST\",\r\n                body: JSON.stringify(request),\r\n                headers,\r\n            })\r\n            .then(response => {\r\n                if (response.status == 200){\r\n                    resolve();\r\n                }\r\n                else{\r\n                    response.json().then(error => reject(error.ExceptionMessage || error.message));\r\n                }\r\n            })\r\n            .catch(reason => reject(reason));\r\n        });\r\n    }\r\n\r\n    public deleteFile(request: DeleteFileRequest){\r\n        return new Promise<void>((resolve, reject) => {\r\n            const url = `${this.requestUrl}DeleteFile`;\r\n            const headers = this.sf.getModuleHeaders();\r\n            headers.append(\"Content-Type\", \"application/json\");\r\n            headers.append(\"groupId\", this.getGroupId());\r\n            fetch(url, {\r\n                method: \"POST\",\r\n                body: JSON.stringify(request),\r\n                headers,\r\n            })\r\n            .then(response => {\r\n                if (response.status == 200){\r\n                    resolve();\r\n                }\r\n                else{\r\n                    response.json().then(error => reject(error.ExceptionMessage || error.message));\r\n                }\r\n            })\r\n            .catch(reason => reject(reason));\r\n        });\r\n    }\r\n\r\n    private getGroupId(): string {\r\n        let result = \"-1\";\r\n        if (window.location.pathname.indexOf(\"/groupid/\") > -1){\r\n            const parts = window.location.pathname.split(\"/\");\r\n            const groupIdIndex = parts.indexOf(\"groupid\");\r\n            result = parts[groupIdIndex + 1];\r\n            return result;\r\n        }\r\n\r\n        const searchParams = new URLSearchParams(window.location.search);\r\n        const groupId = searchParams.get(\"groupid\");\r\n        if (groupId){\r\n            result = groupId;\r\n        }\r\n\r\n        return result;\r\n    }\r\n}\r\n\r\n/** Represents the module settings. */\r\nexport interface GetSettingsResponse{\r\n        /** The name of the root folder (could be an actual folder name or \"Site Assets\" or \"Global Assets\") */\r\n        HomeFolderName: string;\r\n\r\n        /** The ID of the home folder configures in the settings */\r\n        HomeFolderId: number;\r\n\r\n        /** The current module mode configured in the settings */\r\n        Mode: ModuleMode;\r\n\r\n        /** Whether folder is global or for current portal */\r\n        IsHostPortal: boolean;\r\n}\r\n\r\nexport enum ModuleMode{\r\n    /** Normal mode is when the module is used to manage site or host files. */\r\n    Normal = 0,\r\n\r\n    /** User mode is for when a module is used for a specific user to manage his files. */\r\n    User = 1,\r\n\r\n    /** Group mode is for when the module is used by a social group. */\r\n    Group = 2,\r\n}\r\n\r\nexport interface GetFolderContentResponse{\r\n    folder: FolderInfo;\r\n    hasAddFilesPermission: boolean;\r\n    hasAddFoldersPermission: boolean;\r\n    hasDeletePermission: boolean;\r\n    hasManagePermission: boolean;\r\n    items: Item[];\r\n    totalCount: number;\r\n}\r\n\r\nexport interface GetAllowedFileExtensionsResponse {\r\n    /** A coma delimited list of the allowed file extensions. */\r\n    allowedExtensions: string;\r\n    validationCode: string;\r\n    maxUploadFileSize: number;\r\n}\r\n\r\nexport interface FolderInfo{\r\n    folderId: number;\r\n    folderMappingId: number;\r\n    folderName: string;\r\n    folderParentId: number;\r\n    folderPath: string;\r\n}\r\n\r\nexport interface Item{\r\n    /** The file icon (not the image thumbnail) */\r\n    iconUrl: string;\r\n    /** If true, the item is a folder and the itemId represents a folderId, if false then the item is a file and the id is the fileId. */\r\n    isFolder: boolean;\r\n    /** The folder or file id. */\r\n    itemId: number;\r\n    /** The folder or file name. */\r\n    itemName: string;\r\n    /** The relative url to the file (no present on folders) */\r\n    path?: string;\r\n    /** If true, a thumbnail is available for this item. */\r\n    thumbnailAvailable?: boolean | undefined;\r\n    /** The relative url to the item thumbnail. */\r\n    thumbnailUrl?: string;\r\n    /** And ISO 8601 string representing the created date of the item. */\r\n    createdOn: string;\r\n    /** And ISO 8601 string representing the last modified date of the item. */\r\n    modifiedOn: string;\r\n    /** The size of the file (only available for file Items) */\r\n    fileSize?: number,\r\n    /** Defines if a folder has the possibility of being unlinked instead of deleted. */\r\n    unlinkAllowedStatus?: \"true\" | \"false\" | \"unlinkOnly\",\r\n}\r\n\r\nexport interface SearchResponse{\r\n    items: Item[],\r\n    totalCount: number,\r\n}\r\n\r\nexport interface FolderMappingInfo{\r\n    /** The ID of the folder mapping. */\r\n    FolderMappingID: number;\r\n    /** The provider type name such as \"AzureFolderProvider\" */\r\n    FolderProviderType: string;\r\n    /** True if this is the default provider type. */\r\n    IsDefault: boolean;\r\n    /** A friendly name for this mapping type. */\r\n    MappingName: string;\r\n    /** A url that allows editing this folder mapping. */\r\n    editUrl: string;\r\n}\r\n\r\nexport interface CreateNewFolderRequest{\r\n    /** Gets or sets the new folder name. */\r\n    FolderName: string;\r\n\r\n    /** Gets or sets he parent folder id for the new folder. */\r\n    ParentFolderId: number;\r\n\r\n    /** Gets or sets the folder mapping id. */\r\n    FolderMappingId: number;\r\n\r\n    /** Gets or sets the optional mapped path. */\r\n    MappedName?: string;\r\n}\r\n\r\nexport interface CreateNewFolderResponse{\r\n    /** The ID of the recently created folder. */\r\n    FolderID: number;\r\n\r\n    /** The created folder name. */\r\n    FolderName: string,\r\n\r\n    /** The url to the folder icon. */\r\n    IconUrl: string;\r\n\r\n    /** The ID of the folder mapping. */\r\n    FolderMappingID: number,\r\n}\r\n\r\nexport interface FolderDetails{\r\n    folderId: number;\r\n    folderName: string;\r\n    createdOnDate: string;\r\n    createdBy: string;\r\n    lastModifiedOnDate: string;\r\n    lastModifiedBy: string;\r\n    type: string;\r\n    isVersioned: boolean;\r\n    permissions: IPermissions;\r\n}\r\n\r\nexport interface SaveFolderDetailsRequest{\r\n    folderId: number;\r\n    folderName: string;\r\n    permissions: IPermissions;\r\n}\r\n\r\nexport interface FileDetails{\r\n    fileId: number;\r\n    fileName: string;\r\n    title: string;\r\n    description: string;\r\n    size: string;\r\n    createdOnDate: string;\r\n    createdBy: string;\r\n    lastModifiedOnDate: string;\r\n    lastModifiedBy: string;\r\n    url: string;\r\n    iconUrl: string;\r\n}\r\n\r\nexport interface SaveFileDetailsRequest{\r\n    fileId: number;\r\n    fileName: string;\r\n    title: string;\r\n    description: string;\r\n}\r\n\r\nexport interface MoveFileRequest{\r\n    SourceFileId: number;\r\n    DestinationFolderId: number;\r\n}\r\n\r\nexport interface MoveFolderRequest{\r\n    SourceFolderId: number;\r\n    DestinationFolderId: number;\r\n}\r\n\r\nexport interface DeleteFolderRequest{\r\n    FolderId: number;\r\n    UnlinkAllowedStatus: boolean;\r\n}\r\n\r\nexport interface DeleteFileRequest{\r\n    FileId: number;\r\n}\r\n\r\n",":host{\r\n    display: inline-flex;\r\n}\r\n\r\nbutton{\r\n    cursor: pointer;\r\n    border: none;\r\n    background-color: transparent;\r\n    margin: 0;\r\n    padding: 0;\r\n    display: flex;\r\n    align-items: center;\r\n    svg{\r\n        fill: var(--dnn-color-primary);\r\n    }\r\n}","import { Component, Host, h, Prop } from '@stencil/core';\r\nimport { ItemsClient } from '../../../services/ItemsClient';\r\nimport state from \"../../../store/store\";\r\n\r\n@Component({\r\n  tag: 'dnn-action-create-folder',\r\n  styleUrl: '../dnn-action.scss',\r\n  shadow: true,\r\n})\r\nexport class DnnActionCreateFolder {\r\n\r\n  @Prop() parentFolderId: number;\r\n\r\n  private readonly itemsClient: ItemsClient;\r\n\r\n  constructor(){\r\n    this.itemsClient = new ItemsClient(state.moduleId);\r\n  }\r\n\r\n  private handleClick(): void {\r\n    if (this.parentFolderId){\r\n      this.itemsClient.getFolderContent(this.parentFolderId, 0, 0)\r\n      .then(data => {\r\n        state.currentItems = data;\r\n        this.showModal();\r\n      })\r\n      .catch(error => alert(error));\r\n      return;\r\n    }\r\n\r\n    this.showModal();\r\n  }\r\n\r\n  private showModal(){\r\n    const modal = document.createElement(\"dnn-modal\");\r\n    modal.backdropDismiss = false;\r\n    modal.showCloseButton = false;\r\n    const editor = document.createElement(\"dnn-rm-create-folder\");\r\n    modal.appendChild(editor);\r\n    document.body.appendChild(modal);\r\n    modal.show();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <button onClick={() => this.handleClick()}>\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M20 6h-8l-2-2H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-1 8h-3v3h-2v-3h-3v-2h3V9h2v3h3v2z\"/></svg>\r\n          <span>{state.localization.AddFolder}</span>\r\n        </button>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host{\r\n    display: inline-flex;\r\n}\r\n\r\nbutton{\r\n    cursor: pointer;\r\n    border: none;\r\n    background-color: transparent;\r\n    margin: 0;\r\n    padding: 0;\r\n    display: flex;\r\n    align-items: center;\r\n    svg{\r\n        fill: var(--dnn-color-primary);\r\n    }\r\n}","import { Component, Host, h, Prop } from '@stencil/core';\r\nimport { Item } from '../../../services/ItemsClient';\r\nimport state from \"../../../store/store\";\r\n\r\n@Component({\r\n  tag: 'dnn-action-delete-items',\r\n  styleUrl: '../dnn-action.scss',\r\n  shadow: true,\r\n})\r\nexport class DnnActionDeleteItems {\r\n\r\n  @Prop() items!: Item[];\r\n\r\n  private handleClick(): void {\r\n    this.showModal();\r\n  }\r\n\r\n  private showModal(){\r\n    const modal = document.createElement(\"dnn-modal\");\r\n    modal.backdropDismiss = false;\r\n    modal.showCloseButton = false;\r\n    const editor = document.createElement(\"dnn-rm-delete-items\") as HTMLDnnRmDeleteItemsElement;\r\n    editor.items = this.items;\r\n    modal.appendChild(editor);\r\n    document.body.appendChild(modal);\r\n    modal.show();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <button onClick={() => this.handleClick()}>\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z\"/></svg>\r\n          <span>{state.localization.Delete}</span>\r\n        </button>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host{\r\n    display: inline-flex;\r\n}\r\n\r\nbutton{\r\n    cursor: pointer;\r\n    border: none;\r\n    background-color: transparent;\r\n    margin: 0;\r\n    padding: 0;\r\n    display: flex;\r\n    align-items: center;\r\n    svg{\r\n        fill: var(--dnn-color-primary);\r\n    }\r\n}","import { Component, Host, h, Prop } from '@stencil/core';\r\nimport { Item, ItemsClient } from '../../../services/ItemsClient';\r\nimport state from \"../../../store/store\";\r\n\r\n@Component({\r\n  tag: 'dnn-action-download-item',\r\n  styleUrl: '../dnn-action.scss',\r\n  shadow: true,\r\n})\r\nexport class DnnActionDownloadItem {\r\n\r\n  @Prop() item!: Item;\r\n\r\n  private itemsClient: ItemsClient;\r\n\r\n  constructor(){\r\n    this.itemsClient = new ItemsClient(state.moduleId);\r\n  }\r\n\r\n  private handleClick(): void {\r\n    this.itemsClient.download(this.item.itemId, false);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <button onClick={() => this.handleClick()}>\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path xmlns=\"http://www.w3.org/2000/svg\" d=\"M12 16 7 11 8.4 9.55 11 12.15V4H13V12.15L15.6 9.55L17 11ZM6 20Q5.175 20 4.588 19.413Q4 18.825 4 18V15H6V18Q6 18 6 18Q6 18 6 18H18Q18 18 18 18Q18 18 18 18V15H20V18Q20 18.825 19.413 19.413Q18.825 20 18 20Z\"/></svg>\r\n          <span>{state.localization.Download}</span>\r\n        </button>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host{\r\n    display: inline-flex;\r\n}\r\n\r\nbutton{\r\n    cursor: pointer;\r\n    border: none;\r\n    background-color: transparent;\r\n    margin: 0;\r\n    padding: 0;\r\n    display: flex;\r\n    align-items: center;\r\n    svg{\r\n        fill: var(--dnn-color-primary);\r\n    }\r\n}","import { Component, Host, h, Prop } from '@stencil/core';\r\nimport { Item } from '../../../services/ItemsClient';\r\nimport state from \"../../../store/store\";\r\n\r\n@Component({\r\n  tag: 'dnn-action-edit-item',\r\n  styleUrl: '../dnn-action.scss',\r\n  shadow: true,\r\n})\r\nexport class DnnActionEditItem {\r\n\r\n  @Prop() item!: Item;\r\n\r\n  private handleClick(): void {\r\n    this.showModal();\r\n  }\r\n\r\n  private showModal(){\r\n    const modal = document.createElement(\"dnn-modal\");\r\n    modal.backdropDismiss = false;\r\n    modal.showCloseButton = false;\r\n    // We also need to show a different model depending if we have a file or folder\r\n    if (this.item.isFolder){\r\n      const editor = document.createElement(\"dnn-rm-edit-folder\") as HTMLDnnRmEditFolderElement;\r\n      editor.folderId = this.item.itemId;\r\n      modal.appendChild(editor);\r\n    }\r\n    else {\r\n      const editor = document.createElement(\"dnn-rm-edit-file\") as HTMLDnnRmEditFileElement;\r\n      editor.fileId = this.item.itemId;\r\n      modal.appendChild(editor);\r\n    }\r\n    document.body.appendChild(modal);\r\n    modal.show();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <button onClick={() => this.handleClick()}>\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M14.06 9.02l.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z\"/></svg>\r\n          <span>{state.localization.Edit}</span>\r\n        </button>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host{\r\n    display: inline-flex;\r\n}\r\n\r\nbutton{\r\n    cursor: pointer;\r\n    border: none;\r\n    background-color: transparent;\r\n    margin: 0;\r\n    padding: 0;\r\n    display: flex;\r\n    align-items: center;\r\n    svg{\r\n        fill: var(--dnn-color-primary);\r\n    }\r\n}","import { Component, Host, h, Prop } from '@stencil/core';\r\nimport { Item } from '../../../services/ItemsClient';\r\nimport state from \"../../../store/store\";\r\n\r\n@Component({\r\n  tag: 'dnn-action-move-items',\r\n  styleUrl: '../dnn-action.scss',\r\n  shadow: true,\r\n})\r\nexport class DnnActionMoveItems {\r\n\r\n  @Prop() items!: Item[];\r\n\r\n  private handleClick(): void {\r\n    this.showModal();\r\n  }\r\n\r\n  private showModal(){\r\n    const modal = document.createElement(\"dnn-modal\");\r\n    modal.backdropDismiss = false;\r\n    modal.showCloseButton = false;\r\n    const editor = document.createElement(\"dnn-rm-move-items\") as HTMLDnnRmMoveItemsElement;\r\n    editor.items = this.items;\r\n    modal.appendChild(editor);\r\n    document.body.appendChild(modal);\r\n    modal.show();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <button onClick={() => this.handleClick()}>\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" enable-background=\"new 0 0 24 24\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><g><rect fill=\"none\" height=\"24\" width=\"24\"/></g><g><path d=\"M20,6h-8l-2-2H4C2.9,4,2,4.9,2,6v12c0,1.1,0.9,2,2,2h16c1.1,0,2-0.9,2-2V8C22,6.9,21.1,6,20,6z M20,18H4V6h5.17l1.41,1.41 L11.17,8H20V18z M12.16,12H8v2h4.16l-1.59,1.59L11.99,17L16,13.01L11.99,9l-1.41,1.41L12.16,12z\"/></g></svg>\r\n          <span>{state.localization.Move}</span>\r\n        </button>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host{\r\n    display: inline-flex;\r\n}\r\n\r\nbutton{\r\n    cursor: pointer;\r\n    border: none;\r\n    background-color: transparent;\r\n    margin: 0;\r\n    padding: 0;\r\n    display: flex;\r\n    align-items: center;\r\n    svg{\r\n        fill: var(--dnn-color-primary);\r\n    }\r\n}","import { Component, Host, h, Prop } from '@stencil/core';\r\nimport { Item } from '../../../services/ItemsClient';\r\nimport state from \"../../../store/store\";\r\n\r\n@Component({\r\n  tag: 'dnn-action-open-file',\r\n  styleUrl: '../dnn-action.scss',\r\n  shadow: true,\r\n})\r\nexport class DnnActionOpenFile {\r\n\r\n  @Prop() item!: Item;\r\n\r\n\r\n  private handleClick(): void {\r\n    window.open(this.item.path, \"_blank\");\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <button onClick={() => this.handleClick()}>\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 -960 960 960\" width=\"24\"><path d=\"M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h280v80H200v560h560v-280h80v280q0 33-23.5 56.5T760-120H200Zm188-212-56-56 372-372H560v-80h280v280h-80v-144L388-332Z\"/></svg>\r\n          <span>{state.localization.OpenFile}</span>\r\n        </button>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host{\r\n    display: inline-flex;\r\n}\r\n\r\nbutton{\r\n    cursor: pointer;\r\n    border: none;\r\n    background-color: transparent;\r\n    margin: 0;\r\n    padding: 0;\r\n    display: flex;\r\n    align-items: center;\r\n    svg{\r\n        fill: var(--dnn-color-primary);\r\n    }\r\n}","import { Component, Host, h, Prop } from '@stencil/core';\r\nimport { Item } from '../../../services/ItemsClient';\r\nimport state from \"../../../store/store\";\r\n\r\n@Component({\r\n  tag: 'dnn-action-unlink-items',\r\n  styleUrl: '../dnn-action.scss',\r\n  shadow: true,\r\n})\r\nexport class DnnActionUnlinkItems {\r\n\r\n  @Prop() items!: Item[];\r\n\r\n  private handleClick(): void {\r\n    this.showModal();\r\n  }\r\n\r\n  private showModal(){\r\n    const modal = document.createElement(\"dnn-modal\");\r\n    modal.backdropDismiss = false;\r\n    modal.showCloseButton = false;\r\n    const editor = document.createElement(\"dnn-rm-unlink-items\") as HTMLDnnRmUnlinkItemsElement;\r\n    editor.items = this.items;\r\n    modal.appendChild(editor);\r\n    document.body.appendChild(modal);\r\n    modal.show();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <button onClick={() => this.handleClick()}>\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M14.39 11L16 12.61V11zM17 7h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.27-.77 2.37-1.87 2.84l1.4 1.4C21.05 15.36 22 13.79 22 12c0-2.76-2.24-5-5-5zM2 4.27l3.11 3.11C3.29 8.12 2 9.91 2 12c0 2.76 2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1 0-1.59 1.21-2.9 2.76-3.07L8.73 11H8v2h2.73L13 15.27V17h1.73l4.01 4.01 1.41-1.41L3.41 2.86 2 4.27z\"/></svg>\r\n          <span>{state.localization.Unlink}</span>\r\n        </button>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host{\r\n    display: inline-flex;\r\n}\r\n\r\nbutton{\r\n    cursor: pointer;\r\n    border: none;\r\n    background-color: transparent;\r\n    margin: 0;\r\n    padding: 0;\r\n    display: flex;\r\n    align-items: center;\r\n    svg{\r\n        fill: var(--dnn-color-primary);\r\n    }\r\n}","import { Component, Host, h, Event, EventEmitter, Prop } from '@stencil/core';\r\nimport state from \"../../../store/store\";\r\n\r\n@Component({\r\n  tag: 'dnn-action-upload-file',\r\n  styleUrl: '../dnn-action.scss',\r\n  shadow: true,\r\n})\r\nexport class DnnActionUploadFile {\r\n\r\n  @Prop() parentFolderId: number;\r\n\r\n  /**\r\n  * Fires when there is a possibility that some folders have changed.\r\n  * Can be used to force parts of the UI to refresh.\r\n  */\r\n   @Event() dnnRmFoldersChanged: EventEmitter<void>;\r\n\r\n   private handleClick(): void {\r\n    this.showModal();\r\n  }\r\n\r\n  private showModal(){\r\n    const modal = document.createElement(\"dnn-modal\");\r\n    modal.backdropDismiss = true;\r\n    modal.showCloseButton = true;\r\n    const container = document.createElement(\"div\");\r\n    container.style.overflowY = \"auto\";\r\n    container.style.maxHeight = \"70vh\";\r\n    const editor = document.createElement(\"dnn-rm-upload-file\");\r\n    container.appendChild(editor);\r\n    modal.appendChild(container);\r\n    document.body.appendChild(modal);\r\n    modal.show();\r\n    modal.addEventListener('dismissed', () => {\r\n      this.dnnRmFoldersChanged.emit();\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <button onClick={() => this.handleClick()}>\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" width=\"24\"><path d=\"M6 20q-.825 0-1.412-.587Q4 18.825 4 18v-3h2v3h12v-3h2v3q0 .825-.587 1.413Q18.825 20 18 20Zm5-4V7.85l-2.6 2.6L7 9l5-5 5 5-1.4 1.45-2.6-2.6V16Z\"/></svg>\r\n          <span>{state.localization.Upload}</span>\r\n        </button>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\n  --background-color: transparent;\n  --color: #333;\n  --border-size: 1px;\n  --border-color: var(--backround-color);\n  --border-radius: var(--dnn-controls-radius, 5px);\n  --padding: var(--dnn-controls-padding, 5px);\n  display: inline-block;\n  width: auto;\n}\n\n:host(.disabled) {\n  pointer-events: none;\n}\n\n:host(.primary) {\n  --background-color: var(--dnn-color-primary, blue);\n  --color: var(--dnn-color-primary-contrast, white);\n  --focus-color: var(--background-color);\n}\n\n:host(.primary.reversed) {\n  --background-color: var(--dnn-color-primary-contrast, white);\n  --color: var(--dnn-color-primary, blue);\n  --border-color: var(--dnn-color-primary, blue);\n  --focus-color: var(--color);\n}\n\n:host(.secondary) {\n  --background-color: var(--dnn-color-secondary, green);\n  --color: var(--dnn-color-secondary-contrast, white);\n  --focus-color: var(--background-color);\n}\n\n:host(.secondary.reversed) {\n  --background-color: var(--dnn-color-secondary-contrast, white);\n  --color: var(--dnn-color-secondary, blue);\n  --border-color: var(--dnn-color-secondary, blue);\n  --focus-color: var(--color);\n}\n\n:host(.tertiary) {\n  --background-color: var(--dnn-color-tertiary, yellow);\n  --color: var(--dnn-color-tertiary-contrast, black);\n  --focus-color: var(--background-color);\n}\n\n:host(.tertiary.reversed) {\n  --background-color: var(--dnn-color-tertiary-contrast, white);\n  --color: var(--dnn-color-tertiary, blue);\n  --border-color: var(--dnn-color-tertiary, blue);\n  --focus-color: var(--color);\n}\n\n:host(.hydrated) button {\n  border: var(--border-size) solid var(--border-color);\n  border-radius: var(--border-radius);\n  padding: var(--padding) calc(var(--padding) * 2);\n  background-color: transparent;\n  background-color: var(--background-color);\n  color: var(--color);\n  outline: none;\n}\n:host(.hydrated) button:focus, :host(.hydrated) button:hover {\n  box-shadow: 0 0 2px 2px var(--focus-color);\n}\n\n:host(:disabled, [disabled]) button {\n  pointer-events: none;\n  opacity: 0.5;\n}\n\n:host(.small) button {\n  padding: calc(var(--padding) / 2) var(--padding);\n  font-size: 0.7em;\n}\n\n:host(.large) button {\n  padding: calc(var(--padding) * 1.5) calc(var(--padding) * 3);\n  font-size: 1.2em;\n}\n\nbutton {\n  height: 100%;\n  width: 100%;\n  cursor: pointer;\n}","import { Host, h } from '@stencil/core';\n/**\n * @slot Content of the button\n */\nexport class DnnButton {\n  constructor() {\n    /**\n     * Optional button style,\n     * can be either primary, secondary or tertiary and defaults to primary if not specified\n     */\n    this.type = 'primary';\n    /**\n     * Optionally reverses the button style.\n     */\n    this.reversed = false;\n    /**\n     * Optionally sets the button size, small normal or large, defaults to normal\n     */\n    this.size = 'normal';\n    /**\n     * Optionally add a confirmation dialog before firing the action.\n     */\n    this.confirm = false;\n    /**\n     * The text of the yes button for confirmation.\n     */\n    this.confirmYesText = \"Yes\";\n    /**\n     * The text of the no button for confirmation.\n     */\n    this.confirmNoText = \"No\";\n    /**\n     * The text of the confirmation message;\n     */\n    this.confirmMessage = \"Are you sure ?\";\n    /**\n     * Disables the button\n     */\n    this.disabled = false;\n    this.modalVisible = false;\n  }\n  componentDidLoad() {\n    this.modal = this.el.shadowRoot.querySelector('dnn-modal');\n  }\n  handleConfirm() {\n    this.modal.hide();\n    this.modalVisible = false;\n    this.confirmed.emit();\n  }\n  handleCancel() {\n    this.modal.hide();\n    this.modalVisible = false;\n    this.canceled.emit();\n  }\n  handleClick() {\n    if (this.confirm && !this.modalVisible) {\n      this.modal.show();\n      this.modalVisible = true;\n    }\n  }\n  getElementClasses() {\n    const classes = [];\n    classes.push(this.type);\n    if (this.reversed) {\n      classes.push('reversed');\n    }\n    if (this.size !== 'normal') {\n      classes.push(this.size);\n    }\n    return classes.join(' ');\n  }\n  render() {\n    return (h(Host, { class: this.getElementClasses(), disabled: this.disabled, style: { 'pointer-events': this.disabled ? 'none' : 'all' } }, h(\"button\", { class: \"button\", onClick: () => this.handleClick(), disabled: this.disabled }, h(\"slot\", null)), this.confirm &&\n      h(\"dnn-modal\", { showCloseButton: false, backdropDismiss: false }, h(\"p\", null, this.confirmMessage), h(\"div\", { style: {\n          display: 'flex',\n          justifyContent: 'flex-end'\n        } }, h(\"dnn-button\", { type: 'primary', style: { margin: '5px' }, onClick: () => this.handleConfirm() }, this.confirmYesText), h(\"dnn-button\", { type: 'secondary', style: { margin: '5px' }, onClick: () => this.handleCancel() }, this.confirmNoText)))));\n  }\n  static get is() { return \"dnn-button\"; }\n  static get encapsulation() { return \"shadow\"; }\n  static get originalStyleUrls() {\n    return {\n      \"$\": [\"dnn-button.scss\"]\n    };\n  }\n  static get styleUrls() {\n    return {\n      \"$\": [\"dnn-button.css\"]\n    };\n  }\n  static get properties() {\n    return {\n      \"type\": {\n        \"type\": \"string\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"'primary' | 'secondary' | 'tertiary'\",\n          \"resolved\": \"\\\"primary\\\" | \\\"secondary\\\" | \\\"tertiary\\\"\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"Optional button style,\\ncan be either primary, secondary or tertiary and defaults to primary if not specified\"\n        },\n        \"attribute\": \"type\",\n        \"reflect\": false,\n        \"defaultValue\": \"'primary'\"\n      },\n      \"reversed\": {\n        \"type\": \"boolean\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"boolean\",\n          \"resolved\": \"boolean\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"Optionally reverses the button style.\"\n        },\n        \"attribute\": \"reversed\",\n        \"reflect\": false,\n        \"defaultValue\": \"false\"\n      },\n      \"size\": {\n        \"type\": \"string\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"'small' | 'normal' | 'large'\",\n          \"resolved\": \"\\\"large\\\" | \\\"normal\\\" | \\\"small\\\"\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": true,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"Optionally sets the button size, small normal or large, defaults to normal\"\n        },\n        \"attribute\": \"size\",\n        \"reflect\": false,\n        \"defaultValue\": \"'normal'\"\n      },\n      \"confirm\": {\n        \"type\": \"boolean\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"boolean\",\n          \"resolved\": \"boolean\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": true,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"Optionally add a confirmation dialog before firing the action.\"\n        },\n        \"attribute\": \"confirm\",\n        \"reflect\": false,\n        \"defaultValue\": \"false\"\n      },\n      \"confirmYesText\": {\n        \"type\": \"string\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"string\",\n          \"resolved\": \"string\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": true,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"The text of the yes button for confirmation.\"\n        },\n        \"attribute\": \"confirm-yes-text\",\n        \"reflect\": false,\n        \"defaultValue\": \"\\\"Yes\\\"\"\n      },\n      \"confirmNoText\": {\n        \"type\": \"string\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"string\",\n          \"resolved\": \"string\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": true,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"The text of the no button for confirmation.\"\n        },\n        \"attribute\": \"confirm-no-text\",\n        \"reflect\": false,\n        \"defaultValue\": \"\\\"No\\\"\"\n      },\n      \"confirmMessage\": {\n        \"type\": \"string\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"string\",\n          \"resolved\": \"string\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": true,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"The text of the confirmation message;\"\n        },\n        \"attribute\": \"confirm-message\",\n        \"reflect\": false,\n        \"defaultValue\": \"\\\"Are you sure ?\\\"\"\n      },\n      \"disabled\": {\n        \"type\": \"boolean\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"boolean\",\n          \"resolved\": \"boolean\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"Disables the button\"\n        },\n        \"attribute\": \"disabled\",\n        \"reflect\": false,\n        \"defaultValue\": \"false\"\n      }\n    };\n  }\n  static get states() {\n    return {\n      \"modalVisible\": {}\n    };\n  }\n  static get events() {\n    return [{\n        \"method\": \"confirmed\",\n        \"name\": \"confirmed\",\n        \"bubbles\": true,\n        \"cancelable\": true,\n        \"composed\": true,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"Fires when confirm is true and the user confirms the action.\"\n        },\n        \"complexType\": {\n          \"original\": \"any\",\n          \"resolved\": \"any\",\n          \"references\": {}\n        }\n      }, {\n        \"method\": \"canceled\",\n        \"name\": \"canceled\",\n        \"bubbles\": true,\n        \"cancelable\": true,\n        \"composed\": true,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"Fires when confirm is true and the user cancels the action.\"\n        },\n        \"complexType\": {\n          \"original\": \"any\",\n          \"resolved\": \"any\",\n          \"references\": {}\n        }\n      }];\n  }\n  static get elementRef() { return \"el\"; }\n}\n//# sourceMappingURL=dnn-button.js.map\n",":host {\n  /**\n  * @prop --focus-color: The color to outline the checkbox when hovered or focused, default to the dnn primary color.\n  */\n  --focus-color: var(--dnn-color-primary, #3792ED);\n  display: inline-flex;\n  align-items: center;\n  gap: 0.25rem;\n  margin: 3px;\n}\n\nbutton {\n  background-color: transparent;\n  border: 0;\n  padding: 0;\n  margin: 0;\n  outline: none;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\nbutton .unchecked, button .checked, button .intermediate {\n  display: none;\n}\nbutton.checked .checked, button.unchecked .unchecked, button.intermediate .intermediate {\n  display: block;\n}\nbutton svg.undefined {\n  opacity: 0.45;\n}\nbutton:focus {\n  box-shadow: 0 0 2px 2px var(--focus-color);\n}","import { Host, h } from '@stencil/core';\n/**\n * @slot - The label for the checkbox.\n * @slot checkedicon - Allows overriding the default checked icon.\n * @slot uncheckedicon - Allows overriding the unchecked icon.\n * @slot intermediateicon - If intermadiate state is used, allows overriding its icon.\n */\nexport class DnnCheckbox {\n  constructor() {\n    /** Defines if the checkbox is checked (true) or unchecked (false) or in an intermediate state (undefined) */\n    this.checked = \"unchecked\";\n    /** Defines if clicking the checkbox will go through the intermediate state between checked and unchecked (tri-state) */\n    this.useIntermediate = false;\n  }\n  changeState() {\n    if (!this.useIntermediate) {\n      switch (this.checked) {\n        case \"checked\":\n          this.checked = \"unchecked\";\n          break;\n        case \"unchecked\":\n        case \"intermediate\":\n          this.checked = \"checked\";\n          break;\n        default:\n          break;\n      }\n      this.checkedchange.emit(this.checked);\n      return;\n    }\n    switch (this.checked) {\n      case \"checked\":\n        this.checked = \"intermediate\";\n        break;\n      case \"intermediate\":\n        this.checked = \"unchecked\";\n        break;\n      case \"unchecked\":\n        this.checked = \"checked\";\n        break;\n      default:\n        break;\n    }\n    this.checkedchange.emit(this.checked);\n  }\n  render() {\n    return (h(Host, null, h(\"button\", { class: `icon ${this.checked}`, onClick: () => this.changeState() }, h(\"div\", { class: \"unchecked\" }, h(\"slot\", { name: \"uncheckedicon\" }, h(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", height: \"24px\", viewBox: \"0 0 24 24\", width: \"24px\", fill: \"#000000\" }, h(\"path\", { d: \"M0 0h24v24H0z\", fill: \"none\" }), h(\"path\", { d: \"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\" })))), h(\"div\", { class: \"checked\" }, h(\"slot\", { name: \"checkedicon\" }, h(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", height: \"24px\", viewBox: \"0 0 24 24\", width: \"24px\", fill: \"#000000\" }, h(\"path\", { d: \"M0 0h24v24H0z\", fill: \"none\" }), h(\"path\", { d: \"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\" })))), h(\"div\", { class: \"intermediate\" }, h(\"slot\", { name: \"intermediateicon\" }, h(\"svg\", { class: \"undefined\", xmlns: \"http://www.w3.org/2000/svg\", \"enable-background\": \"new 0 0 24 24\", height: \"24px\", viewBox: \"0 0 24 24\", width: \"24px\", fill: \"#000000\" }, h(\"g\", null, h(\"rect\", { fill: \"none\", height: \"24\", width: \"24\" })), h(\"g\", null, h(\"g\", null, h(\"g\", null, h(\"path\", { d: \"M19,3H5C3.9,3,3,3.9,3,5v14c0,1.1,0.9,2,2,2h14c1.1,0,2-0.9,2-2V5C21,3.9,20.1,3,19,3z M17,13H7v-2h10V13z\" })))))))), h(\"label\", { htmlFor: this.el.id, onClick: () => this.changeState() }, h(\"slot\", null))));\n  }\n  static get is() { return \"dnn-checkbox\"; }\n  static get encapsulation() { return \"shadow\"; }\n  static get originalStyleUrls() {\n    return {\n      \"$\": [\"dnn-checkbox.scss\"]\n    };\n  }\n  static get styleUrls() {\n    return {\n      \"$\": [\"dnn-checkbox.css\"]\n    };\n  }\n  static get properties() {\n    return {\n      \"checked\": {\n        \"type\": \"string\",\n        \"mutable\": true,\n        \"complexType\": {\n          \"original\": \"\\\"checked\\\" | \\\"unchecked\\\" | \\\"intermediate\\\"\",\n          \"resolved\": \"\\\"checked\\\" | \\\"intermediate\\\" | \\\"unchecked\\\"\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"Defines if the checkbox is checked (true) or unchecked (false) or in an intermediate state (undefined)\"\n        },\n        \"attribute\": \"checked\",\n        \"reflect\": false,\n        \"defaultValue\": \"\\\"unchecked\\\"\"\n      },\n      \"useIntermediate\": {\n        \"type\": \"boolean\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"boolean\",\n          \"resolved\": \"boolean\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"Defines if clicking the checkbox will go through the intermediate state between checked and unchecked (tri-state)\"\n        },\n        \"attribute\": \"use-intermediate\",\n        \"reflect\": false,\n        \"defaultValue\": \"false\"\n      },\n      \"value\": {\n        \"type\": \"string\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"string\",\n          \"resolved\": \"string\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"The value for this checkbox (not to be confused with its checked state).\"\n        },\n        \"attribute\": \"value\",\n        \"reflect\": false\n      }\n    };\n  }\n  static get events() {\n    return [{\n        \"method\": \"checkedchange\",\n        \"name\": \"checkedchange\",\n        \"bubbles\": true,\n        \"cancelable\": true,\n        \"composed\": true,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"Fires up when the checkbox checked property changes.\"\n        },\n        \"complexType\": {\n          \"original\": \"\\\"checked\\\" | \\\"unchecked\\\" | \\\"intermediate\\\"\",\n          \"resolved\": \"\\\"checked\\\" | \\\"intermediate\\\" | \\\"unchecked\\\"\",\n          \"references\": {}\n        }\n      }];\n  }\n  static get elementRef() { return \"el\"; }\n}\n//# sourceMappingURL=dnn-checkbox.js.map\n",":host {\n  display: block;\n}\n\n#container {\n  max-height: 0;\n  overflow: hidden;\n  transition: max-height 300ms ease-in-out;\n}","import { Host, h } from '@stencil/core';\nexport class DnnCollapsible {\n  constructor() {\n    /** Defines if the panel is expanded or not. */\n    this.expanded = false;\n    /** Defines the transition time in ms, defaults to 150ms */\n    this.transitionDuration = 150;\n  }\n  handleHeightChanged() {\n    requestAnimationFrame(() => {\n      this.updateSize();\n    });\n  }\n  /**\n   * Updates the component height, use to update after a slot content changes.\n   */\n  async updateSize() {\n    if (this.expanded) {\n      requestAnimationFrame(() => {\n        this.container.style.maxHeight = `${this.container.scrollHeight}px`;\n      });\n      setTimeout(() => {\n        this.container.style.maxHeight = \"none\";\n      }, this.transitionDuration);\n    }\n  }\n  handledExpandedChanged(expanded) {\n    if (expanded) {\n      this.updateSize();\n    }\n    else {\n      requestAnimationFrame(() => {\n        this.container.style.maxHeight = `${this.container.scrollHeight}px`;\n        requestAnimationFrame(() => {\n          this.container.style.maxHeight = \"0px\";\n        });\n      });\n    }\n    setTimeout(() => {\n      requestAnimationFrame(() => {\n        this.dnnCollapsibleHeightChanged.emit();\n      });\n    }, this.transitionDuration);\n  }\n  componentDidLoad() {\n    this.container.style.transition = `max-height ${this.transitionDuration}ms ease-in-out`;\n  }\n  render() {\n    return (h(Host, null, h(\"div\", { id: \"container\", class: this.expanded && \"expanded\", ref: el => this.container = el, style: { transition: `max-height ${this.transitionDuration}ms ease-in-out` } }, h(\"slot\", null))));\n  }\n  static get is() { return \"dnn-collapsible\"; }\n  static get encapsulation() { return \"shadow\"; }\n  static get originalStyleUrls() {\n    return {\n      \"$\": [\"dnn-collapsible.scss\"]\n    };\n  }\n  static get styleUrls() {\n    return {\n      \"$\": [\"dnn-collapsible.css\"]\n    };\n  }\n  static get properties() {\n    return {\n      \"expanded\": {\n        \"type\": \"boolean\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"boolean\",\n          \"resolved\": \"boolean\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"Defines if the panel is expanded or not.\"\n        },\n        \"attribute\": \"expanded\",\n        \"reflect\": true,\n        \"defaultValue\": \"false\"\n      },\n      \"transitionDuration\": {\n        \"type\": \"number\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"number\",\n          \"resolved\": \"number\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": true,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"Defines the transition time in ms, defaults to 150ms\"\n        },\n        \"attribute\": \"transition-duration\",\n        \"reflect\": false,\n        \"defaultValue\": \"150\"\n      }\n    };\n  }\n  static get events() {\n    return [{\n        \"method\": \"dnnCollapsibleHeightChanged\",\n        \"name\": \"dnnCollapsibleHeightChanged\",\n        \"bubbles\": true,\n        \"cancelable\": true,\n        \"composed\": true,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"Fires whenever the collapsible height has changed\"\n        },\n        \"complexType\": {\n          \"original\": \"void\",\n          \"resolved\": \"void\",\n          \"references\": {}\n        }\n      }];\n  }\n  static get methods() {\n    return {\n      \"updateSize\": {\n        \"complexType\": {\n          \"signature\": \"() => Promise<void>\",\n          \"parameters\": [],\n          \"references\": {\n            \"Promise\": {\n              \"location\": \"global\"\n            }\n          },\n          \"return\": \"Promise<void>\"\n        },\n        \"docs\": {\n          \"text\": \"Updates the component height, use to update after a slot content changes.\",\n          \"tags\": []\n        }\n      }\n    };\n  }\n  static get elementRef() { return \"el\"; }\n  static get watchers() {\n    return [{\n        \"propName\": \"expanded\",\n        \"methodName\": \"handledExpandedChanged\"\n      }];\n  }\n  static get listeners() {\n    return [{\n        \"name\": \"dnnCollapsibleHeightChanged\",\n        \"method\": \"handleHeightChanged\",\n        \"target\": undefined,\n        \"capture\": false,\n        \"passive\": false\n      }];\n  }\n}\n//# sourceMappingURL=dnn-collapsible.js.map\n",":host {\n  /** \n  * @prop --border-color: The color of the border.\n  * @prop --border-radius: The radius of the controls borders.\n  * @prop --drop-background-color: The color of the background when a file is dropping.\n  */\n  --border-color: var(--dnn-color-tertiary-contrast, lightgray);\n  --border-radius: var(--dnn-controls-radius, 5px);\n  --drop-background-color: var(--dnn-color-tertiary, lightblue);\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  text-align: center;\n  border: 2px dashed var(--border-color);\n  border-radius: var(--border-radius);\n  padding: 1rem;\n  transition: all 300ms ease-in-out;\n}\n\n:host(.dropping) {\n  background-color: var(--drop-background-color);\n}\n\np {\n  margin: 0;\n  padding: 0;\n}\n\nbutton {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border: 0px;\n  margin: 0;\n  padding: 0;\n  background-color: transparent;\n}\nbutton:hover {\n  cursor: pointer;\n}\nbutton svg {\n  margin-right: 0.5rem;\n}\n\nlabel.upload-file {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n}\nlabel.upload-file input {\n  display: none;\n}\n\n.video-preview {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n.video-preview button {\n  margin: 1rem;\n}","import { Host, h } from '@stencil/core';\nexport class DnnDropzone {\n  constructor() {\n    /** Localization strings */\n    this.resx = {\n      dragAndDropFile: \"Drag and drop a file\",\n      capture: \"Capture\",\n      or: \"or\",\n      takePicture: \"Take a picture\",\n      uploadFile: \"Upload a file\",\n    };\n    /**\n     * If true, will allow the user to take a snapshot\n     * using the device camera. (only works over https).\n     */\n    this.allowCameraMode = false;\n    /**\n     * Specifies the jpeg quality for when the device\n     * camera is used to generate a picture.\n     * Needs to be a number between 0 and 1 and defaults to 0.8\n     */\n    this.captureQuality = 0.8;\n    this.canTakeSnapshots = false;\n    this.takingPicture = false;\n    this.handleDragOver = (event) => {\n      event.stopPropagation();\n      event.preventDefault();\n      event.dataTransfer.dropEffect = \"copy\";\n      this.dropzone.classList.add(\"dropping\");\n    };\n    this.handleDrop = (dropEvent) => {\n      dropEvent.stopPropagation();\n      dropEvent.preventDefault();\n      const files = dropEvent.dataTransfer.files;\n      if (this.hasInvalidExtensions(files)) {\n        return;\n      }\n      var fileList = this.getFilesFromFileList(files);\n      this.filesSelected.emit(fileList);\n    };\n  }\n  componentDidLoad() {\n    if (this.allowCameraMode) {\n      this.checkIfBrowserCanTakeSnapshots()\n        .then(result => this.canTakeSnapshots = result);\n    }\n    if (this.allowedExtensions != undefined && this.allowedExtensions.length > 0) {\n      var extensionsWithDots = this.allowedExtensions.map(e => `.${e}`);\n      var extensionsList = extensionsWithDots.join(\",\");\n      this.fileInput.accept = extensionsList;\n    }\n  }\n  checkIfBrowserCanTakeSnapshots() {\n    return new Promise((resolve) => {\n      const mediaDevices = navigator.mediaDevices;\n      if (mediaDevices == undefined || mediaDevices.enumerateDevices == undefined) {\n        resolve(false);\n      }\n      mediaDevices.enumerateDevices()\n        .then(devices => {\n        var result = devices.some(device => device.kind == \"videoinput\");\n        resolve(result);\n      });\n    });\n  }\n  getFilesFromFileList(files) {\n    var fileList = [];\n    for (let index = 0; index < files.length; index++) {\n      const file = files[index];\n      fileList.push(file);\n    }\n    return fileList;\n  }\n  handleUploadButton(element) {\n    let files = this.getFilesFromFileList(element.files);\n    this.filesSelected.emit(files);\n  }\n  hasInvalidExtensions(files) {\n    var hasInvalid = false;\n    for (let fileIndex = 0; fileIndex < files.length; fileIndex++) {\n      const file = files[fileIndex];\n      var regex = /(?:\\.([^.]+))?$/;\n      const fileExtension = regex.exec(file.name)[1];\n      if (fileExtension == undefined) {\n        hasInvalid = true;\n      }\n      if (this.allowedExtensions != undefined && !this.allowedExtensions.includes(fileExtension)) {\n        hasInvalid = true;\n      }\n      return hasInvalid;\n    }\n  }\n  takeSnapshot() {\n    this.takingPicture = true;\n    navigator.mediaDevices.getUserMedia({ video: true, audio: false })\n      .then(stream => {\n      stream;\n      this.videoPreview.srcObject = stream;\n      this.videoPreview.play()\n        .then(() => {\n        this.videoSettings = stream.getVideoTracks()[0].getSettings();\n      });\n    })\n      .catch(error => alert(error));\n  }\n  applySnapshot() {\n    var canvas = document.createElement(\"canvas\");\n    const context = canvas.getContext(\"2d\");\n    canvas.width = this.videoSettings.width;\n    canvas.height = this.videoSettings.height;\n    context.drawImage(this.videoPreview, 0, 0);\n    canvas.toBlob(blob => {\n      var file = new File([blob], \"image.jpeg\", { type: \"image/jpeg\" });\n      this.takingPicture = false;\n      var fileList = [file];\n      this.filesSelected.emit(fileList);\n    }, \"image/jpeg\", this.captureQuality);\n  }\n  render() {\n    var _a, _b, _c, _d, _e, _f;\n    return (h(Host, { ref: e => this.dropzone = e, class: \"dropzone\", onDragOver: this.handleDragOver, onDrop: this.handleDrop, onDragLeave: () => this.dropzone.classList.remove(\"dropping\") }, !this.takingPicture &&\n      [\n        h(\"p\", null, (_a = this.resx) === null || _a === void 0 ? void 0 : _a.dragAndDropFile),\n        h(\"p\", null, \"- \", (_b = this.resx) === null || _b === void 0 ? void 0 :\n          _b.or, \" -\"),\n        h(\"label\", { class: \"upload-file\" }, h(\"input\", { type: \"file\", ref: el => this.fileInput = el, onChange: e => this.handleUploadButton(e.target) }), h(\"span\", null, h(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", \"enable-background\": \"new 0 0 24 24\", height: \"24px\", viewBox: \"0 0 24 24\", width: \"24px\", fill: \"#000000\" }, h(\"g\", null, h(\"rect\", { fill: \"none\", height: \"24\", width: \"24\" })), h(\"g\", null, h(\"path\", { d: \"M5,20h14v-2H5V20z M5,10h4v6h6v-6h4l-7-7L5,10z\" })))), \"\\u00A0\", (_c = this.resx) === null || _c === void 0 ? void 0 :\n          _c.uploadFile),\n        this.canTakeSnapshots &&\n          [\n            h(\"p\", null, \"- \", (_d = this.resx) === null || _d === void 0 ? void 0 :\n              _d.or, \" -\"),\n            h(\"button\", { onClick: () => this.takeSnapshot() }, h(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", height: \"24px\", viewBox: \"0 0 24 24\", width: \"24px\", fill: \"#000000\" }, h(\"path\", { d: \"M0 0h24v24H0z\", fill: \"none\" }), h(\"circle\", { cx: \"12\", cy: \"12\", r: \"3.2\" }), h(\"path\", { d: \"M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z\" })), (_e = this.resx) === null || _e === void 0 ? void 0 :\n              _e.takePicture)\n          ]\n      ], this.takingPicture &&\n      h(\"div\", { class: \"video-preview\" }, h(\"video\", { ref: e => this.videoPreview = e }), h(\"button\", { onClick: () => this.applySnapshot() }, h(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", height: \"24px\", viewBox: \"0 0 24 24\", width: \"24px\", fill: \"#000000\" }, h(\"path\", { d: \"M0 0h24v24H0z\", fill: \"none\" }), h(\"circle\", { cx: \"12\", cy: \"12\", r: \"3.2\" }), h(\"path\", { d: \"M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z\" })), \"\\u00A0\", (_f = this.resx) === null || _f === void 0 ? void 0 :\n        _f.capture))));\n  }\n  static get is() { return \"dnn-dropzone\"; }\n  static get encapsulation() { return \"shadow\"; }\n  static get originalStyleUrls() {\n    return {\n      \"$\": [\"dnn-dropzone.scss\"]\n    };\n  }\n  static get styleUrls() {\n    return {\n      \"$\": [\"dnn-dropzone.css\"]\n    };\n  }\n  static get properties() {\n    return {\n      \"resx\": {\n        \"type\": \"unknown\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"{\\n    dragAndDropFile: string;\\n    capture: string;\\n    or: string;\\n    takePicture: string;\\n    uploadFile: string;\\n  }\",\n          \"resolved\": \"{ dragAndDropFile: string; capture: string; or: string; takePicture: string; uploadFile: string; }\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"Localization strings\"\n        },\n        \"defaultValue\": \"{\\n    dragAndDropFile: \\\"Drag and drop a file\\\",\\n    capture: \\\"Capture\\\",\\n    or: \\\"or\\\",\\n    takePicture: \\\"Take a picture\\\",\\n    uploadFile: \\\"Upload a file\\\",\\n  }\"\n      },\n      \"allowedExtensions\": {\n        \"type\": \"unknown\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"string[]\",\n          \"resolved\": \"string[]\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"A list of allowed file extensions.\\nIf not specified, any file is allowed.\\nEx: [\\\"jpg\\\", \\\"jped\\\", \\\"gif\\\", \\\"png\\\"]\"\n        }\n      },\n      \"allowCameraMode\": {\n        \"type\": \"boolean\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"boolean\",\n          \"resolved\": \"boolean\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"If true, will allow the user to take a snapshot\\nusing the device camera. (only works over https).\"\n        },\n        \"attribute\": \"allow-camera-mode\",\n        \"reflect\": false,\n        \"defaultValue\": \"false\"\n      },\n      \"captureQuality\": {\n        \"type\": \"number\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"number\",\n          \"resolved\": \"number\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"Specifies the jpeg quality for when the device\\ncamera is used to generate a picture.\\nNeeds to be a number between 0 and 1 and defaults to 0.8\"\n        },\n        \"attribute\": \"capture-quality\",\n        \"reflect\": false,\n        \"defaultValue\": \"0.8\"\n      }\n    };\n  }\n  static get states() {\n    return {\n      \"canTakeSnapshots\": {},\n      \"takingPicture\": {}\n    };\n  }\n  static get events() {\n    return [{\n        \"method\": \"filesSelected\",\n        \"name\": \"filesSelected\",\n        \"bubbles\": true,\n        \"cancelable\": true,\n        \"composed\": true,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"Fires when file were selected.\"\n        },\n        \"complexType\": {\n          \"original\": \"File[]\",\n          \"resolved\": \"File[]\",\n          \"references\": {\n            \"File\": {\n              \"location\": \"global\"\n            }\n          }\n        }\n      }];\n  }\n}\n//# sourceMappingURL=dnn-dropzone.js.map\n",":host {\n  /**\n   * @prop --max-width: The maximum width of the module.\n  */\n  display: block;\n}\n:host .overlay {\n  background-color: rgba(0, 0, 0, 0.5);\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 1002;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  backdrop-filter: blur(2px);\n  transition: all 300ms ease-in-out;\n  visibility: hidden;\n  opacity: 0;\n}\n:host .overlay .modal {\n  max-width: var(--max-width, 1200px);\n  background-color: white;\n  padding: 30px;\n  transform: scale(2);\n  transition: all 300ms ease-in-out;\n  z-index: 2;\n  position: relative;\n  margin: 10%;\n  max-height: 80%;\n  border-radius: var(--dnn-controls-radius, 5px);\n  box-shadow: 10px 10px 20px 0 rgba(0, 0, 0, 0.5);\n  display: block;\n}\n:host .overlay .modal .content {\n  max-width: 80vw;\n  max-height: 80vh;\n  overflow: auto;\n}\n:host .overlay .modal .close {\n  position: absolute;\n  background-color: white;\n  border: 2px solid white;\n  border-radius: 50%;\n  padding: 0;\n  margin: 0;\n  top: -12px;\n  right: -12px;\n  outline: none;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n:host .overlay .modal .close:focus, :host .overlay .modal .close:hover {\n  box-shadow: 0 0 2px 2px var(--dnn-color-primary, blue);\n}\n:host .overlay .modal .close svg {\n  width: 24px;\n  height: 24px;\n  color: grey;\n}\n:host .overlay.visible {\n  visibility: visible;\n  opacity: 1;\n}\n:host .overlay.visible .modal {\n  transform: scale(1);\n  box-shadow: 4px 4px 10px 0px rgba(0, 0, 0, 0.5);\n  display: block;\n}","import { Host, h } from '@stencil/core';\nexport class DnnModal {\n  constructor() {\n    /**\n     * Pass false to remove the backdrop click auto-dismiss feature.\n     */\n    this.backdropDismiss = true;\n    /**\n     * Optionally pass the aria-label text for the close button.\n     * Defaults to \"Close modal\" if not provided.\n     */\n    this.closeText = \"Close modal\";\n    /**\n     * Optionally you can pass false to not show the close button.\n     * If you decide to do so, you should either not also prevent dismissal by clicking the backdrop\n     * or provide your own dismissal logic in the modal content.\n     */\n    this.showCloseButton = true;\n    /**\n     * Reflects the visible state of the modal.\n     */\n    this.visible = false;\n  }\n  /**\n   * Shows the modal\n   */\n  async show() {\n    this.visible = true;\n  }\n  /**\n   * Hides the modal\n   */\n  async hide() {\n    this.visible = false;\n  }\n  handleDismiss() {\n    this.visible = false;\n    this.dismissed.emit();\n  }\n  handleBackdropClick(e) {\n    const element = e.target;\n    if (element.id === \"backdrop\" && this.backdropDismiss) {\n      this.handleDismiss();\n    }\n  }\n  render() {\n    return (h(Host, null, h(\"div\", { id: \"backdrop\", class: this.visible ? 'overlay visible' : 'overlay', onClick: e => this.handleBackdropClick(e) }, h(\"div\", { class: \"modal\" }, this.showCloseButton &&\n      h(\"button\", { class: \"close\", \"aria-label\": this.closeText, onClick: () => this.handleDismiss() }, h(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", height: \"24px\", viewBox: \"0 0 24 24\", width: \"24px\", fill: \"#000000\" }, h(\"path\", { d: \"M0 0h24v24H0z\", fill: \"none\" }), h(\"path\", { d: \"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z\" }))), h(\"div\", { class: \"content\" }, h(\"slot\", null))))));\n  }\n  static get is() { return \"dnn-modal\"; }\n  static get encapsulation() { return \"shadow\"; }\n  static get originalStyleUrls() {\n    return {\n      \"$\": [\"dnn-modal.scss\"]\n    };\n  }\n  static get styleUrls() {\n    return {\n      \"$\": [\"dnn-modal.css\"]\n    };\n  }\n  static get properties() {\n    return {\n      \"backdropDismiss\": {\n        \"type\": \"boolean\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"boolean\",\n          \"resolved\": \"boolean\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"Pass false to remove the backdrop click auto-dismiss feature.\"\n        },\n        \"attribute\": \"backdrop-dismiss\",\n        \"reflect\": false,\n        \"defaultValue\": \"true\"\n      },\n      \"closeText\": {\n        \"type\": \"string\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"string\",\n          \"resolved\": \"string\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": true,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"Optionally pass the aria-label text for the close button.\\nDefaults to \\\"Close modal\\\" if not provided.\"\n        },\n        \"attribute\": \"close-text\",\n        \"reflect\": false,\n        \"defaultValue\": \"\\\"Close modal\\\"\"\n      },\n      \"showCloseButton\": {\n        \"type\": \"boolean\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"boolean\",\n          \"resolved\": \"boolean\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": true,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"Optionally you can pass false to not show the close button.\\nIf you decide to do so, you should either not also prevent dismissal by clicking the backdrop\\nor provide your own dismissal logic in the modal content.\"\n        },\n        \"attribute\": \"show-close-button\",\n        \"reflect\": false,\n        \"defaultValue\": \"true\"\n      },\n      \"visible\": {\n        \"type\": \"boolean\",\n        \"mutable\": true,\n        \"complexType\": {\n          \"original\": \"boolean\",\n          \"resolved\": \"boolean\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"Reflects the visible state of the modal.\"\n        },\n        \"attribute\": \"visible\",\n        \"reflect\": true,\n        \"defaultValue\": \"false\"\n      }\n    };\n  }\n  static get events() {\n    return [{\n        \"method\": \"dismissed\",\n        \"name\": \"dismissed\",\n        \"bubbles\": true,\n        \"cancelable\": true,\n        \"composed\": true,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"Fires when the modal is dismissed.\"\n        },\n        \"complexType\": {\n          \"original\": \"any\",\n          \"resolved\": \"any\",\n          \"references\": {}\n        }\n      }];\n  }\n  static get methods() {\n    return {\n      \"show\": {\n        \"complexType\": {\n          \"signature\": \"() => Promise<void>\",\n          \"parameters\": [],\n          \"references\": {\n            \"Promise\": {\n              \"location\": \"global\"\n            }\n          },\n          \"return\": \"Promise<void>\"\n        },\n        \"docs\": {\n          \"text\": \"Shows the modal\",\n          \"tags\": []\n        }\n      },\n      \"hide\": {\n        \"complexType\": {\n          \"signature\": \"() => Promise<void>\",\n          \"parameters\": [],\n          \"references\": {\n            \"Promise\": {\n              \"location\": \"global\"\n            }\n          },\n          \"return\": \"Promise<void>\"\n        },\n        \"docs\": {\n          \"text\": \"Hides the modal\",\n          \"tags\": []\n        }\n      }\n    };\n  }\n  static get elementRef() { return \"el\"; }\n}\n//# sourceMappingURL=dnn-modal.js.map\n",":host {\n  display: block;\n}\n\n.add-role-row {\n  display: flex;\n  gap: 1em;\n  align-items: center;\n  flex-wrap: wrap;\n}\n.add-role-row label {\n  margin-right: 0.5em;\n}\n\n.search-user {\n  display: flex;\n  gap: 1em;\n  margin-top: 1em;\n}\n.search-user .search-control {\n  position: relative;\n}\n.search-user .search-control dnn-collapsible {\n  position: absolute;\n  left: 0;\n  top: calc(100% - 2px);\n  width: 100%;\n  box-shadow: 0px 4px 4px;\n}\n.search-user .search-control dnn-collapsible .dropdown {\n  background-color: white;\n  border: 1px solid lightgray;\n  display: flex;\n  flex-direction: column;\n}\n.search-user .search-control dnn-collapsible .dropdown button {\n  background-color: transparent;\n  border: none;\n  border-bottom: 1px solid lightgray;\n  padding: 0.25em;\n  margin: 0;\n  text-align: left;\n}\n\ntable {\n  border: 1px solid lightgray;\n  border-collapse: collapse;\n  margin-top: 1em;\n}\ntable thead {\n  text-align: center;\n}\ntable thead tr {\n  border-bottom: 1px solid lightgray;\n}\ntable thead th {\n  background-color: lightgray;\n  padding: 0.25em 0.5em;\n}\ntable thead th:first-child {\n  border-right: 1px solid lightgray;\n}\ntable tbody tr {\n  border-bottom: 1px dotted lightgray;\n}\ntable tbody tr th {\n  text-align: left;\n  border-right: 1px solid lightgray;\n  padding: 0 0.5em;\n}\ntable tbody tr td {\n  text-align: center;\n}\ntable tbody tr td dnn-checkbox span {\n  display: none;\n}\ntable tbody tr td button {\n  background-color: transparent;\n  border: 0;\n  padding: 0;\n  margin: 0;\n  margin-right: 1em;\n}","import { Host, h } from '@stencil/core';\nexport class DnnPermissionsGrid {\n  constructor() {\n    /** Optionally allows localizing the component strings. */\n    this.resx = {\n      Add: \"Add\",\n      AllRoles: \"All Roles\",\n      FilterByGroup: \"Filter By Group\",\n      GlobalRoles: \"Global Roles\",\n      Role: \"Role\",\n      RolePermissions: \"Role Permissions\",\n      SelectRole: \"Select Role\",\n      User: \"User\",\n      UserPermissions: \"User Permissions\",\n    };\n    /** The list of users to show under the search users field when a search is performed. */\n    this.foundUsers = [];\n    this.selectedRoleGroupId = -1;\n  }\n  handleFoundUsersChanged(newValue) {\n    if ((newValue === null || newValue === void 0 ? void 0 : newValue.length) > 0) {\n      setTimeout(() => {\n        this.userCollapsible.expanded = true;\n      }, 100);\n    }\n  }\n  componentWillLoad() {\n    document.addEventListener(\"click\", this.dismissUserResults.bind(this));\n  }\n  disconnectedCallback() {\n    document.removeEventListener(\"click\", this.disconnectedCallback.bind(this));\n  }\n  dismissUserResults(e) {\n    const dropdownRect = this.roleDropDown.getBoundingClientRect();\n    if (e.pageX > dropdownRect.right ||\n      e.pageX < dropdownRect.left ||\n      e.pageY > dropdownRect.bottom ||\n      e.pageY < dropdownRect.top) {\n      this.userCollapsible.expanded = false;\n    }\n  }\n  handleRoleGroupChanged(dropdown) {\n    const index = dropdown.selectedIndex;\n    const value = Number.parseInt(dropdown.options[index].value);\n    this.selectedRoleGroupId = value;\n  }\n  addRole() {\n    const roleId = Number.parseInt(this.roleDropDown.options[this.roleDropDown.selectedIndex].value);\n    const role = this.roles.filter(r => r.RoleId == roleId)[0];\n    this.permissions = Object.assign(Object.assign({}, this.permissions), { rolePermissions: [\n        ...this.permissions.rolePermissions,\n        {\n          default: false,\n          locked: false,\n          permissions: [],\n          roleId: role.RoleId,\n          roleName: role.RoleName,\n        }\n      ] });\n    this.permissionsChanged.emit(this.permissions);\n  }\n  addUser() {\n    if (this.pickedUser != undefined) {\n      this.permissions = Object.assign(Object.assign({}, this.permissions), { userPermissions: [\n          ...this.permissions.userPermissions,\n          {\n            displayName: this.pickedUser.displayName,\n            permissions: [],\n            userId: this.pickedUser.userId,\n          },\n        ] });\n      this.pickedUser = undefined;\n      this.userQuery = \"\";\n      this.permissionsChanged.emit(this.permissions);\n    }\n  }\n  getRoles() {\n    const filteredRoles = this.roles.filter(role => !this.permissions.rolePermissions.some(rp => rp.roleId == role.RoleId));\n    if (this.selectedRoleGroupId == -2) {\n      // All Roles\n      return filteredRoles;\n    }\n    if (this.selectedRoleGroupId == -1) {\n      // Global Roles\n      return filteredRoles.filter(role => role.IsSystemRole);\n    }\n    return filteredRoles.filter(role => role.RoleGroupId == this.selectedRoleGroupId);\n  }\n  renderRoleCheckBox(rolePermission, permissionDefinition) {\n    const item = rolePermission.permissions.filter(permission => permission.permissionId == permissionDefinition.permissionId)[0];\n    if (rolePermission.locked) {\n      return (h(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", height: \"24px\", viewBox: \"0 0 24 24\", width: \"24px\", fill: \"#000000\" }, h(\"g\", { fill: \"none\" }, h(\"path\", { d: \"M0 0h24v24H0V0z\" }), h(\"path\", { d: \"M0 0h24v24H0V0z\", opacity: \".87\" })), h(\"path\", { d: \"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z\" })));\n    }\n    const checked = item == undefined ? \"intermediate\" : item.allowAccess ? \"checked\" : \"unchecked\";\n    return (h(\"dnn-checkbox\", { \"use-intermediate\": true, checked: checked, onCheckedchange: e => this.handleRoleChanged(e.detail, rolePermission, permissionDefinition) }, h(\"div\", { slot: \"intermediateicon\" }, h(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", height: \"24px\", viewBox: \"0 0 24 24\", width: \"24px\", fill: \"#000000\" }, h(\"path\", { d: \"M0 0h24v24H0V0z\", fill: \"none\" }), h(\"path\", { d: \"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\" }))), h(\"div\", { slot: \"uncheckedicon\" }, h(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", height: \"24px\", viewBox: \"0 0 24 24\", width: \"24px\", fill: \"#000000\" }, h(\"path\", { d: \"M0 0h24v24H0V0z\", fill: \"none\" }), h(\"path\", { d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8z\" }))), h(\"span\", null, permissionDefinition.permissionName)));\n  }\n  renderUserCheckBox(userPermission, permissionDefinition) {\n    const item = userPermission.permissions.filter(permission => permission.permissionId == permissionDefinition.permissionId)[0];\n    const checked = item == undefined ? \"intermediate\" : item.allowAccess ? \"checked\" : \"unchecked\";\n    return (h(\"dnn-checkbox\", { \"use-intermediate\": true, checked: checked, onCheckedchange: e => this.handleUserChanged(e.detail, userPermission, permissionDefinition) }, h(\"div\", { slot: \"intermediateicon\" }, h(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", height: \"24px\", viewBox: \"0 0 24 24\", width: \"24px\", fill: \"#000000\" }, h(\"path\", { d: \"M0 0h24v24H0V0z\", fill: \"none\" }), h(\"path\", { d: \"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\" }))), h(\"div\", { slot: \"uncheckedicon\" }, h(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", height: \"24px\", viewBox: \"0 0 24 24\", width: \"24px\", fill: \"#000000\" }, h(\"path\", { d: \"M0 0h24v24H0V0z\", fill: \"none\" }), h(\"path\", { d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8z\" }))), h(\"span\", null, permissionDefinition.permissionName)));\n  }\n  handleRoleChanged(checked, rolePermission, permissionDefinition) {\n    switch (checked) {\n      case \"unchecked\":\n        this.permissions = Object.assign(Object.assign({}, this.permissions), { rolePermissions: [\n            ...this.permissions.rolePermissions.map(r => {\n              if (r.roleId != rolePermission.roleId) {\n                return r;\n              }\n              const newRolePermission = Object.assign({}, r);\n              newRolePermission.permissions = [\n                ...newRolePermission.permissions.filter(p => p.permissionId != permissionDefinition.permissionId),\n                {\n                  allowAccess: false,\n                  fullControl: false,\n                  permissionCode: permissionDefinition.permissionCode,\n                  permissionId: permissionDefinition.permissionId,\n                  permissionKey: permissionDefinition.permissionKey,\n                  permissionName: permissionDefinition.permissionName,\n                  view: false,\n                },\n              ];\n              return newRolePermission;\n            }),\n          ] });\n        break;\n      case \"checked\":\n        this.permissions = Object.assign(Object.assign({}, this.permissions), { rolePermissions: [\n            ...this.permissions.rolePermissions.map(r => {\n              if (r.roleId != rolePermission.roleId) {\n                return r;\n              }\n              const newRolePermission = Object.assign({}, r);\n              newRolePermission.permissions = [\n                ...newRolePermission.permissions.filter(p => p.permissionId != permissionDefinition.permissionId),\n                {\n                  allowAccess: true,\n                  fullControl: false,\n                  permissionCode: permissionDefinition.permissionCode,\n                  permissionId: permissionDefinition.permissionId,\n                  permissionKey: permissionDefinition.permissionKey,\n                  permissionName: permissionDefinition.permissionName,\n                  view: false,\n                },\n              ];\n              return newRolePermission;\n            }),\n          ] });\n        break;\n      case \"intermediate\":\n        this.permissions = Object.assign(Object.assign({}, this.permissions), { rolePermissions: [\n            ...this.permissions.rolePermissions.map(r => {\n              if (r.roleId != rolePermission.roleId) {\n                return r;\n              }\n              const newRolePermission = Object.assign({}, r);\n              newRolePermission.permissions = [\n                ...newRolePermission.permissions.filter(p => p.permissionId != permissionDefinition.permissionId),\n              ];\n              return newRolePermission;\n            }),\n          ] });\n        break;\n      default:\n        break;\n    }\n    this.permissionsChanged.emit(this.permissions);\n  }\n  handleUserChanged(checked, userPermission, permissionDefinition) {\n    switch (checked) {\n      case \"unchecked\":\n        this.permissions = Object.assign(Object.assign({}, this.permissions), { userPermissions: [\n            ...this.permissions.userPermissions.map(u => {\n              if (u.userId != userPermission.userId) {\n                return u;\n              }\n              const newUserPermission = Object.assign({}, u);\n              newUserPermission.permissions = [\n                ...newUserPermission.permissions.filter(p => p.permissionId != permissionDefinition.permissionId),\n                {\n                  allowAccess: false,\n                  fullControl: false,\n                  permissionCode: permissionDefinition.permissionCode,\n                  permissionId: permissionDefinition.permissionId,\n                  permissionKey: permissionDefinition.permissionKey,\n                  permissionName: permissionDefinition.permissionName,\n                  view: false,\n                },\n              ];\n              return newUserPermission;\n            }),\n          ] });\n        break;\n      case \"checked\":\n        this.permissions = Object.assign(Object.assign({}, this.permissions), { userPermissions: [\n            ...this.permissions.userPermissions.map(u => {\n              if (u.userId != userPermission.userId) {\n                return u;\n              }\n              const newUserPermission = Object.assign({}, u);\n              newUserPermission.permissions = [\n                ...newUserPermission.permissions.filter(p => p.permissionId != permissionDefinition.permissionId),\n                {\n                  allowAccess: true,\n                  fullControl: false,\n                  permissionCode: permissionDefinition.permissionCode,\n                  permissionId: permissionDefinition.permissionId,\n                  permissionKey: permissionDefinition.permissionKey,\n                  permissionName: permissionDefinition.permissionName,\n                  view: false,\n                },\n              ];\n              return newUserPermission;\n            }),\n          ] });\n        break;\n      case \"intermediate\":\n        this.permissions = Object.assign(Object.assign({}, this.permissions), { userPermissions: [\n            ...this.permissions.userPermissions.map(u => {\n              if (u.userId != userPermission.userId) {\n                return u;\n              }\n              const newUserPermission = Object.assign({}, u);\n              newUserPermission.permissions = [\n                ...newUserPermission.permissions.filter(p => p.permissionId != permissionDefinition.permissionId),\n              ];\n              return newUserPermission;\n            }),\n          ] });\n        break;\n      default:\n        break;\n    }\n    this.permissionsChanged.emit(this.permissions);\n  }\n  removeRole(rolePermission) {\n    this.permissions = Object.assign(Object.assign({}, this.permissions), { rolePermissions: [\n        ...this.permissions.rolePermissions.filter(rp => rp.roleId != rolePermission.roleId),\n      ] });\n    this.permissionsChanged.emit();\n  }\n  removeUser(userPermission) {\n    this.permissions = Object.assign(Object.assign({}, this.permissions), { userPermissions: [\n        ...this.permissions.userPermissions.filter(up => up.userId != userPermission.userId),\n      ] });\n    this.permissionsChanged.emit(this.permissions);\n  }\n  handleQueryChanged(query) {\n    this.userQuery = query;\n    if (query == undefined || query.length == 0) {\n      this.userCollapsible.expanded = false;\n      this.pickedUser = undefined;\n      this.foundUsers = [];\n      return;\n    }\n    this.userSearchQueryChanged.emit(query);\n  }\n  handleSearchUserFieldKeyDown(e) {\n    if (e.key != \"ArrowDown\") {\n      return;\n    }\n    e.preventDefault();\n    const firstButton = this.userCollapsible.querySelector(\"button\");\n    if (firstButton != undefined) {\n      firstButton.focus();\n    }\n  }\n  handleSearchedUserKeyDown(e) {\n    const button = e.target;\n    switch (e.key) {\n      case \"ArrowDown\":\n        e.preventDefault();\n        const nextButton = button.nextElementSibling;\n        nextButton === null || nextButton === void 0 ? void 0 : nextButton.focus();\n        break;\n      case \"ArrowUp\":\n        e.preventDefault();\n        const previousButton = button.previousElementSibling;\n        previousButton === null || previousButton === void 0 ? void 0 : previousButton.focus();\n        break;\n      default:\n        break;\n    }\n  }\n  handleUserPicked(searchedUser) {\n    this.userQuery = searchedUser.displayName;\n    this.pickedUser = searchedUser;\n  }\n  getFilteredUsers() {\n    return this.foundUsers.filter(fu => !this.permissions.userPermissions.some(up => up.userId == fu.userId));\n  }\n  render() {\n    const filteredRoles = this.getRoles();\n    return (h(Host, null, h(\"div\", { class: \"add-role-row\" }, h(\"div\", { class: \"dropdown\" }, h(\"label\", null, this.resx.FilterByGroup, \" :\"), h(\"select\", { onChange: e => this.handleRoleGroupChanged(e.target) }, h(\"option\", { value: -2, selected: this.selectedRoleGroupId == -2 }, this.resx.AllRoles), h(\"option\", { value: -1, selected: this.selectedRoleGroupId == -1 }, this.resx.GlobalRoles), this.roleGroups.map(roleGroup => h(\"option\", { value: roleGroup.id, selected: this.selectedRoleGroupId == roleGroup.id }, roleGroup.name)))), filteredRoles && filteredRoles.length > 0 && [\n      h(\"div\", { class: \"dropdown\" }, h(\"label\", null, this.resx.SelectRole, \" :\"), h(\"select\", { ref: el => this.roleDropDown = el }, this.getRoles().map(role => h(\"option\", { value: role.RoleId }, role.RoleName)))),\n      h(\"dnn-button\", { type: \"primary\", onClick: () => this.addRole() }, this.resx.Add)\n    ]), h(\"table\", { class: \"roles-table\" }, h(\"caption\", null, this.resx.RolePermissions), h(\"thead\", null, h(\"tr\", null, h(\"th\", null, this.resx.Role), this.permissions.permissionDefinitions.map(permissionDefinition => h(\"th\", null, permissionDefinition.permissionName)), h(\"th\", null, \"\\u00A0\"))), h(\"tbody\", null, this.permissions.rolePermissions.map(rolePermission => h(\"tr\", null, h(\"th\", null, rolePermission.roleName), this.permissions.permissionDefinitions.map(permissionDefinition => h(\"td\", null, this.renderRoleCheckBox(rolePermission, permissionDefinition))), h(\"td\", null, !rolePermission.default &&\n      h(\"button\", { onClick: () => this.removeRole(rolePermission) }, h(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", height: \"24px\", viewBox: \"0 0 24 24\", width: \"24px\", fill: \"#000000\" }, h(\"path\", { d: \"M0 0h24v24H0V0z\", fill: \"none\" }), h(\"path\", { d: \"M14.59 8L12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\" })))))))), h(\"div\", { class: \"search-user\" }, h(\"div\", { class: \"search-control\" }, h(\"dnn-searchbox\", { placeholder: this.resx.User, debounced: true, onQueryChanged: e => this.handleQueryChanged(e.detail), onKeyDown: e => this.handleSearchUserFieldKeyDown(e), query: this.userQuery }), h(\"dnn-collapsible\", { ref: el => this.userCollapsible = el }, h(\"div\", { class: \"dropdown\" }, this.getFilteredUsers().map(searchedUser => h(\"button\", { onKeyDown: e => this.handleSearchedUserKeyDown(e), onClick: () => this.handleUserPicked(searchedUser) }, searchedUser.displayName))))), this.pickedUser &&\n      h(\"dnn-button\", { onClick: () => this.addUser() }, this.resx.Add)), this.permissions.userPermissions && this.permissions.userPermissions.length > 0 &&\n      h(\"table\", { class: \"users-table\" }, h(\"caption\", null, this.resx.UserPermissions), h(\"thead\", null, h(\"tr\", null, h(\"th\", null, this.resx.User), this.permissions.permissionDefinitions.map(permissionDefinition => h(\"th\", null, permissionDefinition.permissionName)), h(\"th\", null, \"\\u00A0\"))), h(\"tbody\", null, this.permissions.userPermissions.map(userPermission => h(\"tr\", null, h(\"th\", null, userPermission.displayName), this.permissions.permissionDefinitions.map(permissionDefinition => h(\"td\", null, this.renderUserCheckBox(userPermission, permissionDefinition))), h(\"td\", null, h(\"button\", { onClick: () => this.removeUser(userPermission) }, h(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", height: \"24px\", viewBox: \"0 0 24 24\", width: \"24px\", fill: \"#000000\" }, h(\"path\", { d: \"M0 0h24v24H0V0z\", fill: \"none\" }), h(\"path\", { d: \"M14.59 8L12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\" }))))))))));\n  }\n  static get is() { return \"dnn-permissions-grid\"; }\n  static get encapsulation() { return \"shadow\"; }\n  static get originalStyleUrls() {\n    return {\n      \"$\": [\"dnn-permissions-grid.scss\"]\n    };\n  }\n  static get styleUrls() {\n    return {\n      \"$\": [\"dnn-permissions-grid.css\"]\n    };\n  }\n  static get properties() {\n    return {\n      \"permissions\": {\n        \"type\": \"unknown\",\n        \"mutable\": true,\n        \"complexType\": {\n          \"original\": \"IPermissions\",\n          \"resolved\": \"IPermissions\",\n          \"references\": {\n            \"IPermissions\": {\n              \"location\": \"import\",\n              \"path\": \"./permissions-interface\"\n            }\n          }\n        },\n        \"required\": true,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"The list of permissions.\"\n        }\n      },\n      \"roleGroups\": {\n        \"type\": \"unknown\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"IRoleGroup[]\",\n          \"resolved\": \"IRoleGroup[]\",\n          \"references\": {\n            \"IRoleGroup\": {\n              \"location\": \"import\",\n              \"path\": \"./role-group-interface\"\n            }\n          }\n        },\n        \"required\": true,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"The list of role groups.\"\n        }\n      },\n      \"roles\": {\n        \"type\": \"unknown\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"IRole[]\",\n          \"resolved\": \"IRole[]\",\n          \"references\": {\n            \"IRole\": {\n              \"location\": \"import\",\n              \"path\": \"./role-interface\"\n            }\n          }\n        },\n        \"required\": true,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"The list of possible roles.\"\n        }\n      },\n      \"resx\": {\n        \"type\": \"unknown\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"ILocalization\",\n          \"resolved\": \"ILocalization\",\n          \"references\": {\n            \"ILocalization\": {\n              \"location\": \"import\",\n              \"path\": \"./localization-interface\"\n            }\n          }\n        },\n        \"required\": false,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"Optionally allows localizing the component strings.\"\n        },\n        \"defaultValue\": \"{\\n    Add: \\\"Add\\\",\\n    AllRoles: \\\"All Roles\\\",\\n    FilterByGroup: \\\"Filter By Group\\\",\\n    GlobalRoles: \\\"Global Roles\\\",\\n    Role: \\\"Role\\\",\\n    RolePermissions: \\\"Role Permissions\\\",\\n    SelectRole: \\\"Select Role\\\",\\n    User: \\\"User\\\",\\n    UserPermissions: \\\"User Permissions\\\",\\n  }\"\n      },\n      \"foundUsers\": {\n        \"type\": \"unknown\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"ISearchedUser[]\",\n          \"resolved\": \"ISearchedUser[]\",\n          \"references\": {\n            \"ISearchedUser\": {\n              \"location\": \"import\",\n              \"path\": \"./searched-user-interface\"\n            }\n          }\n        },\n        \"required\": false,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"The list of users to show under the search users field when a search is performed.\"\n        },\n        \"defaultValue\": \"[]\"\n      }\n    };\n  }\n  static get states() {\n    return {\n      \"selectedRoleGroupId\": {},\n      \"userQuery\": {},\n      \"pickedUser\": {}\n    };\n  }\n  static get events() {\n    return [{\n        \"method\": \"userSearchQueryChanged\",\n        \"name\": \"userSearchQueryChanged\",\n        \"bubbles\": true,\n        \"cancelable\": true,\n        \"composed\": true,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"Fires when searching for users to add to the permissions. Emits the search query.\"\n        },\n        \"complexType\": {\n          \"original\": \"string\",\n          \"resolved\": \"string\",\n          \"references\": {}\n        }\n      }, {\n        \"method\": \"permissionsChanged\",\n        \"name\": \"permissionsChanged\",\n        \"bubbles\": true,\n        \"cancelable\": true,\n        \"composed\": true,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"Fires when any permissions have changed, can be used for instance to have linked permissions.\"\n        },\n        \"complexType\": {\n          \"original\": \"IPermissions\",\n          \"resolved\": \"IPermissions\",\n          \"references\": {\n            \"IPermissions\": {\n              \"location\": \"import\",\n              \"path\": \"./permissions-interface\"\n            }\n          }\n        }\n      }];\n  }\n  static get watchers() {\n    return [{\n        \"propName\": \"foundUsers\",\n        \"methodName\": \"handleFoundUsersChanged\"\n      }];\n  }\n}\n//# sourceMappingURL=dnn-permissions-grid.js.map\n","import { DnnServicesFramework } from \"@dnncommunity/dnn-elements\";\r\n\r\nexport class LocalizationClient{\r\n    private sf: DnnServicesFramework;\r\n    private requestUrl: string;\r\n\r\n    /**\r\n     * Initializes the api client.\r\n     * @param moduleId The ID of the current module.\r\n     */\r\n    constructor(moduleId: number){\r\n        this.sf = new DnnServicesFramework(moduleId);\r\n        this.requestUrl = `${this.sf.getServiceRoot(\"ResourceManager\")}Localization/`\r\n    }\r\n\r\n    /** Gets the localized strings */\r\n    public getResources(){\r\n        return new Promise<LocalizedStrings>((resolve, reject) => {\r\n            const LocalizationStorageKey = \"ResourceManagerLocalization\";\r\n            const localization = sessionStorage.getItem(LocalizationStorageKey);\r\n            if (localization){\r\n                resolve(JSON.parse(localization));\r\n                return;\r\n            }\r\n\r\n            const url = `${this.requestUrl}GetResources`;\r\n            fetch(url, {\r\n                headers: this.sf.getModuleHeaders(),\r\n            })\r\n            .then(response => {\r\n                if (response.status == 200){\r\n                    response.json().then(data => {\r\n                        sessionStorage.setItem(LocalizationStorageKey, JSON.stringify(data));\r\n                        resolve(data);\r\n                    });\r\n                }\r\n                else{\r\n                    response.json().then(error => reject(error));\r\n                }\r\n            })\r\n            .catch(error => reject(error));\r\n        })\r\n    }\r\n}\r\n\r\nexport interface LocalizedStrings {\r\n    AddAsset: string;\r\n    AddFolder: string;\r\n    AssetsPanelEmpty_Subtitle: string;\r\n    AssetsPanelEmpty_Title: string;\r\n    Cancel: string;\r\n    Close: string;\r\n    Database: string;\r\n    Delete: string;\r\n    DeleteItems: string;\r\n    Edit: string;\r\n    EditFolderMappings: string;\r\n    ExtractUploads: string;\r\n    FileAlreadyExistsMessage: string;\r\n    FileId: string;\r\n    Files: string;\r\n    FileUploadedMessage: string;\r\n    FileUploadStoppedMessage: string;\r\n    FolderNamePlaceholder: string;\r\n    FolderNameRequiredMessage: string;\r\n    FolderId: string;\r\n    FolderParent: string;\r\n    Folders: string;\r\n    FolderTypeRequiredMessage: string;\r\n    General: string;\r\n    Name: string;\r\n    Overwrite: string;\r\n    Permissions: string;\r\n    Save: string;\r\n    Secure: string;\r\n    Standard: string;\r\n    Type: string;\r\n    \"UserHasNoPermissionToDeleteFolder.Error\": string;\r\n    \"UserHasNoPermissionToDownloadError\": string;\r\n    FileUploadPanelMessage: string;\r\n    AssetsPanelNoSearchResults: string;\r\n    SearchInputPlaceholder: string;\r\n    Search: string;\r\n    UrlCopiedMessage: string;\r\n    Created: string;\r\n    Description: string;\r\n    LastModified: string;\r\n    Size: string;\r\n    Title: string;\r\n    URL: string;\r\n    ItemNameRequiredMessage: string;\r\n    \"UserHasNoPermissionToReadFileProperties.Error\": string;\r\n    GenericErrorMessage: string;\r\n    Items: string;\r\n    ItemSavedMessage: string;\r\n    FolderType: string;\r\n    CreatedOnDate: string;\r\n    ItemName: string;\r\n    LastModifiedOnDate: string;\r\n    FileSizeErrorMessage: string;\r\n    \"UserHasNoPermissionToDeleteFile.Error\": string;\r\n    \"UserHasNoPermissionToManageFileProperties.Error\": string;\r\n    \"UserHasNoPermissionToManageFolder.Error\": string;\r\n    NoFolderSelected: string;\r\n    SearchFolder: string;\r\n    DisabledForAnonymousUsersMessage: string;\r\n    \"UserHasNoPermissionToAddFolders.Error\": string;\r\n    \"GroupIconCantBeDeleted.Error\": string;\r\n    InvalidExtensionMessage: string;\r\n    Refresh: string;\r\n    Sync: string;\r\n    SyncThisFolder: string;\r\n    SyncThisFolderAndSubfolders: string;\r\n    ManageFolderTypes: string;\r\n    AddFolderType: string;\r\n    FolderProvider: string;\r\n    FolderTypeDefinitions: string;\r\n    EditFolderType: string;\r\n    RemoveFolderType: string;\r\n    RemoveFolderTypeDialogBody: string;\r\n    RemoveFolderTypeDialogHeader: string;\r\n    MappedPath: string;\r\n    Move: string;\r\n    MoveItems: string;\r\n    NewLocation: string;\r\n    SortField_ItemName: string;\r\n    SortField_LastModifiedOnDate: string;\r\n    SortField_Size: string;\r\n    SortField_ParentFolder: string;\r\n    SortField_CreatedOnDate: string;\r\n    Sort: string;\r\n    Yes: string;\r\n    No: string;\r\n    ConfirmDeleteMessage: string;\r\n    ConfirmMoveMessage: string;\r\n    SelectDestinationFolder: string;\r\n    MovingItems: string;\r\n    DeletingItems: string;\r\n    UnlinkFolders: string;\r\n    ConfirmUnlinkMessage: string;\r\n    UnlinkingFolders: string;\r\n    Unlink: string;\r\n    CopyUrl: string;\r\n    StatusBarMessage: string;\r\n    OpenFile: string;\r\n    Download: string;\r\n    Upload: string;\r\n};",":host {\r\n  display: block;\r\n  width:100%;\r\n}\r\n\r\n.container{\r\n  border: 1px solid lightgray;\r\n  display:flex;\r\n  flex-direction: column;\r\n  dnn-vertical-splitview{\r\n    width: 100%;\r\n    height: calc(100vh - 25rem);\r\n    min-height: 30rem;\r\n    --left-pane-background-color: lightgray;\r\n    --right-pane-background-color: white;\r\n    .splitter{\r\n      display: flex;\r\n      align-items: center;\r\n      box-shadow: inset 8px 0 8px -8px grey;\r\n      height: 100%;\r\n      button{\r\n        margin: 0;\r\n        padding: 0;\r\n        width: 32px;\r\n        height: 32px;\r\n        border: 1px solid lightgray;\r\n        border-radius: 50%;\r\n        background-color: white;\r\n        box-shadow: 2px 2px 4px rgba(0,0,0,0.2);\r\n        position: relative;\r\n        left: -12px;\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        cursor: pointer;\r\n        svg{\r\n          transition: all 300ms ease-in-out;\r\n        }\r\n        &.expanded{\r\n          svg{\r\n            transform: rotate(180deg);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    .folder-mappings{\r\n      position: absolute;\r\n      bottom: 0;\r\n      left: 0;\r\n      border: 0;\r\n      background-color: transparent;\r\n      cursor: pointer;\r\n    }\r\n  }\r\n}\r\n","import { Component, Element, Host, h, State, Watch, Prop } from '@stencil/core';\r\nimport state from \"../../store/store\";\r\nimport { LocalizationClient } from \"../../services/LocalizationClient\";\r\nimport { sortField } from '../../enums/SortField';\r\nimport { ItemsClient } from '../../services/ItemsClient';\r\n\r\nconst localStorageSplitWidthKey = \"dnn-resource-manager-last-folders-width\";\r\n@Component({\r\n  tag: 'dnn-resource-manager',\r\n  styleUrl: 'dnn-resource-manager.scss',\r\n  shadow: true,\r\n})\r\nexport class DnnResourceManager {\r\n\r\n  /** The ID of the module. */\r\n  @Prop() moduleId!: number;\r\n  \r\n  private splitView: HTMLDnnVerticalSplitviewElement;\r\n  private localizationClient: LocalizationClient;\r\n  private folderMappingsModal: HTMLDnnModalElement;\r\n  private itemsClient: ItemsClient;\r\n  \r\n  constructor() {\r\n    state.moduleId = this.moduleId;\r\n    this.localizationClient = new LocalizationClient(this.moduleId);\r\n    this.itemsClient = new ItemsClient(this.moduleId);\r\n  }\r\n  \r\n  @Element() el: HTMLDnnResourceManagerElement;\r\n  \r\n  @State() foldersExpanded = true;\r\n  \r\n  @Watch(\"foldersExpanded\") async foldersExpandedChanged(expanded: boolean){\r\n    const lastWidth = parseFloat(localStorage.getItem(localStorageSplitWidthKey)) || 30;\r\n    if (expanded){\r\n      this.splitView.setSplitWidthPercentage(lastWidth);\r\n      return;\r\n    }\r\n    \r\n    this.splitView.setSplitWidthPercentage(0);\r\n  }\r\n  \r\n  componentWillLoad() {\r\n    const getResourcesPromise = this.localizationClient.getResources()\r\n    .then(resources =>\r\n    {\r\n      state.localization = resources;\r\n      state.sortField = sortField.itemName; \r\n    })\r\n    .catch(error => {\r\n      console.error(error);\r\n    });\r\n\r\n    const getSettingsPromise = this.itemsClient.getSettings()\r\n    .then(settings => {\r\n      state.settings = settings;\r\n    })\r\n    .catch(error => {\r\n      console.error(error);\r\n    });\r\n\r\n    const canManageFolderTypes = this.itemsClient.canManageFolderTypes()\r\n    .then(canManage => {\r\n      state.canManageFolderTypes = canManage;\r\n    })\r\n    .catch(error => {\r\n      console.error(error);\r\n    });\r\n\r\n    return Promise.all([getResourcesPromise, getSettingsPromise, canManageFolderTypes]);\r\n  }\r\n\r\n\r\n  private handleSplitWidthChanged(event: CustomEvent<number>){\r\n    if (event.detail != 0){\r\n      localStorage.setItem(localStorageSplitWidthKey, event.detail.toString());\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class=\"container\">\r\n          <dnn-rm-top-bar></dnn-rm-top-bar>\r\n          <dnn-vertical-splitview\r\n            ref={el => this.splitView = el}\r\n            onWidthChanged={this.handleSplitWidthChanged}\r\n          >\r\n            <div class=\"splitter\">\r\n              <button\r\n                class={this.foldersExpanded && \"expanded\"}\r\n                onClick={() => this.foldersExpanded = !this.foldersExpanded}\r\n              >\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6-6-6z\"/></svg>\r\n              </button>\r\n            </div>\r\n            <dnn-rm-left-pane slot=\"left\"></dnn-rm-left-pane>\r\n            {state.canManageFolderTypes &&\r\n              <button\r\n                slot=\"left\"\r\n                class=\"folder-mappings\"\r\n                title={state.localization?.EditFolderMappings}\r\n                onClick={() => this.folderMappingsModal.show()}>\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" width=\"24\"><path d=\"m9.25 22-.4-3.2q-.325-.125-.612-.3-.288-.175-.563-.375L4.7 19.375l-2.75-4.75 2.575-1.95Q4.5 12.5 4.5 12.337v-.675q0-.162.025-.337L1.95 9.375l2.75-4.75 2.975 1.25q.275-.2.575-.375.3-.175.6-.3l.4-3.2h5.5l.4 3.2q.325.125.613.3.287.175.562.375l2.975-1.25 2.75 4.75-2.575 1.95q.025.175.025.337v.675q0 .163-.05.338l2.575 1.95-2.75 4.75-2.95-1.25q-.275.2-.575.375-.3.175-.6.3l-.4 3.2Zm2.8-6.5q1.45 0 2.475-1.025Q15.55 13.45 15.55 12q0-1.45-1.025-2.475Q13.5 8.5 12.05 8.5q-1.475 0-2.488 1.025Q8.55 10.55 8.55 12q0 1.45 1.012 2.475Q10.575 15.5 12.05 15.5Zm0-2q-.625 0-1.062-.438-.438-.437-.438-1.062t.438-1.062q.437-.438 1.062-.438t1.063.438q.437.437.437 1.062t-.437 1.062q-.438.438-1.063.438ZM12 12Zm-1 8h1.975l.35-2.65q.775-.2 1.438-.588.662-.387 1.212-.937l2.475 1.025.975-1.7-2.15-1.625q.125-.35.175-.738.05-.387.05-.787t-.05-.788q-.05-.387-.175-.737l2.15-1.625-.975-1.7-2.475 1.05q-.55-.575-1.212-.963-.663-.387-1.438-.587L13 4h-1.975l-.35 2.65q-.775.2-1.437.587-.663.388-1.213.938L5.55 7.15l-.975 1.7 2.15 1.6q-.125.375-.175.75-.05.375-.05.8 0 .4.05.775t.175.75l-2.15 1.625.975 1.7 2.475-1.05q.55.575 1.213.962.662.388 1.437.588Z\"/></svg>\r\n              </button>\r\n            }\r\n            <dnn-rm-right-pane slot=\"right\"></dnn-rm-right-pane>\r\n          </dnn-vertical-splitview>\r\n          {state.canManageFolderTypes &&\r\n            <dnn-modal ref={el => this.folderMappingsModal = el}>\r\n              <dnn-rm-folder-mappings />\r\n            </dnn-modal>\r\n          }\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","import { DnnServicesFramework } from \"@dnncommunity/dnn-elements\";\r\n\r\nexport class InternalServicesClient{\r\n    private sf: DnnServicesFramework;\r\n    private requestUrl: string;\r\n\r\n    /**\r\n     * Initializes the api client.\r\n     * @param moduleId The ID of the current module.\r\n     */\r\n    constructor(moduleId: number) {\r\n        this.sf = new DnnServicesFramework(moduleId);\r\n        this.requestUrl = `${this.sf.getServiceRoot(\"InternalServices\")}ItemListService/`\r\n    }\r\n\r\n    public getFolders(parentFolderId: number){\r\n        return new Promise<GetFoldersResponse>((resolve, reject) => {\r\n            const url = `${this.requestUrl}GetFolders?parentFolderId=${parentFolderId}`;\r\n            fetch(url, {\r\n                headers: this.sf.getModuleHeaders(),\r\n            })\r\n            .then(response => {\r\n                if (response.status == 200){\r\n                    response.json().then(data => resolve(data));\r\n                }\r\n                else{\r\n                    response.json().then(error => reject(error));\r\n                }\r\n            })\r\n            .catch(error => reject(error));\r\n        });\r\n    }\r\n\r\n    public getFolderDescendants(\r\n        parentId?: string,\r\n        sortOrder = 0,\r\n        searchText = \"\",\r\n        permission = \"\",\r\n        portalId = -1)\r\n    {\r\n        return new Promise<GetFolderDescendantsResponse>((resolve, reject) => {\r\n            let url = `${this.requestUrl}GetFolderDescendants?parentId=${parentId}&sortOrder=${sortOrder}&searchText=${searchText}&permission=${permission}`;\r\n            if (portalId > -1){\r\n                url += \"&portalId=${portalId}\";\r\n            }\r\n\r\n            fetch(url, {\r\n                headers: this.sf.getModuleHeaders(),\r\n            })\r\n            .then(response => {\r\n                if (response.status == 200){\r\n                    response.json().then(data => resolve(data));\r\n                }\r\n                else{\r\n                    response.json().then(error => reject(error.message));\r\n                }\r\n            })\r\n            .catch(error => reject(error));\r\n        });\r\n    }\r\n}\r\n\r\n\r\nexport interface GetFoldersResponse{\r\n    IgnoreRoot: boolean;\r\n    Success: boolean;\r\n    Tree: FolderTreeItem;\r\n}\r\n\r\nexport interface FolderTreeItem{\r\n    data: FolderTreeData;\r\n    children?: FolderTreeItem[];\r\n}\r\n\r\nexport interface FolderTreeData{\r\n    hasChildren: boolean;\r\n    key: string;\r\n    selectable: boolean;\r\n    value?: string;\r\n}\r\n\r\nexport interface GetFolderDescendantsResponse{\r\n    Items: FolderTreeData[];\r\n    Success: boolean;\r\n}",":host {\r\n  display: flex;\r\n  align-items: center;\r\n  box-shadow: 0px 4px 8px -4px black;\r\n}\r\nbutton{\r\n  padding:0;\r\n  margin:0;\r\n  background-color: transparent;\r\n  display: flex;\r\n  align-items: center;\r\n  border:0;\r\n  padding:0;\r\n  margin:0;\r\n  cursor: pointer;\r\n  svg{\r\n    fill: var(--dnn-color-primary);\r\n  }\r\n}\r\n.right-controls{\r\n  display: flex;\r\n  margin: 0 1em;\r\n  gap: 1em;\r\n  .sort,.sync{\r\n    position: relative;\r\n    dnn-collapsible{\r\n      position: absolute;\r\n      top: 100%;\r\n      right: 0;\r\n      background-color: white;;\r\n      &[expanded]{\r\n        border: 1px solid lightgray;\r\n        box-shadow: 2px 2px 4px -2px;\r\n      }\r\n      .dropdown{\r\n        display: flex;\r\n        flex-direction: column;\r\n        background-color: white;;\r\n        button{\r\n          background-color:transparent;\r\n          border: none;\r\n          padding: 0.5em 1em;\r\n          margin: 0;\r\n          border-bottom: 1px solid lightgray;\r\n          white-space: nowrap;\r\n          svg{\r\n            height: 1em;\r\n            width: 1em;\r\n            margin-right: 0.5em;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\ndnn-vertical-overflow-menu{\r\n  flex-grow: 1;\r\n  margin-left:24px;\r\n}\r\ndnn-collapsible{\r\n  z-index: 1;\r\n}","import { Component, Host, h, State } from '@stencil/core';\r\nimport state from '../../store/store';\r\nimport { sortField, SortFieldInfo } from \"../../enums/SortField\";\r\nimport { InternalServicesClient } from '../../services/InternalServicesClient';\r\nimport { ItemsClient } from '../../services/ItemsClient';\r\n@Component({\r\n  tag: 'dnn-rm-actions-bar',\r\n  styleUrl: 'dnn-rm-actions-bar.scss',\r\n  shadow: true,\r\n})\r\nexport class DnnRmActionsBar {\r\n  \r\n  @State() sortDropdownExpanded: boolean = false;\r\n  @State() syncDropdownExpanded: boolean = false;\r\n\r\n  private internalServicesClient: InternalServicesClient;\r\n  private itemsClient: ItemsClient;\r\n\r\n  constructor(){\r\n    this.internalServicesClient = new InternalServicesClient(state.moduleId);\r\n    this.itemsClient = new ItemsClient(state.moduleId);\r\n  }\r\n\r\n  private changeLayout(): void {\r\n    if (state.layout == \"card\"){\r\n      state.layout = \"list\";\r\n      return;\r\n    }\r\n\r\n    state.layout = \"card\";\r\n  }\r\n\r\n  private renderSortButton(sortOption: SortFieldInfo){\r\n    return(\r\n      <button\r\n        onClick={() =>\r\n        {\r\n            state.sortField = sortOption;\r\n            state.currentItems = {...state.currentItems, items: []};\r\n            this.sortDropdownExpanded = !this.sortDropdownExpanded;\r\n        }}\r\n      >\r\n        {this.renderRadioButton(state.sortField == sortOption)}\r\n        <span>{sortOption.localizedName}</span>\r\n      </button>\r\n    );\r\n  }\r\n\r\n  private renderRadioButton(checked = false){\r\n    if (checked){\r\n      return <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"/></svg>\r\n    }\r\n    else{\r\n      return <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"/></svg>\r\n    }\r\n  }\r\n\r\n  private syncFolderContent(recursive: boolean = false): void {\r\n    this.itemsClient.syncFolderContent(\r\n      state.currentItems.folder.folderId,\r\n      0,\r\n      state.sortField,\r\n      recursive)\r\n      .then(() => {\r\n        this.getFolderContent();\r\n      })\r\n      .catch(error => console.log(error));\r\n  }\r\n\r\n\r\n  private getFolderContent() {\r\n    this.getFolders()\r\n    .then(() => {\r\n      this.itemsClient.getFolderContent(\r\n        state.currentItems.folder.folderId,\r\n        0,\r\n        state.pageSize,\r\n        state.sortField)\r\n      .then(data => state.currentItems = data)\r\n      .catch(error => console.error(error));\r\n    })\r\n    .catch(error => alert(error.Message));\r\n  }\r\n\r\n  private getFolders() {\r\n    return new Promise((resolve, reject) => {\r\n      this.internalServicesClient.getFolders(state.settings.HomeFolderId)\r\n      .then(data => {\r\n        state.rootFolders = data;\r\n        resolve(data);\r\n      })\r\n      .catch(reason => reject(reason));\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <dnn-vertical-overflow-menu>\r\n          {state.selectedItems && state.selectedItems.length == 0 && state.currentItems && state.currentItems.hasAddFoldersPermission &&\r\n              <dnn-action-create-folder />\r\n          }\r\n          {state.selectedItems && state.selectedItems.length == 0 && state.currentItems && state.currentItems.hasAddFilesPermission &&\r\n              <dnn-action-upload-file />\r\n          }\r\n          {state.selectedItems.length == 1 &&\r\n            // A single item is currently selected\r\n            state.currentItems.hasManagePermission &&\r\n            <dnn-action-edit-item item={state.selectedItems[0]}/>\r\n          }\r\n          {state.selectedItems.length > 0 &&\r\n            // One or multiple items are currently selected\r\n            state.currentItems.hasDeletePermission &&\r\n            [\r\n              <dnn-action-move-items items={state.selectedItems}/>\r\n            ,\r\n              <dnn-action-delete-items items={state.selectedItems}/>\r\n            ]\r\n          }\r\n          {state.selectedItems.length > 0 && state.selectedItems.every(i => i.isFolder && i.unlinkAllowedStatus && i.unlinkAllowedStatus != \"false\") &&\r\n            <dnn-action-unlink-items items={state.selectedItems}/>\r\n          }\r\n          {state.selectedItems.length == 1 && !state.selectedItems[0].isFolder && location.protocol == \"https:\" &&\r\n            <dnn-action-copy-url items={state.selectedItems}/>\r\n          }\r\n          {state.selectedItems.length == 1 && !state.selectedItems[0].isFolder &&\r\n            <dnn-action-open-file item={state.selectedItems[0]}/>\r\n          }\r\n          {state.selectedItems.length == 1 && !state.selectedItems[0].isFolder &&\r\n            <dnn-action-download-item item={state.selectedItems[0]}/>\r\n          }\r\n        </dnn-vertical-overflow-menu>\r\n        <div class=\"right-controls\">\r\n          {state.selectedItems.length > 0 &&\r\n            <button onClick={() => state.selectedItems = []}>\r\n              <span>\r\n              {state.selectedItems.length} {state.localization.Items}\r\n              </span>\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/></svg>\r\n            </button>\r\n          }\r\n          <div class=\"sort\">\r\n            <button\r\n              onClick={() => \r\n                {\r\n                  this.syncDropdownExpanded = false;\r\n                  this.sortDropdownExpanded = !this.sortDropdownExpanded;\r\n                }\r\n              }\r\n            >\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M3 18h6v-2H3v2zM3 6v2h18V6H3zm0 7h12v-2H3v2z\"/></svg>\r\n              <span>{state.localization.Sort}</span>\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M7 10l5 5 5-5z\"/></svg>\r\n            </button>\r\n            <dnn-collapsible expanded={this.sortDropdownExpanded}>\r\n              <div class=\"dropdown\">\r\n                {this.renderSortButton(sortField.itemName)}\r\n                {this.renderSortButton(sortField.createdOnDate)}\r\n                {this.renderSortButton(sortField.lastModifiedOnDate)}\r\n                {this.renderSortButton(sortField.size)}\r\n              </div>\r\n            </dnn-collapsible>\r\n          </div>\r\n          <div class=\"sync\">\r\n            <button\r\n              onClick={() =>\r\n                {\r\n                  this.sortDropdownExpanded = false;\r\n                  this.syncDropdownExpanded = !this.syncDropdownExpanded;\r\n                }\r\n              }\r\n            >\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path xmlns=\"http://www.w3.org/2000/svg\" d=\"M14 4H20V6H17.25L17.65 6.35Q18.875 7.575 19.438 9.012Q20 10.45 20 11.95Q20 14.725 18.337 16.887Q16.675 19.05 14 19.75V17.65Q15.8 17 16.9 15.438Q18 13.875 18 11.95Q18 10.825 17.575 9.762Q17.15 8.7 16.25 7.8L16 7.55V10H14ZM10 20H4V18H6.75L6.35 17.65Q5.05 16.5 4.525 15.025Q4 13.55 4 12.05Q4 9.275 5.662 7.112Q7.325 4.95 10 4.25V6.35Q8.2 7 7.1 8.562Q6 10.125 6 12.05Q6 13.175 6.425 14.237Q6.85 15.3 7.75 16.2L8 16.45V14H10Z\"/></svg>\r\n              <span>{state.localization.Sync}</span>\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M7 10l5 5 5-5z\"/></svg>\r\n            </button>\r\n            <dnn-collapsible expanded={this.syncDropdownExpanded}>\r\n              <div class=\"dropdown\">\r\n                <button\r\n                  onClick={() =>\r\n                  {\r\n                    this.getFolderContent();\r\n                    this.syncDropdownExpanded = !this.syncDropdownExpanded;\r\n                  }}\r\n                >\r\n                  <span>{state.localization.Refresh}</span>\r\n                </button>\r\n                <button\r\n                  onClick={() =>\r\n                  {\r\n                    this.syncFolderContent();\r\n                    this.syncDropdownExpanded = !this.syncDropdownExpanded;\r\n                  }}\r\n                >\r\n                  <span>{state.localization.SyncThisFolder}</span>\r\n                </button>\r\n                <button\r\n                  onClick={() =>\r\n                  {\r\n                    this.syncFolderContent(true);\r\n                    this.syncDropdownExpanded = !this.syncDropdownExpanded;\r\n                  }}\r\n                >\r\n                  <span>{state.localization.SyncThisFolderAndSubfolders}</span>\r\n                </button>\r\n              </div>\r\n            </dnn-collapsible>\r\n          </div>\r\n          <button\r\n            onClick={() => this.changeLayout()}\r\n          >\r\n            {state.layout == \"card\" &&\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z\"/></svg>\r\n            }\r\n            {state.layout == \"list\" &&\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" enable-background=\"new 0 0 24 24\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><rect fill=\"none\" height=\"24\" width=\"24\"/><g><path d=\"M14.67,5v6.5H9.33V5H14.67z M15.67,11.5H21V5h-5.33V11.5z M14.67,19v-6.5H9.33V19H14.67z M15.67,12.5V19H21v-6.5H15.67z M8.33,12.5H3V19h5.33V12.5z M8.33,11.5V5H3v6.5H8.33z\"/></g></svg>\r\n            }\r\n          </button>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n\r\n.form{\r\n  label{\r\n    font-weight: bold;\r\n    margin-top: 0.5em;\r\n  }\r\n  display: grid;\r\n  grid-template-columns: 1fr;\r\n}\r\n\r\n.controls{\r\n  margin-top: 2em;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 1em;\r\n}","import { Component, Host, h, Element, State, Event, EventEmitter } from '@stencil/core';\r\nimport { CreateNewFolderRequest, FolderMappingInfo, ItemsClient } from '../../services/ItemsClient';\r\nimport state from '../../store/store';\r\n\r\n@Component({\r\n  tag: 'dnn-rm-create-folder',\r\n  styleUrl: 'dnn-rm-create-folder.scss',\r\n  shadow: true,\r\n})\r\nexport class DnnRmCreateFolder {\r\n\r\n  /**\r\n   * Fires when there is a possibility that some folders have changed.\r\n   * Can be used to force parts of the UI to refresh.\r\n   */\r\n  @Event() dnnRmFoldersChanged: EventEmitter<void>;\r\n  \r\n  @Element() el : HTMLDnnRmCreateFolderElement\r\n  \r\n  @State() folderMappings: FolderMappingInfo[];\r\n  \r\n  @State() newFolderRequest: CreateNewFolderRequest = {\r\n    FolderMappingId: -1,\r\n    FolderName: \"\",\r\n    ParentFolderId: state.currentItems.folder.folderId,\r\n  }\r\n\r\n  private readonly itemsClient: ItemsClient;\r\n  private nameField: HTMLInputElement;\r\n\r\n  constructor(){\r\n    this.itemsClient = new ItemsClient(state.moduleId);\r\n  }\r\n\r\n  componentWillLoad() {\r\n    this.itemsClient.getFolderMappings()\r\n    .then(data => {\r\n      this.folderMappings = data.sort((a, b) => a.FolderMappingID - b.FolderMappingID);\r\n      this.newFolderRequest = {\r\n        ...this.newFolderRequest,\r\n        FolderMappingId: this.folderMappings[0].FolderMappingID,\r\n        ParentFolderId: state.currentItems.folder.folderId,\r\n      };\r\n    })\r\n    .catch(reason => console.error(reason));\r\n  }\r\n\r\n  componentDidLoad() {\r\n    setTimeout(() => {\r\n      this.nameField.focus();\r\n    }, 350);\r\n  }\r\n\r\n  private handleCancel(): void {\r\n    const modal = this.el.parentElement as HTMLDnnModalElement;\r\n    modal.hide().then(() => {\r\n      setTimeout(() => {\r\n        document.body.removeChild(modal);\r\n      }, 300);\r\n    });\r\n  }\r\n\r\n  private handleTypeChanged(e: Event): void {\r\n    const select = e.target as HTMLSelectElement;\r\n    const option = select.options[select.selectedIndex] as HTMLOptionElement;\r\n    const newValue = Number.parseInt(option.value);\r\n    this.newFolderRequest = {\r\n      ...this.newFolderRequest,\r\n      FolderMappingId: newValue,\r\n    };\r\n  }\r\n\r\n  private handleSave(): void {\r\n    this.itemsClient.createNewFolder(this.newFolderRequest)\r\n    .then(() => {\r\n      this.dnnRmFoldersChanged.emit();\r\n      state.currentItems = {\r\n        ...state.currentItems,\r\n        items: [],\r\n      };\r\n      const modal = this.el.parentElement as HTMLDnnModalElement;\r\n      modal.hide().then(() => {\r\n        setTimeout(() => {\r\n          document.body.removeChild(modal);\r\n        }, 300);\r\n      });\r\n    })\r\n    .catch(error => alert(error));\r\n  }\r\n\r\n  private canChooseFolderProvider() {\r\n    return this.folderMappings &&\r\n      this.folderMappings.find(f => f.FolderMappingID == state.currentItems.folder.folderMappingId).IsDefault;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <h2>{state.localization.AddFolder}</h2>\r\n        <div class=\"form\">\r\n          {state.currentItems.folder.folderName.length > 0 &&[\r\n            <label>{state.localization.FolderParent}</label>,\r\n            <span>{state.currentItems.folder.folderName}</span>\r\n          ]}\r\n          <label>{state.localization.Name}</label>\r\n          <input\r\n            type=\"text\" required\r\n            ref={el => this.nameField = el}\r\n            value={this.newFolderRequest.FolderName}\r\n            onInput={e => this.newFolderRequest = {\r\n              ...this.newFolderRequest,\r\n              FolderName: (e.target as HTMLInputElement).value,\r\n            }}\r\n          />\r\n          {!this.newFolderRequest.FolderName &&\r\n            <span>{state.localization.FolderNameRequiredMessage}</span>\r\n          }\r\n          {this.canChooseFolderProvider() &&\r\n            [\r\n              <label>{state.localization.Type}</label>,\r\n              <select onChange={e => this.handleTypeChanged(e)}>\r\n                {this.folderMappings?.map((folderMapping, index) => \r\n                  <option\r\n                    value={folderMapping.FolderMappingID}\r\n                    selected={index == 0}>\r\n                    {folderMapping.MappingName}\r\n                  </option>\r\n                )}\r\n              </select>\r\n            ]\r\n          }\r\n          {this.canChooseFolderProvider() && this.folderMappings.find(m => m.FolderMappingID == this.newFolderRequest.FolderMappingId).IsDefault == false &&[\r\n            <label>{state.localization.MappedPath}</label>,\r\n            <input \r\n              type=\"text\"\r\n              value={this.newFolderRequest.MappedName}\r\n              onInput={e => this.newFolderRequest = {\r\n                ...this.newFolderRequest,\r\n                MappedName: (e.target as HTMLInputElement).value,\r\n              }}\r\n            />\r\n          ]}\r\n        </div>\r\n        <div class=\"controls\">\r\n          <dnn-button\r\n            type=\"primary\"\r\n            reversed\r\n            onClick={() => this.handleCancel()}\r\n          >\r\n            {state.localization.Cancel}\r\n          </dnn-button>\r\n          <dnn-button\r\n            type=\"primary\"\r\n            disabled={\r\n              this.newFolderRequest.FolderMappingId < 0 ||\r\n              this.newFolderRequest.FolderName.length < 1\r\n            }\r\n            onClick={() => this.handleSave()}\r\n          >\r\n            {state.localization.Save}\r\n          </dnn-button>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n.general{\r\n  display: flex;\r\n  .left{\r\n    max-width: 256px;\r\n    border-right: 1px solid lightgray;\r\n    padding: 1em;\r\n    img{\r\n      width: 100%;\r\n    }\r\n  }\r\n  .right{\r\n    padding: 1em;\r\n  }\r\n}\r\n\r\n.form{\r\n  display: grid;\r\n  grid-template-columns: 1fr 2fr;\r\n  align-items: flex-end;\r\n  label{\r\n    font-weight: bold;\r\n    text-align: right;\r\n    margin-right: 0.5em;\r\n    &::after{\r\n      content: ':';\r\n    }\r\n    align-self: flex-start;\r\n  }\r\n  input, textarea{\r\n    margin-top: 0.5em;\r\n  }\r\n}\r\n\r\n.controls{\r\n  margin-top: 2em;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 1em;\r\n}\r\n","import { Component, Element, Event, EventEmitter, Host, h, Prop, State } from '@stencil/core';\r\nimport { Item, ItemsClient } from '../../services/ItemsClient';\r\nimport state from '../../store/store';\r\n\r\n@Component({\r\n  tag: 'dnn-rm-delete-items',\r\n  styleUrl: 'dnn-rm-delete-items.scss',\r\n  shadow: true,\r\n})\r\nexport class DnnRmDeleteItems {\r\n\r\n  /** The list of items to delete. */\r\n  @Prop() items!: Item[];\r\n\r\n  /**\r\n  * Fires when there is a possibility that some folders have changed.\r\n  * Can be used to force parts of the UI to refresh.\r\n  */\r\n  @Event() dnnRmFoldersChanged: EventEmitter<void>;\r\n  \r\n  @Element() el: HTMLDnnRmDeleteItemsElement;\r\n  \r\n  @State() deleting: boolean;\r\n  @State() deletedCount: number = 0;\r\n  @State() currentItemName: string;\r\n  \r\n  private itemsClient: ItemsClient;\r\n\r\n  constructor() {\r\n    this.itemsClient = new ItemsClient(state.moduleId);\r\n  }\r\n\r\n  private closeModal(): void {\r\n    const modal = this.el.parentElement as HTMLDnnModalElement;\r\n    modal.hide().then(() => {\r\n      setTimeout(() => {\r\n        document.body.removeChild(modal);\r\n      }, 300);\r\n    });\r\n  }\r\n\r\n  private handleDelete(): void {\r\n    this.deleting = true;\r\n    this.items.forEach(item => {\r\n      if (item.isFolder){\r\n        this.itemsClient.deleteFolder({\r\n          FolderId: item.itemId,\r\n          UnlinkAllowedStatus: false,\r\n        })\r\n        .then(() => {\r\n          this.handleItemDeleted(item);\r\n        })\r\n        .catch(reason => alert(reason));\r\n      }\r\n      else {\r\n        this.itemsClient.deleteFile({\r\n          FileId: item.itemId,\r\n        })\r\n        .then(() => {\r\n          this.handleItemDeleted(item);\r\n        })\r\n        .catch(reason => alert(reason));\r\n      }\r\n    });\r\n  }\r\n  \r\n  handleItemDeleted(item: Item) {\r\n    this.deletedCount++;\r\n    this.currentItemName = item.itemName;\r\n    if (this.deletedCount == this.items.length) {\r\n      this.deleting = false;\r\n      this.dnnRmFoldersChanged.emit();\r\n      this.closeModal();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <h2>{state.localization?.DeleteItems}</h2>\r\n        <p>{state.localization?.ConfirmDeleteMessage}</p>\r\n        <ul>\r\n          {this.items.map(item => (\r\n            <li>{item.itemName}</li>\r\n          ))}\r\n        </ul>\r\n        {this.deleting &&\r\n          <div>\r\n            <p>{state.localization?.DeletingItems} {this.deletedCount+1}/{state.selectedItems.length} ({this.currentItemName})</p>\r\n            <dnn-rm-progress-bar\r\n              max={state.selectedItems.length}\r\n              value={this.deletedCount}\r\n            />\r\n          </div>\r\n        }\r\n        <div class=\"controls\">\r\n          <dnn-button\r\n            type=\"primary\"\r\n            reversed\r\n            disabled={this.deleting}\r\n            onClick={() => this.closeModal()}\r\n          >\r\n            {state.localization.Cancel}\r\n          </dnn-button>\r\n          <dnn-button\r\n            type=\"primary\"\r\n            onClick={() =>this.handleDelete()}\r\n            disabled={this.deleting}\r\n          >\r\n            {state.localization?.Delete}\r\n          </dnn-button>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n.general{\r\n  display: flex;\r\n  .left{\r\n    max-width: 256px;\r\n    border-right: 1px solid lightgray;\r\n    padding: 1em;\r\n    img{\r\n      width: 100%;\r\n    }\r\n  }\r\n  .right{\r\n    padding: 1em;\r\n  }\r\n}\r\n\r\n.form{\r\n  display: grid;\r\n  grid-template-columns: 1fr 2fr;\r\n  align-items: flex-end;\r\n  label{\r\n    font-weight: bold;\r\n    text-align: right;\r\n    margin-right: 0.5em;\r\n    &::after{\r\n      content: ':';\r\n    }\r\n    align-self: flex-start;\r\n  }\r\n  input, textarea{\r\n    margin-top: 0.5em;\r\n  }\r\n}\r\n\r\n.controls{\r\n  margin-top: 2em;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 1em;\r\n}\r\n","import { Component, Element, Event, EventEmitter, Host, h, Prop, State } from '@stencil/core';\r\nimport state from '../../store/store';\r\nimport { FileDetails, ItemsClient, SaveFileDetailsRequest } from '../../services/ItemsClient';\r\n\r\n@Component({\r\n  tag: 'dnn-rm-edit-file',\r\n  styleUrl: 'dnn-rm-edit-file.scss',\r\n  shadow: true,\r\n})\r\nexport class DnnRmEditFile {\r\n  \r\n  /** The ID of the folder to edit. */\r\n  @Prop() fileId!: number;\r\n\r\n  /**\r\n  * Fires when there is a possibility that some folders have changed.\r\n  * Can be used to force parts of the UI to refresh.\r\n  */\r\n  @Event() dnnRmFoldersChanged: EventEmitter<void>;\r\n\r\n  @Element() el: HTMLDnnRmEditFolderElement;\r\n  @State() fileDetails: FileDetails;\r\n\r\n  private itemsClient: ItemsClient;\r\n\r\n  constructor() {\r\n    this.itemsClient = new ItemsClient(state.moduleId);\r\n  }\r\n\r\n  componentWillLoad(){\r\n    this.itemsClient.getFileDetails(this.fileId)\r\n      .then(fileDetails => {\r\n        this.fileDetails = fileDetails;\r\n      })\r\n      .catch(reason => alert(reason));\r\n  }\r\n\r\n  private closeModal(): void {\r\n    const modal = this.el.parentElement as HTMLDnnModalElement;\r\n    modal.hide().then(() => {\r\n      setTimeout(() => {\r\n        document.body.removeChild(modal);\r\n      }, 300);\r\n    });\r\n  }\r\n\r\n  private handleSave(): void {\r\n    const request: SaveFileDetailsRequest = {\r\n      fileId: this.fileId,\r\n      fileName: this.fileDetails.fileName,\r\n      title: this.fileDetails.title,\r\n      description: this.fileDetails.description,\r\n    };\r\n    this.itemsClient.saveFileDetails(request)\r\n    .then(() => this.closeModal())\r\n    .catch(reason => alert(reason));\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <h2>{state.localization?.Edit}</h2>\r\n        <dnn-tabs>\r\n          <dnn-tab tabTitle={state.localization?.General}>\r\n            <div class=\"general\">\r\n              <div class=\"left\">\r\n                {this.fileDetails && this.fileDetails.iconUrl &&\r\n                  <img src={this.fileDetails.iconUrl} />\r\n                }\r\n                {this.fileDetails &&\r\n                  <div class=\"form\">\r\n                    <label>{state.localization?.FileId}</label>\r\n                    <span>{this.fileDetails.fileId}</span>\r\n\r\n                    <label>{state.localization?.Created}</label>\r\n                    <span>{this.fileDetails.createdBy}</span>\r\n\r\n                    <label>{state.localization?.CreatedOnDate}</label>\r\n                    <span>{this.fileDetails.createdOnDate}</span>\r\n\r\n                    <label>{state.localization?.LastModified}</label>\r\n                    <span>{this.fileDetails.lastModifiedBy}</span>\r\n\r\n                    <label>{state.localization?.LastModifiedOnDate}</label>\r\n                    <span>{this.fileDetails.lastModifiedOnDate}</span>\r\n                  </div>\r\n                }\r\n              </div>\r\n              <div class=\"right\">\r\n                <div class=\"form\">\r\n                  <label>{state.localization?.Name}</label>\r\n                  <input type=\"text\"\r\n                    value={this.fileDetails?.fileName}\r\n                    onInput={e =>\r\n                      this.fileDetails = {\r\n                        ...this.fileDetails,\r\n                        fileName: (e.target as HTMLInputElement).value,\r\n                      }\r\n                    }\r\n                  />\r\n                  \r\n                  <label>{state.localization?.Title}</label>\r\n                  <input type=\"text\"\r\n                    value={this.fileDetails?.title}\r\n                    onInput={e =>\r\n                      this.fileDetails = {\r\n                        ...this.fileDetails,\r\n                        title: (e.target as HTMLInputElement).value.substring(0, 255),\r\n                      }\r\n                    }\r\n                  />\r\n\r\n                  <label>{state.localization?.Description}</label>\r\n                  <textarea\r\n                    value={this.fileDetails?.description}\r\n                    onInput={e =>\r\n                      this.fileDetails = {\r\n                        ...this.fileDetails,\r\n                        description: (e.target as HTMLTextAreaElement).value.substring(0, 499),\r\n                      }\r\n                    }\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </dnn-tab>\r\n        </dnn-tabs>\r\n        <div class=\"controls\">\r\n          <dnn-button\r\n            type=\"primary\"\r\n            reversed\r\n            onClick={() => this.closeModal()}\r\n          >\r\n            {state.localization.Cancel}\r\n          </dnn-button>\r\n          <dnn-button\r\n            type=\"primary\"\r\n            onClick={() => this.handleSave()}\r\n          >\r\n            {state.localization.Save}\r\n          </dnn-button>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n.general{\r\n  display: flex;\r\n  .left{\r\n    max-width: 256px;\r\n    border-right: 1px solid lightgray;\r\n    padding: 1em;\r\n    img{\r\n      width: 100%;\r\n    }\r\n  }\r\n  .right{\r\n    padding: 1em;\r\n  }\r\n}\r\n\r\n.form{\r\n  display: grid;\r\n  grid-template-columns: 1fr 2fr;\r\n  align-items: flex-end;\r\n  label{\r\n    font-weight: bold;\r\n    text-align: right;\r\n    margin-right: 0.5em;\r\n    &::after{\r\n      content: ':';\r\n    }\r\n  }\r\n}\r\n\r\n.controls{\r\n  margin-top: 2em;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 1em;\r\n}\r\n","import { IRoleGroup } from '@dnncommunity/dnn-elements/dist/types/components/dnn-permissions-grid/role-group-interface';\r\nimport { IRole } from '@dnncommunity/dnn-elements/dist/types/components/dnn-permissions-grid/role-interface';\r\nimport { Component, Element, Event, EventEmitter, Host, h, State, Prop } from '@stencil/core';\r\nimport state from '../../store/store';\r\nimport { FolderDetails, ItemsClient, SaveFolderDetailsRequest } from '../../services/ItemsClient';\r\nimport { IPermissions, IRolePermission, IUserPermission } from '@dnncommunity/dnn-elements/dist/types/components/dnn-permissions-grid/permissions-interface';\r\nimport { ISearchedUser } from '@dnncommunity/dnn-elements/dist/types/components/dnn-permissions-grid/searched-user-interface';\r\n@Component({\r\n  tag: 'dnn-rm-edit-folder',\r\n  styleUrl: 'dnn-rm-edit-folder.scss',\r\n  shadow: true,\r\n})\r\nexport class DnnRmEditFolder {\r\n  \r\n  /** The ID of the folder to edit. */\r\n  @Prop() folderId!: number;\r\n\r\n  /**\r\n   * Fires when there is a possibility that some folders have changed.\r\n   * Can be used to force parts of the UI to refresh.\r\n   */\r\n   @Event() dnnRmFoldersChanged: EventEmitter<void>;\r\n\r\n  @Element() el: HTMLDnnRmEditFolderElement;\r\n\r\n  @State() roleGroups: IRoleGroup[] = [];\r\n  @State() roles: IRole[] = [];\r\n  @State() folderIconUrl: string;\r\n  @State() folderDetails: FolderDetails;\r\n  @State() foundUsers: ISearchedUser[];\r\n\r\n  private itemsClient: ItemsClient;\r\n\r\n  constructor() {\r\n    this.itemsClient = new ItemsClient(state.moduleId);\r\n  }\r\n\r\n  componentWillLoad() {\r\n    this.itemsClient.getFolderDetails(this.folderId)\r\n      .then(data => {\r\n        this.folderDetails = {\r\n          ...data,\r\n          permissions: {\r\n            ...data.permissions,\r\n            permissionDefinitions: data.permissions.permissionDefinitions.sort(a => {\r\n              switch (a.permissionName) {\r\n                case \"View Folder\":\r\n                  return -1;\r\n                case \"Browse Folder\":\r\n                  return 0;\r\n                case \"Write to Folder\":\r\n                  return 1;\r\n                default:\r\n                  break;\r\n              }\r\n            }),\r\n            rolePermissions: [\r\n              ...data.permissions.rolePermissions.map(rp => {\r\n                return {\r\n                  ...rp,\r\n                  permissions: rp.permissions.sort(a => {\r\n                    switch (a.permissionName) {\r\n                      case \"View Folder\":\r\n                        return -1;\r\n                      case \"Browse Folder\":\r\n                        return 0;\r\n                      case \"Write to Folder\":\r\n                        return 1;\r\n                    }\r\n                  }),\r\n                };\r\n              }),\r\n            ],\r\n            userPermissions: [\r\n              ...data.permissions.userPermissions.map(up => {\r\n                return {\r\n                  ...up,\r\n                  permissions: up.permissions.sort(a => {\r\n                    switch (a.permissionName) {\r\n                      case \"View Folder\":\r\n                        return -1;\r\n                      case \"Browse Folder\":\r\n                        return 0;\r\n                      case \"Write to Folder\":\r\n                        return 1;\r\n                    }\r\n                  }),\r\n                };\r\n              }),\r\n            ],\r\n          },\r\n        };\r\n      })\r\n      .catch(error => alert(error));\r\n    \r\n    this.itemsClient.getFolderIconUrl(this.folderId)\r\n      .then(data => this.folderIconUrl = data)\r\n      .catch(error => alert(error));\r\n\r\n    this.itemsClient.getRoleGroups()\r\n      .then(data => this.roleGroups = data)\r\n      .catch(error => alert(error));\r\n    \r\n    this.itemsClient.getRoles()\r\n      .then(data => this.roles = data)\r\n      .catch(error => alert(error));\r\n  }\r\n\r\n  private closeModal(): void {\r\n    const modal = this.el.parentElement as HTMLDnnModalElement;\r\n    modal.hide().then(() => {\r\n      setTimeout(() => {\r\n        document.body.removeChild(modal);\r\n      }, 300);\r\n    });\r\n  }\r\n\r\n  private handleSave(): void {\r\n    const folderDetails: SaveFolderDetailsRequest = {\r\n      folderId: this.folderId,\r\n      folderName: this.folderDetails.folderName,\r\n      permissions: this.folderDetails.permissions,\r\n    };\r\n    this.itemsClient.saveFolderDetails(folderDetails)\r\n      .then(() => {\r\n        this.dnnRmFoldersChanged.emit();\r\n        this.closeModal();\r\n      })\r\n      .catch(error => alert(error));\r\n  }\r\n\r\n  private handlePermissionsChanged(newPermissions: IPermissions): void {\r\n    newPermissions.rolePermissions.forEach(rolePermission => this.adjustRelatedPermissions(rolePermission));\r\n    newPermissions.userPermissions.forEach(userPermission => this.adjustRelatedPermissions(userPermission));\r\n    this.folderDetails = {\r\n      ...this.folderDetails,\r\n      permissions: newPermissions,\r\n    };\r\n  }\r\n  \r\n  private adjustRelatedPermissions(permission: IRolePermission | IUserPermission): void {\r\n    const permissionId =\r\n    {\r\n      view: this.folderDetails.permissions.permissionDefinitions.find(p => p.permissionName === 'View Folder').permissionId,\r\n      browse: this.folderDetails.permissions.permissionDefinitions.find(p => p.permissionName === 'Browse Folder').permissionId,\r\n      write: this.folderDetails.permissions.permissionDefinitions.find(p => p.permissionName === 'Write to Folder').permissionId,\r\n    };\r\n\r\n    const viewPermission = permission.permissions.find(p => p.permissionId == permissionId.view);\r\n    // If view permission is denied, then deny all other permissions\r\n    if (viewPermission && viewPermission.allowAccess == false){\r\n      // Deny all permissions\r\n      permission.permissions = [\r\n        {\r\n          allowAccess: false,\r\n          fullControl: false,\r\n          permissionId: permissionId.view,\r\n          permissionCode: null,\r\n          permissionKey: null,\r\n          permissionName: \"View Folder\",\r\n          view: false,\r\n        },\r\n        {\r\n          allowAccess: false,\r\n          fullControl: false,\r\n          permissionId: permissionId.browse,\r\n          permissionCode: null,\r\n          permissionKey: null,\r\n          permissionName: \"Browse Folder\",\r\n          view: false,\r\n        },\r\n        {\r\n          allowAccess: false,\r\n          fullControl: false,\r\n          permissionId: permissionId.write,\r\n          permissionCode: null,\r\n          permissionKey: null,\r\n          permissionName: \"Write to Folder\",\r\n          view: false,\r\n        },\r\n      ]\r\n    }\r\n\r\n    // If browse was denied, then deny write\r\n    const browsePermission = permission.permissions.find(p => p.permissionId == permissionId.browse);\r\n    if (browsePermission && browsePermission.allowAccess == false){\r\n      // Deny write\r\n      permission.permissions = [\r\n        ...permission.permissions.filter(p => p.permissionId != permissionId.write),\r\n        {\r\n          allowAccess: false,\r\n          fullControl: false,\r\n          permissionId: permissionId.write,\r\n          permissionCode: null,\r\n          permissionKey: null,\r\n          permissionName: \"Write to Folder\",\r\n          view: false,\r\n        }\r\n      ]\r\n    }\r\n\r\n    // If browse was allowed, then allow view\r\n    if (browsePermission && browsePermission.allowAccess == true){\r\n      // Allow browse\r\n      permission.permissions = [\r\n        {\r\n          allowAccess: true,\r\n          fullControl: false,\r\n          permissionId: permissionId.view,\r\n          permissionCode: null,\r\n          permissionKey: null,\r\n          permissionName: \"Browse Folder\",\r\n          view: false,\r\n        },\r\n        ...permission.permissions.filter(p => p.permissionId != permissionId.view),\r\n      ];\r\n    }\r\n\r\n    // If write was allowed, then allow all other permissions\r\n    const writePermission = permission.permissions.find(p => p.permissionId == permissionId.write);\r\n    if (writePermission && writePermission.allowAccess == true){\r\n      // Allow all permissions\r\n      permission.permissions = [\r\n        {\r\n          allowAccess: true,\r\n          fullControl: false,\r\n          permissionId: permissionId.view,\r\n          permissionCode: null,\r\n          permissionKey: null,\r\n          permissionName: \"View Folder\",\r\n          view: false,\r\n        },\r\n        {\r\n          allowAccess: true,\r\n          fullControl: false,\r\n          permissionId: permissionId.browse,\r\n          permissionCode: null,\r\n          permissionKey: null,\r\n          permissionName: \"Browse Folder\",\r\n          view: false,\r\n        },\r\n        {\r\n          allowAccess: true,\r\n          fullControl: false,\r\n          permissionId: permissionId.write,\r\n          permissionCode: null,\r\n          permissionKey: null,\r\n          permissionName: \"Write to Folder\",\r\n          view: false,\r\n        },\r\n      ]\r\n    }\r\n  }\r\n\r\n  private handleUserSearchQueryChanged(detail: string): void {\r\n    this.itemsClient.searchUsers(detail)\r\n      .then(data => this.foundUsers = data)\r\n      .catch(error => alert(error));\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <h2>{state.localization?.Edit}</h2>\r\n        <dnn-tabs>\r\n          <dnn-tab tabTitle={state.localization?.General}>\r\n            <div class=\"general\">\r\n              <div class=\"left\">\r\n                {this.folderIconUrl &&\r\n                  <img src={this.folderIconUrl} />\r\n                }\r\n                {this.folderDetails &&\r\n                  <div class=\"form\">\r\n                    <label>{state.localization?.FolderId}</label>\r\n                    <span>{this.folderDetails.folderId}</span>\r\n\r\n                    <label>{state.localization?.Created}</label>\r\n                    <span>{this.folderDetails.createdBy}</span>\r\n\r\n                    <label>{state.localization?.CreatedOnDate}</label>\r\n                    <span>{this.folderDetails.createdOnDate}</span>\r\n\r\n                    <label>{state.localization?.LastModified}</label>\r\n                    <span>{this.folderDetails.lastModifiedBy}</span>\r\n\r\n                    <label>{state.localization?.LastModifiedOnDate}</label>\r\n                    <span>{this.folderDetails.lastModifiedOnDate}</span>\r\n                  </div>\r\n                }\r\n              </div>\r\n              <div class=\"right\">\r\n                <div class=\"form\">\r\n                  <label>{state.localization?.Name}</label>\r\n                  <input type=\"text\"\r\n                    value={this.folderDetails?.folderName}\r\n                    onInput={e =>\r\n                      this.folderDetails = {\r\n                        ...this.folderDetails,\r\n                        folderName: (e.target as HTMLInputElement).value,\r\n                      }\r\n                    }\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </dnn-tab>\r\n          <dnn-tab tabTitle={state.localization?.Permissions}>\r\n            {this.folderDetails && this.folderDetails.permissions && this.roleGroups && this.roles && \r\n              <dnn-permissions-grid\r\n                permissions={this.folderDetails.permissions}\r\n                roleGroups={this.roleGroups}\r\n                roles={this.roles}\r\n                foundUsers={this.foundUsers}\r\n                onPermissionsChanged={e => this.handlePermissionsChanged(e.detail)}\r\n                onUserSearchQueryChanged={e => this.handleUserSearchQueryChanged(e.detail)}\r\n              />\r\n            }\r\n          </dnn-tab>\r\n        </dnn-tabs>\r\n        <div class=\"controls\">\r\n          <dnn-button\r\n            type=\"primary\"\r\n            reversed\r\n            onClick={() => this.closeModal()}\r\n          >\r\n            {state.localization.Cancel}\r\n          </dnn-button>\r\n          <dnn-button\r\n            type=\"primary\"\r\n            onClick={() => this.handleSave()}\r\n          >\r\n            {state.localization.Save}\r\n          </dnn-button>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host{\r\n    display: flex;\r\n    flex-direction: column;\r\n}\r\n:host(*){\r\n    background-color: transparent;\r\n    border: none;\r\n    padding: 0.5em 1em;\r\n    margin: 0;\r\n    border-bottom: 1px solid lightgray;\r\n    white-space: nowrap;\r\n}","import { Component, Host, h, Prop } from '@stencil/core';\r\nimport { Item } from '../../../services/ItemsClient';\r\nimport state from '../../../store/store';\r\n\r\n@Component({\r\n  tag: 'dnn-rm-file-context-menu',\r\n  styleUrl: '../context-menu.scss',\r\n  shadow: true,\r\n})\r\nexport class DnnRmFileContextMenu {\r\n  \r\n  /** The item that triggered this menu. */\r\n  @Prop() item!: Item;\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        {state.currentItems?.hasAddFilesPermission && state.currentItems.hasDeletePermission &&\r\n          <dnn-action-edit-item item={this.item} />\r\n        }\r\n        {state.currentItems?.hasDeletePermission &&\r\n          [\r\n            <dnn-action-move-items items={[this.item]} />\r\n          ,\r\n            <dnn-action-delete-items items={[this.item]} />\r\n          ,\r\n            <dnn-action-open-file item={this.item}/>\r\n          ,\r\n            <dnn-action-download-item item={this.item}/>\r\n          ]\r\n        }\r\n        {location.protocol == \"https:\" &&\r\n          <dnn-action-copy-url items={[this.item]} />\r\n        }\r\n      </Host>\r\n    );\r\n  }\r\n\r\n}\r\n",":host {\r\n  display: block;\r\n  padding-left: 32px;\r\n  overflow-y: auto;\r\n}\r\n","import { Component, Element, Host, h, Prop, Listen } from '@stencil/core';\r\nimport state from '../../store/store';\r\nimport { ItemsClient } from \"../../services/ItemsClient\";\r\nimport { Debounce } from '@dnncommunity/dnn-elements';\r\n@Component({\r\n  tag: 'dnn-rm-files-pane',\r\n  styleUrl: 'dnn-rm-files-pane.scss',\r\n  shadow: true,\r\n})\r\nexport class DnnRmFilesPane {\r\n\r\n  /** Defines how much more pixels to load under the fold. */\r\n  @Prop() preloadOffset: number = 5000;\r\n\r\n  @Element() el: HTMLDnnRmFilesPaneElement;\r\n\r\n  private readonly itemsClient: ItemsClient;\r\n  private loadedFilesArea: HTMLDivElement;\r\n  private spacer: HTMLDivElement;\r\n\r\n  constructor(){\r\n    this.itemsClient = new ItemsClient(state.moduleId);\r\n  }\r\n\r\n  @Listen(\"scroll\")\r\n  handleScroll(){\r\n    this.checkIfMoreItemsNeeded();\r\n  }\r\n\r\n  @Listen(\"dnnRmFoldersChanged\", {target: \"document\"})\r\n  handleFoldersChanged(){\r\n    state.currentItems = {\r\n      ...state.currentItems,\r\n      items: [],\r\n    };\r\n    state.selectedItems = [];\r\n    this.checkIfMoreItemsNeeded();\r\n  }\r\n\r\n  @Listen(\"dnnRmFileDoubleClicked\", {target: \"document\"})\r\n  handleFileDoubleClicked(e: CustomEvent<string>) {\r\n    window.open(e.detail, \"_blank\");\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    const loadedFilesHeight = this.loadedFilesArea.getBoundingClientRect().height;\r\n    const heightPerItem = loadedFilesHeight / state.currentItems.items.length;\r\n    const totalNeededHeight = heightPerItem * state.currentItems.totalCount;\r\n    let spacerHeight = totalNeededHeight - loadedFilesHeight;\r\n    if (spacerHeight < 0){\r\n      spacerHeight = 0;\r\n    }\r\n    this.spacer.style.height = `${spacerHeight}px`;\r\n\r\n    this.checkIfMoreItemsNeeded();\r\n  }\r\n\r\n  checkIfMoreItemsNeeded() {\r\n    const endOfFilesHeight = this.spacer.getBoundingClientRect().top;\r\n    const thisBottom = this.el.getBoundingClientRect().bottom;\r\n    const offset = endOfFilesHeight - thisBottom;\r\n    if (offset < this.preloadOffset){\r\n      this.loadMore();\r\n    }\r\n  }\r\n\r\n  @Debounce(50)\r\n  loadMore() {\r\n    if (state.currentItems.items.length >= state.currentItems.totalCount){\r\n      return;\r\n    }\r\n\r\n    if (state.itemsSearchTerm){\r\n      this.itemsClient.search(\r\n        state.currentItems.folder.folderId,\r\n        state.itemsSearchTerm,\r\n        state.lastSearchRequestedPage + 1,\r\n        state.pageSize,\r\n        state.sortField)\r\n      .then(data => {\r\n        state.lastSearchRequestedPage += 1;\r\n        state.currentItems = {\r\n          ...state.currentItems,\r\n          totalCount: data.totalCount,\r\n          items: [...state.currentItems.items, ...data.items],\r\n        }\r\n      })\r\n    }\r\n    else{\r\n      this.itemsClient.getFolderContent(\r\n        state.currentItems.folder.folderId,\r\n        state.currentItems.items.length,\r\n        state.pageSize,\r\n        state.sortField)\r\n      .then(data => state.currentItems = {\r\n        ...state.currentItems,\r\n        items: [...state.currentItems.items, ...data.items],\r\n      })\r\n      .catch(() => {}); // On purpose, we want to ignore aborted requests.\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div ref={el => this.loadedFilesArea = el}>\r\n          {state.layout == \"list\" &&\r\n            <dnn-rm-items-listview currentItems={state.currentItems}></dnn-rm-items-listview>\r\n          }\r\n          {state.layout == \"card\" &&\r\n            <dnn-rm-items-cardview currentItems={state.currentItems}></dnn-rm-items-cardview>\r\n          }\r\n        </div>\r\n        <div ref={el => this.spacer = el}></div>\r\n      </Host>\r\n    );\r\n  }\r\n\r\n}\r\n",":host{\r\n    display: flex;\r\n    flex-direction: column;\r\n}\r\n:host(*){\r\n    background-color: transparent;\r\n    border: none;\r\n    padding: 0.5em 1em;\r\n    margin: 0;\r\n    border-bottom: 1px solid lightgray;\r\n    white-space: nowrap;\r\n}","import { Component, Host, h, Prop } from '@stencil/core';\r\nimport { Item } from '../../../services/ItemsClient';\r\nimport state from '../../../store/store';\r\n\r\n@Component({\r\n  tag: 'dnn-rm-folder-context-menu',\r\n  styleUrl: '../context-menu.scss',\r\n  shadow: true,\r\n})\r\nexport class DnnRmFolderContextMenu {\r\n  \r\n  /** The item that triggered this menu. */\r\n  @Prop() item!: Item;\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        {state.currentItems?.hasAddFoldersPermission &&\r\n          <dnn-action-create-folder parentFolderId={this.item.itemId} />\r\n        }\r\n        {state.currentItems?.hasManagePermission &&\r\n          <dnn-action-edit-item item={this.item} />\r\n        }\r\n        {state.currentItems?.hasDeletePermission && this.item.itemId != state.settings.HomeFolderId &&\r\n        [\r\n          <dnn-action-move-items items={[this.item]} />\r\n        ,\r\n          <dnn-action-delete-items items={[this.item]} />\r\n        ]\r\n        }\r\n        {state.currentItems.hasDeletePermission && this.item.unlinkAllowedStatus != \"false\" &&\r\n          <dnn-action-unlink-items items={[this.item]} />\r\n        }\r\n      </Host>\r\n    );\r\n  }\r\n\r\n}\r\n",":host {\r\n  display: block;\r\n  margin-left: 1em;\r\n}\r\n\r\nbutton{\r\n  padding:0;\r\n  margin:0;\r\n  background-color: transparent;\r\n  border: none;\r\n  cursor: pointer;\r\n}\r\n\r\ndnn-collapsible{\r\n  position: fixed;\r\n  display: none;\r\n  border: 1px solid lightgray;\r\n  box-shadow: 2px 2px 4px -2px;\r\n  background-color: white;\r\n  z-index: 1;\r\n}","import { Component, Element, Host, h, State, Listen, Event, EventEmitter } from '@stencil/core';\r\nimport { FolderTreeItem, InternalServicesClient } from \"../../services/InternalServicesClient\";\r\nimport { ItemsClient } from \"../../services/ItemsClient\";\r\nimport { GetFolderContentResponse } from \"../../services/ItemsClient\";\r\nimport state from \"../../store/store\";\r\n\r\n@Component({\r\n  tag: 'dnn-rm-folder-list',\r\n  styleUrl: 'dnn-rm-folder-list.scss',\r\n  shadow: true,\r\n})\r\nexport class DnnRmFolderList {\r\n\r\n  /** Fires when a folder is picked. */\r\n  @Event() dnnRmFolderListFolderPicked: EventEmitter<FolderTreeItem>;\r\n  /** Fires when a context menu is opened for this item. Emits the folder ID. */\r\n  @Event() dnnRmcontextMenuOpened: EventEmitter<number>;\r\n\r\n  @State() folderContents: GetFolderContentResponse;\r\n  @State() selectedFolder: FolderTreeItem;\r\n\r\n  @Element() el!: HTMLDnnRmFolderListElement;\r\n  \r\n  private internalServicesClient: InternalServicesClient;\r\n  private itemsClient: ItemsClient;\r\n\r\n  constructor(){\r\n    this.internalServicesClient = new InternalServicesClient(state.moduleId);\r\n    this.itemsClient = new ItemsClient(state.moduleId);\r\n  }\r\n\r\n  @Listen(\"dnnRmFoldersChanged\", {target: \"document\"})\r\n  handleFoldersChanged(){\r\n    this.getFolders();\r\n  }\r\n\r\n  @Listen(\"dnnRmcontextMenuOpened\", {target: \"body\"})\r\n  handleDnnRmContextMenuOpened(e: CustomEvent<number>){\r\n    if (state.settings.HomeFolderId != e.detail){\r\n      this.dismissContextMenu();\r\n    }\r\n  }\r\n\r\n  componentWillLoad() {\r\n    this.getFolders()\r\n    .then(() => {\r\n      this.itemsClient.getFolderContent(\r\n        state.settings.HomeFolderId,\r\n        0,\r\n        state.pageSize,\r\n        state.sortField)\r\n      .then(data => state.currentItems = data)\r\n      .catch(error => console.error(error));\r\n    })\r\n    .catch(error => {\r\n      console.error(error);\r\n      if (error.Message){\r\n        alert(error.Message);\r\n      }\r\n    });\r\n      \r\n  }\r\n\r\n  private dismissContextMenu() {\r\n    const existingMenus = this.el.shadowRoot.querySelectorAll(\"dnn-collapsible\");\r\n    existingMenus?.forEach(contextMenu => this.el.shadowRoot.removeChild(contextMenu));\r\n  }\r\n\r\n  private getFolders() {\r\n    return new Promise((resolve, reject) => {\r\n      this.internalServicesClient.getFolders(state.settings.HomeFolderId)\r\n      .then(data => {\r\n        state.rootFolders = data;\r\n        resolve(data);\r\n      })\r\n      .catch(reason => reject(reason));\r\n    });\r\n  }\r\n\r\n  private handleFolderPicked(e: CustomEvent<FolderTreeItem>): void {\r\n    this.selectedFolder = e.detail;\r\n    this.dnnRmFolderListFolderPicked.emit(e.detail)\r\n  }\r\n\r\n  private handleRootClicked(){\r\n    const item: FolderTreeItem = {\r\n      data: {\r\n        hasChildren: false,\r\n        key: state.settings.HomeFolderId.toString(),\r\n        selectable: true,\r\n        value: state.settings.HomeFolderName,\r\n      },\r\n    };\r\n    this.selectedFolder = item;\r\n    this.dnnRmFolderListFolderPicked.emit(item);\r\n  }\r\n\r\n  private handleContextMenu(e: MouseEvent): void {\r\n    e.preventDefault();\r\n    this.itemsClient.getFolderItem(state.settings.HomeFolderId)\r\n    .then(item => {\r\n      const collapsible = document.createElement(\"dnn-collapsible\");\r\n      const folderContextMenu = document.createElement(\"dnn-rm-folder-context-menu\");\r\n      collapsible.appendChild(folderContextMenu);\r\n      folderContextMenu.item = item;\r\n      collapsible.style.left = `${e.pageX}px`;\r\n      collapsible.style.top = `${e.pageY}px`;\r\n      collapsible.style.display = \"block\";\r\n      this.el.shadowRoot.appendChild(collapsible);\r\n      setTimeout(() => {\r\n        collapsible.expanded = true;\r\n      }, 100);\r\n      this.dnnRmcontextMenuOpened.emit(state.settings.HomeFolderId);\r\n    })\r\n    .catch(reason => console.error(reason));\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <button\r\n          onClick={() => this.handleRootClicked()}\r\n          onContextMenu={e => this.handleContextMenu(e)}\r\n        >\r\n          <strong>{state.settings.HomeFolderName}</strong>\r\n        </button>\r\n        {state.rootFolders && state.rootFolders.Tree.children.map(item =>\r\n            <dnn-rm-folder-list-item\r\n              folder={item}\r\n              parentFolderId={Number.parseInt(state.rootFolders.Tree.data.key)}\r\n              onDnnRmFolderListItemClicked={e => this.handleFolderPicked(e)}\r\n              selectedFolder={this.selectedFolder}\r\n            >\r\n            </dnn-rm-folder-list-item>\r\n        )}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n  font-weight: normal;\r\n  color: black;\r\n  transition: all 300ms ease-in-out;\r\n}\r\n:host(.selected){\r\n  .item-name{\r\n    font-weight: bolder;\r\n    color: var(--dnn-color-primary-dark, #0D569E);\r\n  }\r\n}\r\n\r\nbutton{\r\n  display: flex;\r\n  align-items: center;\r\n  border: none;\r\n  padding: 0;\r\n  margin: 0;\r\n  background-color: transparent;\r\n  gap: 0.5em;\r\n  cursor: pointer;\r\n}\r\ndnn-collapsible{\r\n  position: fixed;\r\n  display: none;\r\n  border: 1px solid lightgray;\r\n  box-shadow: 2px 2px 4px -2px;\r\n  background-color: white;\r\n  z-index: 1;\r\n}","import { Component, Host, h, Event, EventEmitter, Prop, State, Element, Listen } from '@stencil/core';\r\nimport { InternalServicesClient, FolderTreeItem } from '../../services/InternalServicesClient';\r\nimport { ItemsClient } from \"../../services/ItemsClient\";\r\nimport state from \"../../store/store\";\r\n\r\n@Component({\r\n  tag: 'dnn-rm-folder-list-item',\r\n  styleUrl: 'dnn-rm-folder-list-item.scss',\r\n  shadow: true,\r\n})\r\nexport class DnnRmFolderListItem {\r\n\r\n  /** The basic information about the folder */\r\n  @Prop({mutable: true}) folder!: FolderTreeItem;\r\n\r\n  /** If true, this node will be expanded on load. */\r\n  @Prop({mutable: true}) expanded = false;\r\n  \r\n  /** The ID of the parent folder. */\r\n  @Prop() parentFolderId!: number;\r\n\r\n  /** Indicates if this item is the currently selected one.*/\r\n  @Prop() selectedFolder: FolderTreeItem;\r\n\r\n  /** Fires when a context menu is opened for this item. Emits the folder ID. */\r\n  @Event() dnnRmcontextMenuOpened: EventEmitter<number>;\r\n\r\n  @Listen(\"dnnRmcontextMenuOpened\", {target: \"body\"})\r\n  handleDnnRmContextMenuOpened(e: CustomEvent<number>){\r\n    if (Number.parseInt(this.folder.data.key) != e.detail){\r\n      this.dismissContextMenu();\r\n    }\r\n  }\r\n\r\n  @Listen(\"dnnRmFolderDoubleClicked\", {target: \"document\"})\r\n  handleFolderDoubleClicked(e: CustomEvent<number>) {\r\n    if (e.detail == Number.parseInt(this.folder.data.key)) {\r\n      this.dnnRmFolderListItemClicked.emit(this.folder);\r\n      this.handleUserExpanded();\r\n      this.expanded = true;\r\n    }\r\n  }\r\n\r\n  @State() folderIconUrl: string;\r\n\r\n  @Element() el!: HTMLDnnRmFolderListItemElement;\r\n\r\n  /** Fires when a folder is clicked. */\r\n  @Event() dnnRmFolderListItemClicked: EventEmitter<FolderTreeItem>;\r\n\r\n  private itemsClient: ItemsClient;\r\n  private internalServicesClient: InternalServicesClient;\r\n  \r\n  constructor(){\r\n    this.itemsClient = new ItemsClient(state.moduleId);\r\n    this.internalServicesClient = new InternalServicesClient(state.moduleId);\r\n  }\r\n  \r\n  componentWillLoad() {\r\n    this.itemsClient.getFolderIconUrl(Number.parseInt(this.folder.data.key))\r\n    .then(data => this.folderIconUrl = data)\r\n    .catch(error => console.error(error));\r\n    document.addEventListener(\"click\", this.dismissContextMenu.bind(this));\r\n  }\r\n\r\n  disconnectedCallback(){\r\n    document.removeEventListener(\"click\", this.dismissContextMenu.bind(this));\r\n  }\r\n  \r\n  private handleUserExpanded() {\r\n    const children = Array.from(this.el.shadowRoot.querySelectorAll('dnn-rm-folder-list-item'));\r\n    children.forEach(element => {\r\n      element.shadowRoot.querySelectorAll(\"dnn-treeview-item\")\r\n        .forEach(t => t.removeAttribute(\"expanded\"));\r\n    });\r\n    this.internalServicesClient.getFolderDescendants(this.folder.data.key)\r\n    .then(data => {\r\n      this.folder = {\r\n        ...this.folder,\r\n        children: data.Items.map(item => {\r\n          return {\r\n            data: {\r\n              hasChildren : item.hasChildren,\r\n              key: item.key,\r\n              selectable: item.selectable,\r\n              value: item.value\r\n            },\r\n          };\r\n        }),\r\n      };\r\n    })\r\n    .catch(error => console.error(error));\r\n  };\r\n\r\n  private handleContextMenu(e: MouseEvent): void {\r\n    e.preventDefault();\r\n    this.itemsClient.getFolderItem(Number.parseInt(this.folder.data.key))\r\n    .then(item => {\r\n      const collapsible = document.createElement(\"dnn-collapsible\");\r\n      const folderContextMenu = document.createElement(\"dnn-rm-folder-context-menu\");\r\n      collapsible.appendChild(folderContextMenu);\r\n      folderContextMenu.item = item;\r\n      collapsible.style.left = `${e.pageX}px`;\r\n      collapsible.style.top = `${e.pageY}px`;\r\n      collapsible.style.display = \"block\";\r\n      this.el.shadowRoot.appendChild(collapsible);\r\n      setTimeout(() => {\r\n        collapsible.expanded = true;\r\n      }, 100);\r\n      this.dnnRmcontextMenuOpened.emit(Number.parseInt(this.folder.data.key));\r\n    })\r\n    .catch(reason => console.error(reason));\r\n  }\r\n\r\n  private dismissContextMenu() {\r\n    const existingMenus = this.el.shadowRoot.querySelectorAll(\"dnn-collapsible\");\r\n    existingMenus?.forEach(contextMenu => this.el.shadowRoot.removeChild(contextMenu));\r\n  }\r\n\r\n  private getItemClasses(): string {\r\n    if (this.selectedFolder?.data?.key == this.folder.data.key) {\r\n      return \"selected\";\r\n    }\r\n\r\n    return \"\";\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host class={this.getItemClasses()}>\r\n        <dnn-treeview-item\r\n          expanded={this.expanded}\r\n          onUserExpanded={() => this.handleUserExpanded()}\r\n        >\r\n          <button\r\n            title={`${this.folder.data.value} (ID: ${this.folder.data.key})`}\r\n            onClick={() => this.dnnRmFolderListItemClicked.emit(this.folder)}\r\n            onContextMenu={e => this.handleContextMenu(e)}\r\n          >\r\n            {this.folderIconUrl\r\n            ?\r\n              <img src={this.folderIconUrl} alt={this.folder.data.value} />\r\n            :\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><path d=\"M0 0h24v24H0z\" fill=\"none\"></path><path d=\"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z\"></path></svg>\r\n            }\r\n            <span class=\"item-name\">\r\n              {this.folder.data.value}\r\n            </span>\r\n          </button>\r\n          {this.folder.data.hasChildren &&\r\n            [\r\n              <div slot=\"children\">\r\n              </div>\r\n            ,\r\n              this.folder.children && this.folder.children.length > 0 && this.folder.children.map(child =>\r\n              <dnn-rm-folder-list-item\r\n                slot=\"children\"\r\n                parentFolderId={Number.parseInt(this.folder.data.key)}\r\n                folder={child}\r\n                selectedFolder={this.selectedFolder}>\r\n              </dnn-rm-folder-list-item>\r\n              )\r\n            ]}\r\n        </dnn-treeview-item>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n    display: block;\r\n}\r\ntable{\r\n    border-collapse: collapse;\r\n    thead{\r\n        tr{\r\n            th{\r\n                padding: 0.5em;\r\n                text-align: left;\r\n                font-size: 1.2em;\r\n            }\r\n        }\r\n    }\r\n    tr{\r\n        &:nth-child(even){\r\n            background-color: #f2f2f2;\r\n        }\r\n        td{\r\n            padding: 0.5em;\r\n            font-size: 1.1em;\r\n        }\r\n    }\r\n}\r\n.controls{\r\n    display: flex;\r\n    justify-content: flex-end;\r\n    margin-top: 1em;\r\n    dnn-button{\r\n        margin-left: 1em;\r\n    }\r\n}","import {Component, Element, Host, h, State} from '@stencil/core';\r\nimport { FolderMappingInfo, ItemsClient } from '../../services/ItemsClient';\r\nimport state from \"../../store/store\";\r\n\r\n@Component({\r\n    tag: 'dnn-rm-folder-mappings',\r\n    styleUrl: 'dnn-rm-folder-mappings.scss',\r\n    shadow: true,\r\n})\r\nexport class DnnRmFolderMappings {\r\n    private itemsClient: ItemsClient;\r\n\r\n    @Element() el: HTMLDnnRmFolderMappingsElement;\r\n\r\n    @State() folderMappings: FolderMappingInfo[];\r\n    @State() addFolderTypeUrl: string;\r\n\r\n    constructor() {\r\n        this.itemsClient = new ItemsClient(state.moduleId);\r\n    }\r\n\r\n    componentWillLoad() {\r\n        this.itemsClient.getFolderMappings()\r\n            .then(data => {\r\n                this.folderMappings = data;\r\n            })\r\n            .catch(reason => console.error(reason));\r\n        this.itemsClient.getAddFolderTypeUrl()\r\n            .then(data => {\r\n                this.addFolderTypeUrl = data;\r\n            })\r\n            .catch(reason => console.error(reason));\r\n    }\r\n\r\n    private dismiss(): void {\r\n        this.el.closest('dnn-modal').hide();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Host>\r\n                <h2>{state.localization.EditFolderMappings}</h2>\r\n                {this.folderMappings &&\r\n                    <table>\r\n                        <thead>\r\n                            <tr>\r\n                                <th>&nbsp;</th>\r\n                                <th>{state.localization.Name}</th>\r\n                                <th>{state.localization.FolderProvider}</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {this.folderMappings.map(mapping =>\r\n                                <tr>\r\n                                    <td>\r\n                                        {!mapping.IsDefault &&\r\n                                            <a href={mapping.editUrl}>\r\n                                                <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" width=\"24\"><path d=\"M5 19h1.4l8.625-8.625-1.4-1.4L5 17.6ZM19.3 8.925l-4.25-4.2 1.4-1.4q.575-.575 1.413-.575.837 0 1.412.575l1.4 1.4q.575.575.6 1.388.025.812-.55 1.387ZM17.85 10.4 7.25 21H3v-4.25l10.6-10.6Zm-3.525-.725-.7-.7 1.4 1.4Z\"/></svg>\r\n                                            </a>\r\n                                        }\r\n                                    </td>\r\n                                    <td>{mapping.MappingName}</td>\r\n                                    <td>{mapping.FolderProviderType}</td>\r\n                                </tr>\r\n                            )}\r\n                        </tbody>\r\n                    </table>\r\n                }\r\n                {this.addFolderTypeUrl &&\r\n                    <div class=\"controls\">\r\n                        <dnn-button reversed onClick={() => this.dismiss()}>\r\n                            {state.localization?.Cancel}\r\n                        </dnn-button>\r\n                        <dnn-button onClick={() => window.location.href = this.addFolderTypeUrl}>\r\n                            {state.localization?.AddFolderType}\r\n                        </dnn-button>\r\n                    </div>\r\n                }\r\n            </Host>\r\n        );\r\n    }\r\n}","import {Item} from \"../services/ItemsClient\";\r\nimport state from \"../store/store\";\r\n\r\n/** Various utilities that help with current selection of items. */\r\nclass SelectionUtilities{\r\n\r\n  /** Check if an item is currently selected */\r\n  public isItemSelected(item: Item)\r\n  {\r\n    return state.selectedItems && state.selectedItems.includes(item);\r\n  }\r\n\r\n  /** Toggles the selection of an item. */\r\n  public toggleItemSelected(item: Item): void {\r\n    if (this.isItemSelected(item)){\r\n      state.selectedItems = state.selectedItems.filter(i => i != item);\r\n    }\r\n    else{\r\n      state.selectedItems = [...state.selectedItems, item];\r\n    }\r\n  }\r\n}\r\n\r\nexport const selectionUtilities = new SelectionUtilities();",":host {\r\n  display: block;\r\n  padding-right: 2em\r\n}\r\n.container{\r\n  display: flex;\r\n  gap: 1em;\r\n  margin-top: 1em;\r\n  flex-wrap: wrap;\r\n  .card{\r\n    cursor: pointer;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    gap: 0.25em;\r\n    border: none;\r\n    background-color: transparent;\r\n    transition: all 100ms ease-in-out;\r\n    width: calc(110px + 2em);\r\n    justify-content: flex-end;\r\n    position: relative;\r\n    &:hover, &:focus{\r\n      transform: scale3d(1.1, 1.1, 1.1);\r\n      .radio{\r\n        opacity: 1;\r\n      }\r\n    }\r\n    .radio{\r\n      position: absolute;\r\n      top:0;\r\n      left:-16px;\r\n      opacity: 0;\r\n      transition: all 100ms ease-in-out;\r\n      &.selected{\r\n        opacity: 1;\r\n      }\r\n    }\r\n    img{\r\n      width: 110px;\r\n      max-height: 110px;\r\n      margin: auto;\r\n    }\r\n    .item-name{\r\n      line-break: anywhere;\r\n    }\r\n  }\r\n}\r\ndnn-collapsible{\r\n  position: fixed;\r\n  display: none;\r\n  border: 1px solid lightgray;\r\n  box-shadow: 2px 2px 4px -2px;\r\n  background-color: white;\r\n  z-index: 1;\r\n}","import { Component, Event, EventEmitter, Host, h, Prop, Element } from '@stencil/core';\r\nimport { GetFolderContentResponse, Item } from '../../services/ItemsClient';\r\nimport state from '../../store/store';\r\nimport { selectionUtilities } from '../../utilities/selection-utilities';\r\n\r\n@Component({\r\n  tag: 'dnn-rm-items-cardview',\r\n  styleUrl: 'dnn-rm-items-cardview.scss',\r\n  shadow: true,\r\n})\r\nexport class DnnRmItemsCardview {\r\n\r\n  /** The list of current items. */\r\n  @Prop() currentItems!: GetFolderContentResponse;\r\n\r\n  @Element() el: HTMLDnnRmItemsCardviewElement;\r\n\r\n  /** Fires when a folder is double-clicked and emits the folder ID into the event.detail */\r\n  @Event() dnnRmFolderDoubleClicked: EventEmitter<number>;\r\n\r\n  /** Fires when a file is double-clicked and emits the file ID into the event.detail */\r\n  @Event() dnnRmFileDoubleClicked: EventEmitter<string>;\r\n\r\n  componentWillLoad() {\r\n    document.addEventListener(\"click\", this.dismissContextMenu.bind(this));\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    document.removeEventListener(\"click\", this.disconnectedCallback.bind(this));\r\n  }\r\n\r\n  private dismissContextMenu() {\r\n    const existingMenus = this.el.shadowRoot.querySelectorAll(\"dnn-collapsible\");\r\n    existingMenus?.forEach(existingMenu => this.el.shadowRoot.removeChild(existingMenu));\r\n  }\r\n\r\n  private handleContextMenu(e: MouseEvent, item: Item): void {\r\n    e.preventDefault();\r\n    state.selectedItems = [item];\r\n    this.dismissContextMenu();\r\n    const collapsible = document.createElement(\"dnn-collapsible\");\r\n    const contextMenu = item.isFolder\r\n      ? document.createElement(\"dnn-rm-folder-context-menu\")\r\n      : document.createElement(\"dnn-rm-file-context-menu\");\r\n    collapsible.appendChild(contextMenu);\r\n    contextMenu.item = item;\r\n    collapsible.style.left = `${e.pageX}px`;\r\n    collapsible.style.top = `${e.pageY}px`;\r\n    collapsible.style.display = \"block\";\r\n    this.el.shadowRoot.appendChild(collapsible);\r\n    setTimeout(() => {\r\n      collapsible.expanded = true;\r\n    }, 100);\r\n    return;\r\n  }\r\n\r\n  private handleDoubleClick(item: Item): void {\r\n    if (item.isFolder) {\r\n      this.dnnRmFolderDoubleClicked.emit(item.itemId);\r\n    } else {\r\n      this.dnnRmFileDoubleClicked.emit(item.path);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        {this.currentItems &&\r\n          <div class=\"container\">\r\n            {this.currentItems.items?.map(item =>\r\n              <button\r\n                class=\"card\"\r\n                onClick={() => selectionUtilities.toggleItemSelected(item)}\r\n                onContextMenu={e => this.handleContextMenu(e, item)}\r\n                onDblClick={() => this.handleDoubleClick(item)}\r\n              >\r\n                  <div class={selectionUtilities.isItemSelected(item) ? \"radio selected\" : \"radio\"}>\r\n                    {selectionUtilities.isItemSelected(item) &&\r\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"/></svg>\r\n                    }\r\n                    {!selectionUtilities.isItemSelected(item) &&\r\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"/></svg>\r\n                    }\r\n                  </div>\r\n                  <img\r\n                    src={item.thumbnailAvailable ? item.thumbnailUrl : item.iconUrl}\r\n                    alt={`${item.itemName} (ID: ${item.itemId})`}\r\n                  />\r\n                  <span class=\"item-name\">\r\n                    {item.itemName}\r\n                  </span>\r\n              </button>\r\n            )}\r\n          </div>\r\n        }\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n","export function getFileSize(fileSize: number): string {\r\n    if (fileSize == undefined || fileSize == undefined){\r\n        return \"\";\r\n    }\r\n\r\n    if (fileSize < 1024){\r\n        return fileSize.toString() + \" B\";\r\n    }\r\n\r\n    if (fileSize < 1048576 ){\r\n        return Math.round(fileSize / 1024).toString() + \" KB\";\r\n    }\r\n\r\n    return Math.round(fileSize / 1048576).toString() + \" MB\";\r\n}",":host {\r\n  display: block;\r\n  margin-right: 1em;\r\n}\r\n\r\ntable{\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  thead{\r\n    font-weight: bold;\r\n    tr{\r\n      border-bottom: 2px solid lightgray;\r\n    }\r\n  }\r\n  tbody{\r\n    tr{\r\n      border-bottom: 1px solid lightgray;\r\n      transition: all 100ms ease-in-out;\r\n      &:hover, &:focus{\r\n        background-color: #eee;\r\n      }\r\n      td{\r\n        &.radio{\r\n          opacity: 0;\r\n          transition: all 100ms ease-in-out;\r\n        }\r\n        img{\r\n          height: 2.5em;\r\n          display: block;\r\n          margin: 0 auto;\r\n        }\r\n        .date{\r\n          display: flex;\r\n          flex-direction: column;\r\n        }\r\n        &.size{\r\n          text-align: right;\r\n        }\r\n      }\r\n      &:hover, &:focus, &.selected{\r\n        td.radio{\r\n          opacity: 1;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\ndnn-collapsible{\r\n  position: fixed;\r\n  display: none;\r\n  border: 1px solid lightgray;\r\n  box-shadow: 2px 2px 4px -2px;\r\n  background-color: white;\r\n  z-index: 1;\r\n}","import { Component, Event, EventEmitter, Host, h, Prop, Element } from '@stencil/core';\r\nimport { GetFolderContentResponse, Item } from '../../services/ItemsClient'\r\nimport state from '../../store/store';\r\nimport { selectionUtilities } from \"../../utilities/selection-utilities\";\r\nimport { getFileSize } from '../../utilities/filesize-utilities';\r\n@Component({\r\n  tag: 'dnn-rm-items-listview',\r\n  styleUrl: 'dnn-rm-items-listview.scss',\r\n  shadow: true,\r\n})\r\nexport class DnnRmItemsListview {\r\n\r\n  /** The list of current items. */\r\n  @Prop() currentItems!: GetFolderContentResponse;\r\n\r\n  @Element() el: HTMLDnnRmItemsListviewElement;\r\n\r\n  /** Fires when a folder is double-clicked and emits the folder ID into the event.detail */\r\n  @Event() dnnRmFolderDoubleClicked: EventEmitter<number>;\r\n\r\n  /** Fires when a file is double-clicked and emits the file ID into the event.detail */\r\n  @Event() dnnRmFileDoubleClicked: EventEmitter<string>;\r\n\r\n  componentWillLoad() {\r\n    document.addEventListener(\"click\", this.dismissContextMenu.bind(this));\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    document.removeEventListener(\"click\", this.disconnectedCallback.bind(this));\r\n  }\r\n\r\n  private dismissContextMenu() {\r\n    const existingMenus = this.el.shadowRoot.querySelectorAll(\"dnn-collapsible\");\r\n    existingMenus?.forEach(existingMenu => this.el.shadowRoot.removeChild(existingMenu));\r\n  }\r\n  \r\n\r\n  private getLocalDateString(dateString: string) {\r\n    const date = new Date(dateString);\r\n    return <div class=\"date\">\r\n      <span>{date.toLocaleDateString()}</span>\r\n      <span>{date.toLocaleTimeString()}</span>\r\n    </div>\r\n  }\r\n\r\n  private handleRowKeyDown(e: KeyboardEvent, item: Item): void {\r\n    switch (e.key) {\r\n      case \"ArrowDown\":\r\n        e.preventDefault();\r\n        ((e.target as HTMLTableRowElement).nextElementSibling as HTMLTableRowElement)?.focus();\r\n        break;\r\n      case \"ArrowUp\":\r\n        e.preventDefault();\r\n        ((e.target as HTMLTableRowElement).previousElementSibling as HTMLTableRowElement)?.focus();\r\n        break;\r\n      case \" \":\r\n      case \"Enter\":\r\n        e.preventDefault();\r\n        selectionUtilities.toggleItemSelected(item);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  private handleContextMenu(e: MouseEvent, item: Item): void {\r\n    e.preventDefault();\r\n    state.selectedItems = [item];\r\n    this.dismissContextMenu();\r\n    \r\n    let contextMenu: HTMLDnnRmFolderContextMenuElement | HTMLDnnRmFileContextMenuElement;\r\n    contextMenu = item.isFolder\r\n      ? document.createElement(\"dnn-rm-folder-context-menu\")\r\n      : document.createElement(\"dnn-rm-file-context-menu\");\r\n    const collapsible = document.createElement(\"dnn-collapsible\");\r\n    contextMenu.item = item;\r\n    collapsible.appendChild(contextMenu);\r\n    collapsible.style.left = `${e.pageX}px`;\r\n    collapsible.style.top = `${e.pageY}px`;\r\n    collapsible.style.display = \"block\";\r\n    this.el.shadowRoot.appendChild(collapsible);\r\n    setTimeout(() => {\r\n      collapsible.expanded = true;\r\n    }, 100);\r\n    return;\r\n  }\r\n\r\n  private handleDoubleClick(item: Item): void {\r\n    if (item.isFolder) {\r\n      this.dnnRmFolderDoubleClicked.emit(item.itemId);\r\n    } else {\r\n      this.dnnRmFileDoubleClicked.emit(item.path);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        {this.currentItems &&\r\n          <table>\r\n            <thead>\r\n              <tr>\r\n                <td></td>\r\n                <td></td>\r\n                <td>{state.localization?.Name}</td>\r\n                <td>{state.localization?.Created}</td>\r\n                <td>{state.localization?.LastModified}</td>\r\n                <td>{state.localization?.Size}</td>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {this.currentItems.items?.map(item =>\r\n                <tr\r\n                  class={selectionUtilities.isItemSelected(item) ? \"selected\" : \"\"}\r\n                  tabIndex={0}\r\n                  onKeyDown={e => this.handleRowKeyDown(e, item)}\r\n                  onClick={() => selectionUtilities.toggleItemSelected(item)}\r\n                  onContextMenu={e => this.handleContextMenu(e, item)}\r\n                  onDblClick={() => this.handleDoubleClick(item)}\r\n                >\r\n                  <td class=\"radio\">\r\n                    {selectionUtilities.isItemSelected(item) &&\r\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"/></svg>\r\n                    }\r\n                    {!selectionUtilities.isItemSelected(item) &&\r\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"/></svg>\r\n                    }\r\n                  </td>\r\n                  <td><img src={item.iconUrl} /></td>\r\n                  <td>{item.itemName}</td>\r\n                  <td>{this.getLocalDateString(item.createdOn)}</td>\r\n                  <td>{this.getLocalDateString(item.modifiedOn)}</td>\r\n                  <td class=\"size\">{getFileSize(item.fileSize)}</td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        }\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n  padding: 0.5em 1em;\r\n  padding-left: 0px;\r\n}","import { Component, Host, h } from '@stencil/core';\r\nimport { FolderTreeItem } from '../../services/InternalServicesClient';\r\nimport { ItemsClient } from '../../services/ItemsClient';\r\nimport state from '../../store/store';\r\n\r\n@Component({\r\n  tag: 'dnn-rm-left-pane',\r\n  styleUrl: 'dnn-rm-left-pane.scss',\r\n  shadow: true,\r\n})\r\nexport class DnnRmLeftPane {\r\n\r\n  private itemsClient: ItemsClient;\r\n\r\n  constructor() {\r\n    this.itemsClient = new ItemsClient(state.moduleId);\r\n  }\r\n\r\n  private handleFolderClicked(e: CustomEvent<FolderTreeItem>): void {\r\n    state.selectedItems = [];\r\n    this.itemsClient.getFolderContent(\r\n      Number.parseInt(e.detail.data.key),\r\n      0,\r\n      state.pageSize,\r\n      state.sortField)\r\n    .then(data => state.currentItems = data)\r\n    .catch(error => console.error(error));\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <dnn-rm-folder-list\r\n          onDnnRmFolderListFolderPicked={e => this.handleFolderClicked(e)}\r\n        />\r\n      </Host>\r\n    );\r\n  }\r\n\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n.general{\r\n  display: flex;\r\n  .left{\r\n    max-width: 256px;\r\n    border-right: 1px solid lightgray;\r\n    padding: 1em;\r\n    img{\r\n      width: 100%;\r\n    }\r\n  }\r\n  .right{\r\n    padding: 1em;\r\n  }\r\n}\r\n\r\n.form{\r\n  display: grid;\r\n  grid-template-columns: 1fr 2fr;\r\n  align-items: flex-end;\r\n  label{\r\n    font-weight: bold;\r\n    text-align: right;\r\n    margin-right: 0.5em;\r\n    &::after{\r\n      content: ':';\r\n    }\r\n    align-self: flex-start;\r\n  }\r\n  input, textarea{\r\n    margin-top: 0.5em;\r\n  }\r\n}\r\n\r\n.controls{\r\n  margin-top: 2em;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 1em;\r\n}\r\n","import { Component, Element, Event, EventEmitter, Host, h, Prop, State } from '@stencil/core';\r\nimport { FolderTreeItem } from '../../services/InternalServicesClient';\r\nimport { Item, ItemsClient } from '../../services/ItemsClient';\r\nimport state from '../../store/store';\r\n// import { ItemsClient } from '../../services/ItemsClient';\r\n\r\n@Component({\r\n  tag: 'dnn-rm-move-items',\r\n  styleUrl: 'dnn-rm-move-items.scss',\r\n  shadow: true,\r\n})\r\nexport class DnnRmMoveItems {\r\n\r\n  /** The list of items to delete. */\r\n  @Prop() items!: Item[];\r\n\r\n  /**\r\n  * Fires when there is a possibility that some folders have changed.\r\n  * Can be used to force parts of the UI to refresh.\r\n  */\r\n  @Event() dnnRmFoldersChanged: EventEmitter<void>;\r\n\r\n  @State() selectedFolder: FolderTreeItem;\r\n  \r\n  @Element() el: HTMLDnnRmMoveItemsElement;\r\n  \r\n  @State() moving: boolean;\r\n  @State() movedCount: number = 0;\r\n  @State() currentItemName: string;\r\n  \r\n  private itemsClient: ItemsClient;\r\n\r\n  constructor() {\r\n    this.itemsClient = new ItemsClient(state.moduleId);\r\n  }\r\n\r\n  private closeModal(): void {\r\n    const modal = this.el.parentElement as HTMLDnnModalElement;\r\n    modal.hide().then(() => {\r\n      setTimeout(() => {\r\n        document.body.removeChild(modal);\r\n      }, 300);\r\n    });\r\n  }\r\n\r\n  private handleMove(): void {\r\n    this.moving = true;\r\n    this.items.forEach(item => {\r\n      if (item.isFolder){\r\n        this.itemsClient.moveFolder({\r\n          SourceFolderId: item.itemId,\r\n          DestinationFolderId: Number.parseInt(this.selectedFolder.data.key)})\r\n        .then(() => {\r\n          this.handleItemMoved(item);\r\n        })\r\n        .catch(reason => alert(reason));\r\n      }\r\n      else {\r\n        this.itemsClient.moveFile({\r\n          SourceFileId: item.itemId,\r\n          DestinationFolderId: Number.parseInt(this.selectedFolder.data.key)})\r\n        .then(() => {\r\n          this.handleItemMoved(item);\r\n        })\r\n        .catch(reason => alert(reason));\r\n      }\r\n    });\r\n  }\r\n  \r\n  handleItemMoved(item: Item) {\r\n    this.movedCount++;\r\n    this.currentItemName = item.itemName;\r\n    if (this.movedCount == this.items.length) {\r\n      this.moving = false;\r\n      this.dnnRmFoldersChanged.emit();\r\n      this.closeModal();\r\n    }\r\n  }\r\n\r\n  private getMoveButtonText() {\r\n      return this.selectedFolder == undefined ? state.localization?.NoFolderSelected : state.localization?.Move;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <h2>{state.localization?.MoveItems}</h2>\r\n        <p>{state.localization?.SelectDestinationFolder}</p>\r\n        <dnn-rm-folder-list\r\n          onDnnRmFolderListFolderPicked={e => this.selectedFolder=e.detail}\r\n        />\r\n        {this.moving &&\r\n          <div>\r\n            <p>{state.localization?.MovingItems} {this.movedCount+1}/{state.selectedItems.length} ({this.currentItemName})</p>\r\n            <dnn-rm-progress-bar\r\n              max={state.selectedItems.length}\r\n              value={this.movedCount}\r\n            />\r\n          </div>\r\n        }\r\n        <div class=\"controls\">\r\n          <dnn-button\r\n            type=\"primary\"\r\n            reversed\r\n            disabled={this.moving}\r\n            onClick={() => this.closeModal()}\r\n          >\r\n            {state.localization.Cancel}\r\n          </dnn-button>\r\n          <dnn-button\r\n            type=\"primary\"\r\n            onConfirmed={() =>this.handleMove()}\r\n            confirm\r\n            confirmMessage={state.localization?.ConfirmMoveMessage}\r\n            confirmYesText={state.localization?.Yes}\r\n            confirmNoText={state.localization?.No}\r\n            disabled={this.moving}\r\n          >\r\n            {this.getMoveButtonText()}\r\n          </dnn-button>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n\r\n  /** \r\n    * @prop --progress-height: Sets the height of the progress bar.\r\n    * @prop --progress-background: Sets the background color of the progress bar.\r\n    * @prop --progress-color: Sets the color of the progress bar.\r\n    */\r\n\r\n  --progress-height: 20px;\r\n  --progress-background: var(--dnn-color-primary-contrast, lightgray);\r\n  --progress-color: var(--dnn-color-primary, #3792ED);\r\n}\r\n.progress-container {\r\n  display: flex;\r\n  height: var(--progress-height);\r\n  background: var(--progress-background);\r\n  overflow: hidden;\r\n\r\n  .progress-bar {\r\n    transition: all 300ms ease-in-out;\r\n    background: var(--progress-color);\r\n    width: calc(var(--current-value, 0) * 100% / var(--max-value, 100));\r\n  }\r\n  .progress-bar-remainder {\r\n    flex: 1;\r\n  }\r\n}","import { Component, Host, h, Prop, Element } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'dnn-rm-progress-bar',\r\n  styleUrl: 'dnn-rm-progress-bar.scss',\r\n  shadow: true,\r\n})\r\nexport class DnnRmProgressBar {\r\n\r\n  /** Defines the current progress value. */\r\n  @Prop() value: number = 0;\r\n\r\n  /** Defines the max progress value. */\r\n  @Prop() max: number = 100;\r\n\r\n  componentDidLoad() {\r\n    this.adjustProgress();\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    this.adjustProgress();\r\n  }\r\n\r\n  private adjustProgress() {\r\n    this.el.style.setProperty('--current-value', this.value.toString());\r\n    this.el.style.setProperty('--max-value', this.max.toString());\r\n  }\r\n\r\n  @Element() el: HTMLDnnRmProgressBarElement;\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class=\"progress-container\">\r\n            <div class=\"progress-bar\"> </div>\r\n            <div class=\"progress-bar-remainder\" />\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n  border: 2px solid gray;\r\n  border-radius: var(--dnn-controls-radius, 5px);\r\n  margin-top: 1em;\r\n}\r\n\r\n.container{\r\n    display: flex;\r\n    align-items: center;\r\n    .preview{\r\n        width: 32px;\r\n        height: 32px;\r\n        padding: 0.5em;\r\n    }\r\n    .file{\r\n        flex-grow: 1;\r\n        display: flex;\r\n        flex-direction: column;\r\n        padding: 0.5em;\r\n        .success{\r\n            color: green;\r\n            margin-top: 0.25em;\r\n            font-weight: bold;\r\n        }\r\n        .warning{\r\n            display: flex;\r\n            justify-content: flex-end;\r\n            align-items: center;\r\n            gap: 1em;\r\n            margin-top: 0.5em;\r\n            span{\r\n                color: red;\r\n                margin-right: auto;\r\n            }\r\n        }\r\n    }\r\n    .progress{\r\n        width: 100%;\r\n        background-color: lightgray;\r\n        border-radius: var(--dnn-controls-radius, 5px);\r\n        .progress-bar{\r\n            height: 1em;\r\n            background-color: var(--dnn-color-primary, #0078d7);\r\n            border-radius: var(--dnn-controls-radius, 5px);\r\n            transition: width 0.5s ease-in-out;\r\n        }\r\n    }\r\n    .warning{\r\n        margin: 0.25em;\r\n        font-weight: bold;\r\n    }\r\n    .dismiss{\r\n        button{\r\n            margin: 0;\r\n            padding: 0;\r\n            background-color: transparent;\r\n            border: none;\r\n            cursor: pointer;\r\n        }\r\n    }\r\n    .uploaded{\r\n        .success{\r\n            fill: green;\r\n        }\r\n    }\r\n}","import { Component, Host, h, Prop, State, Element } from '@stencil/core';\r\nimport state from '../../store/store';\r\nimport { getFileSize } from '../../utilities/filesize-utilities';\r\nimport { DnnServicesFramework } from '@dnncommunity/dnn-elements';\r\nimport { UploadFromLocalResponse } from './UploadFromLocalResponse';\r\n\r\n@Component({\r\n    tag: 'dnn-rm-queued-file',\r\n    styleUrl: 'dnn-rm-queued-file.scss',\r\n    shadow: true,\r\n})\r\nexport class DnnRmQueuedFile {\r\n\r\n    /** The file to upload. */\r\n    @Prop() file!: File;\r\n\r\n    /** Whether to extract uploaded zip files. */\r\n    @Prop() extract = false;\r\n\r\n    /** The validation code to use for uploads. */\r\n    @Prop() validationCode!: string;\r\n\r\n    /** Optionally limit the file types that can be uploaded. */\r\n    @Prop() filter!: string;\r\n\r\n    /** The maximal allowed file upload size */\r\n    @Prop() maxUploadFileSize!: number;\r\n\r\n    @State() overwrite = false;\r\n    @State() fileUploadResults: UploadFromLocalResponse;\r\n    @State() progress: number;\r\n    @State() successMessage: string;\r\n\r\n    @Element() el: HTMLDnnRmQueuedFileElement;\r\n\r\n    private servicesFramework: DnnServicesFramework;\r\n    private xhr = new XMLHttpRequest();\r\n\r\n    constructor() {\r\n        this.servicesFramework = new DnnServicesFramework(state.moduleId);\r\n    }\r\n\r\n    componentDidLoad() {\r\n        this.uploadFile()\r\n            .then(response => {\r\n                this.fileUploadResults = JSON.parse(response);\r\n                if (this.fileUploadResults.message === null){\r\n                    this.successMessage = state.localization.FileUploadedMessage;\r\n                    setTimeout(() => {\r\n                        this.dismiss();\r\n                    }, 3000);\r\n                    return;\r\n                }\r\n            })\r\n            .catch(err => console.log(err));\r\n    }\r\n\r\n    private dismiss() {\r\n        return new Promise<void>((resolve, reject) => {\r\n            try {\r\n                this.el.style.transition = 'all 1s ease-in-out';\r\n                this.el.style.overflow = 'hidden';\r\n                this.el.style.height = this.el.offsetHeight.toFixed(2) + 'px';\r\n                requestAnimationFrame(() => {\r\n                    this.el.style.height = \"0\";\r\n                    this.el.style.opacity = \"0\";\r\n                    this.el.style.border = \"0\";\r\n                });\r\n                setTimeout(() => {\r\n                    resolve();\r\n                }, 1000);\r\n            }\r\n            catch (error) {\r\n                reject(error);\r\n            }\r\n        });\r\n    }\r\n\r\n    private uploadFile(){\r\n        return new Promise<string>((resolve, reject) => {\r\n            const extension = this.file.name.split('.').pop().toLowerCase();\r\n            if (this.filter.split(',').indexOf(extension) === -1) {\r\n                const message = `'.${extension}' ${state.localization.InvalidExtensionMessage}`;\r\n                this.fileUploadResults = {\r\n                    alreadyExists: false,\r\n                    message: message,\r\n                    fileIconUrl: undefined,\r\n                    fileName: this.file.name,\r\n                    fileId: -1,\r\n                    orientation: 0,\r\n                };\r\n                reject(message);\r\n                return;\r\n            }\r\n\r\n            if (this.file.size > this.maxUploadFileSize) {\r\n                const message = `${this.file.name} ${state.localization.FileSizeErrorMessage} ${getFileSize(this.maxUploadFileSize)}`;\r\n                this.fileUploadResults = {\r\n                    alreadyExists: false,\r\n                    message: message,\r\n                    fileIconUrl: undefined,\r\n                    fileName: this.file.name,\r\n                    fileId: -1,\r\n                    orientation: 0,\r\n                };\r\n                reject(message);\r\n                return;\r\n            }\r\n\r\n            const headers = this.servicesFramework.getModuleHeaders();\r\n\r\n            const formData = new FormData();\r\n            formData.append(\"folder\", state.currentItems.folder.folderPath);\r\n            formData.append(\"filter\", this.filter);\r\n            formData.append(\"extract\", this.extract ? \"true\" : \"false\");\r\n            formData.append(\"overwrite\", this.overwrite ? \"true\" : \"false\");\r\n            formData.append(\"validationCode\", this.validationCode);\r\n            formData.append(\"isHostPortal\", state.settings.IsHostPortal ? \"true\" : \"false\");\r\n            formData.append(\"postfile\", this.file);\r\n            this.xhr.onload = () => {\r\n                if (this.xhr.status === 200) {\r\n                    resolve(this.xhr.response);\r\n                } else {\r\n                    reject(this.xhr.statusText);\r\n                }\r\n            }\r\n\r\n            this.xhr.upload.onprogress = e => {\r\n                if (e.lengthComputable) {\r\n                    const percent = Math.round((e.loaded / e.total) * 100);\r\n                    this.progress = percent;\r\n                }\r\n            }\r\n\r\n            this.xhr.onabort = () => {\r\n                this.dismiss();\r\n            };\r\n\r\n            const url = this.servicesFramework.getServiceRoot('InternalServices') + 'FileUpload/UploadFromLocal';\r\n            this.xhr.open(\"POST\", url);\r\n            headers.forEach((value, key) => {\r\n                this.xhr.setRequestHeader(key, value);\r\n            });\r\n            this.xhr.send(formData);\r\n        });\r\n    }\r\n\r\n    handleOvewrite(): void {\r\n        this.overwrite = true;\r\n        this.fileUploadResults = null;\r\n        this.uploadFile()\r\n        .then(response => {\r\n            this.fileUploadResults = JSON.parse(response);\r\n            return this.dismiss();\r\n        })\r\n        .catch(err => alert(err));\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Host>\r\n                <div class=\"container\">\r\n                    <div class=\"preview\">\r\n                        {this.fileUploadResults && this.fileUploadResults.fileIconUrl &&\r\n                            <img src={this.fileUploadResults.fileIconUrl} />\r\n                        }\r\n                    </div>\r\n                    <div class=\"file\">\r\n                        <span>{this.file.name} ({getFileSize(this.file.size)})</span>\r\n                        {this.progress > 0 &&\r\n                            <div class=\"progress\">\r\n                                <div class=\"progress-bar\" style={{ width: `${this.progress}%` }}></div>\r\n                            </div>\r\n                        }\r\n                        {this.fileUploadResults && this.fileUploadResults.message &&\r\n                            <div class=\"warning\">\r\n                                <span>{this.fileUploadResults.message}</span>\r\n                                {this.fileUploadResults.alreadyExists &&\r\n                                    [\r\n                                    <dnn-button\r\n                                        type=\"primary\"\r\n                                        onClick={() => this.handleOvewrite()}\r\n                                    >\r\n                                        {state.localization.Overwrite}\r\n                                    </dnn-button>\r\n                                    ,\r\n                                    <dnn-button\r\n                                        type=\"primary\"\r\n                                        reversed\r\n                                        onClick={() => this.dismiss()}\r\n                                    >\r\n                                        {state.localization.Cancel}\r\n                                    </dnn-button>\r\n                                    ]\r\n                                }\r\n                            </div>\r\n                        }\r\n                        {this.successMessage &&\r\n                            <div class=\"success\">\r\n                                {this.successMessage}\r\n                            </div>\r\n                        }\r\n                    </div>\r\n                        {this.successMessage === undefined &&\r\n                            <div class=\"dismiss\">\r\n                                <button\r\n                                    title={state.localization.Cancel}\r\n                                    onClick={() => {\r\n                                        this.xhr.abort();\r\n                                        this.dismiss();\r\n                                    }}>\r\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"48\" width=\"48\"><path d=\"m28.55 44-2.15-2.15 5.7-5.65-5.7-5.65 2.15-2.15 5.65 5.7 5.65-5.7L42 30.55l-5.7 5.65 5.7 5.65L39.85 44l-5.65-5.7ZM6 31.5v-3h15v3Zm0-8.25v-3h23.5v3ZM6 15v-3h23.5v3Z\"/></svg>\r\n                                </button>\r\n                            </div>\r\n                        }\r\n                        {this.successMessage &&\r\n                            <div class=\"uploaded\">\r\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"48\" width=\"48\" class=\"success\">\r\n                                    <path d=\"M21.05 33.1 35.2 18.95l-2.3-2.25-11.85 11.85-6-6-2.25 2.25ZM24 44q-4.1 0-7.75-1.575-3.65-1.575-6.375-4.3-2.725-2.725-4.3-6.375Q4 28.1 4 24q0-4.15 1.575-7.8 1.575-3.65 4.3-6.35 2.725-2.7 6.375-4.275Q19.9 4 24 4q4.15 0 7.8 1.575 3.65 1.575 6.35 4.275 2.7 2.7 4.275 6.35Q44 19.85 44 24q0 4.1-1.575 7.75-1.575 3.65-4.275 6.375t-6.35 4.3Q28.15 44 24 44Zm0-3q7.1 0 12.05-4.975Q41 31.05 41 24q0-7.1-4.95-12.05Q31.1 7 24 7q-7.05 0-12.025 4.95Q7 16.9 7 24q0 7.05 4.975 12.025Q16.95 41 24 41Zm0-17Z\"/>\r\n                                </svg>\r\n                            </div>\r\n                        }\r\n                </div>\r\n            </Host>\r\n        );\r\n    }\r\n}\r\n",":host {\r\n  display: block;\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n}\r\ndnn-rm-files-pane{\r\n  flex-grow: 1;\r\n}\r\n","import { Component, Host, h } from '@stencil/core';\r\n\r\n@Component({\r\n  tag: 'dnn-rm-right-pane',\r\n  styleUrl: 'dnn-rm-right-pane.scss',\r\n  shadow: true,\r\n})\r\nexport class DnnRmRightPane {\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <dnn-rm-actions-bar></dnn-rm-actions-bar>\r\n        <dnn-rm-files-pane></dnn-rm-files-pane>\r\n        <dnn-rm-status-bar></dnn-rm-status-bar>\r\n      </Host>\r\n    );\r\n  }\r\n\r\n}\r\n",":host {\r\n  display: block;\r\n  \r\n  .status-bar {\r\n    display: flex;\r\n    flex-direction: row;\r\n    align-items: center;\r\n    justify-content: flex-start;\r\n    padding: 0.3rem 0.5rem;\r\n    background-color: #f5f5f5;\r\n    border-bottom: 1px solid #e5e5e5;\r\n    box-shadow: 0 1px 0 rgb(0 0 0 / 5%);\r\n    z-index: 1;\r\n  }\r\n}\r\n","import { Component, Host, h } from '@stencil/core';\r\nimport state from '../../store/store';\r\n@Component({\r\n  tag: 'dnn-rm-status-bar',\r\n  styleUrl: 'dnn-rm-status-bar.scss',\r\n  shadow: true,\r\n})\r\nexport class DnnRmStatusBar {\r\n\r\n  private getLocalizedStatusBarMessage(): string {\r\n    return state.localization.StatusBarMessage\r\n      .replace('{0}', state.currentItems?.items.length.toString())\r\n      .replace('{1}', state.currentItems?.totalCount.toString());\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div class=\"status-bar\">\r\n          {this.getLocalizedStatusBarMessage()}\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n\r\n}\r\n",":host {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  background-color: var(--dnn-color-primary);\r\n  color: var(--dnn-color-primary-contrast);\r\n  padding: 0.5em 1em;\r\n  gap: 1em;\r\n}\r\n\r\nbutton{\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  border: none;\r\n  padding: 0;\r\n  margin: 0;\r\n  background-color: transparent;\r\n  cursor: pointer;\r\n  svg{\r\n    fill: var(--dnn-color-primary-contrast);\r\n  }\r\n}\r\n","import { Component, Host, h, } from '@stencil/core';\r\nimport state from '../../store/store';\r\nimport { ItemsClient } from \"../../services/ItemsClient\";\r\n@Component({\r\n  tag: 'dnn-rm-top-bar',\r\n  styleUrl: 'dnn-rm-top-bar.scss',\r\n  shadow: true,\r\n})\r\nexport class DnnRmTopBar {\r\n\r\n  private itemsClient: ItemsClient;\r\n\r\n  constructor(){\r\n    this.itemsClient = new ItemsClient(state.moduleId);\r\n  }\r\n\r\n  private handleSearchChanged(e: CustomEvent<any>): void {\r\n    if (e.detail != \"\"){\r\n      state.itemsSearchTerm = e.detail;\r\n      this.itemsClient.search(\r\n        state.currentItems.folder.folderId, e.detail,\r\n        0,\r\n        state.pageSize,\r\n        state.sortField)\r\n      .then(data =>{\r\n        state.currentItems = {\r\n          ...state.currentItems,\r\n          totalCount: data.totalCount,\r\n          items: data.items,\r\n        };\r\n        state.lastSearchRequestedPage = 1;\r\n      })\r\n      .catch(reason => console.error(reason));\r\n    }\r\n    else\r\n    {\r\n      this.itemsClient.getFolderContent(\r\n        state.currentItems.folder.folderId,\r\n        0,\r\n        state.pageSize,\r\n        state.sortField)\r\n      .then(data => {\r\n        state.lastSearchRequestedPage = 1;\r\n        state.itemsSearchTerm = undefined;\r\n        state.currentItems = data;\r\n      })\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <dnn-searchbox onQueryChanged={e => this.handleSearchChanged(e)}></dnn-searchbox>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n.general{\r\n  display: flex;\r\n  .left{\r\n    max-width: 256px;\r\n    border-right: 1px solid lightgray;\r\n    padding: 1em;\r\n    img{\r\n      width: 100%;\r\n    }\r\n  }\r\n  .right{\r\n    padding: 1em;\r\n  }\r\n}\r\n\r\n.form{\r\n  display: grid;\r\n  grid-template-columns: 1fr 2fr;\r\n  align-items: flex-end;\r\n  label{\r\n    font-weight: bold;\r\n    text-align: right;\r\n    margin-right: 0.5em;\r\n    &::after{\r\n      content: ':';\r\n    }\r\n    align-self: flex-start;\r\n  }\r\n  input, textarea{\r\n    margin-top: 0.5em;\r\n  }\r\n}\r\n\r\n.controls{\r\n  margin-top: 2em;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 1em;\r\n}\r\n","import { Component, Element, Event, EventEmitter, Host, h, Prop, State } from '@stencil/core';\r\nimport { Item, ItemsClient } from '../../services/ItemsClient';\r\nimport state from '../../store/store';\r\n\r\n@Component({\r\n  tag: 'dnn-rm-unlink-items',\r\n  styleUrl: 'dnn-rm-unlink-items.scss',\r\n  shadow: true,\r\n})\r\nexport class DnnRmUnlinkItems {\r\n\r\n  /** The list of items to delete. */\r\n  @Prop() items!: Item[];\r\n\r\n  /**\r\n  * Fires when there is a possibility that some folders have changed.\r\n  * Can be used to force parts of the UI to refresh.\r\n  */\r\n  @Event() dnnRmFoldersChanged: EventEmitter<void>;\r\n  \r\n  @Element() el: HTMLDnnRmUnlinkItemsElement;\r\n  \r\n  @State() unlinking: boolean;\r\n  @State() unlinkedCount: number = 0;\r\n  @State() currentItemName: string;\r\n  \r\n  private itemsClient: ItemsClient;\r\n\r\n  constructor() {\r\n    this.itemsClient = new ItemsClient(state.moduleId);\r\n  }\r\n\r\n  private closeModal(): void {\r\n    const modal = this.el.parentElement as HTMLDnnModalElement;\r\n    modal.hide().then(() => {\r\n      setTimeout(() => {\r\n        document.body.removeChild(modal);\r\n      }, 300);\r\n    });\r\n  }\r\n\r\n  private handleUnlink(): void {\r\n    this.unlinking = true;\r\n    this.items.forEach(item => {\r\n      this.itemsClient.deleteFolder({\r\n        FolderId: item.itemId,\r\n        UnlinkAllowedStatus: true,\r\n      })\r\n      .then(() => {\r\n        this.handleItemUnlinked(item);\r\n      })\r\n      .catch(reason => alert(reason));\r\n    });\r\n  }\r\n  \r\n  handleItemUnlinked(item: Item) {\r\n    this.unlinkedCount++;\r\n    this.currentItemName = item.itemName;\r\n    if (this.unlinkedCount == this.items.length) {\r\n      this.unlinking = false;\r\n      this.dnnRmFoldersChanged.emit();\r\n      this.closeModal();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <h2>{state.localization?.UnlinkFolders}</h2>\r\n        <p>{state.localization?.ConfirmUnlinkMessage}</p>\r\n        <ul>\r\n          {this.items.map(item => (\r\n            <li>{item.itemName}</li>\r\n          ))}\r\n        </ul>\r\n        {this.unlinking &&\r\n          <div>\r\n            <p>{state.localization?.UnlinkFolders} {this.unlinkedCount+1}/{state.selectedItems.length} ({this.currentItemName})</p>\r\n            <dnn-rm-progress-bar\r\n              max={state.selectedItems.length}\r\n              value={this.unlinkedCount}\r\n            />\r\n          </div>\r\n        }\r\n        <div class=\"controls\">\r\n          <dnn-button\r\n            type=\"primary\"\r\n            reversed\r\n            disabled={this.unlinking}\r\n            onClick={() => this.closeModal()}\r\n          >\r\n            {state.localization.Cancel}\r\n          </dnn-button>\r\n          <dnn-button\r\n            type=\"primary\"\r\n            onClick={() =>this.handleUnlink()}\r\n            disabled={this.unlinking}\r\n          >\r\n            {state.localization?.Unlink}\r\n          </dnn-button>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\r\n  display: block;\r\n}\r\n\r\ndnn-dropzone{\r\n  min-width: 65vw;\r\n}","import { Component, Host, h, Element, Event, EventEmitter, State } from '@stencil/core';\r\nimport { ItemsClient } from '../../services/ItemsClient';\r\nimport state from '../../store/store';\r\n\r\n@Component({\r\n  tag: 'dnn-rm-upload-file',\r\n  styleUrl: 'dnn-rm-upload-file.scss',\r\n  shadow: true,\r\n})\r\nexport class DnnRmUploadFile {\r\n\r\n  /**\r\n   * Fires when there is a possibility that some folders have changed.\r\n   * Can be used to force parts of the UI to refresh.\r\n   */\r\n  @Event() dnnRmFoldersChanged: EventEmitter<void>;\r\n\r\n  @State() queuedFiles : File[] = [];\r\n  @State() alreadyExistingFilesCount = 0;\r\n  @State() uploadingFilesCount = 0;\r\n  @State() uploadedFilesCount = 0;\r\n  @State() failedFilesCount = 0;\r\n\r\n  @Element() el: HTMLDnnRmUploadFileElement;\r\n\r\n  private itemsClient: ItemsClient;\r\n  private allowedExtensions: string;\r\n  private validationCode: string;\r\n  private maxUploadFileSize: number;\r\n  private extract = false;\r\n\r\n  constructor() {\r\n    this.itemsClient = new ItemsClient(state.moduleId);\r\n  }\r\n\r\n  componentWillLoad() {\r\n    this.itemsClient.getAllowedFileExtensions()\r\n      .then(data => {\r\n        this.allowedExtensions = data.allowedExtensions;\r\n        this.validationCode = data.validationCode;\r\n        this.maxUploadFileSize = data.maxUploadFileSize;\r\n      })\r\n      .catch(err => alert(err));\r\n  }\r\n\r\n  private handleFilesDropped(droppedFiles: File[]): void {\r\n    droppedFiles.forEach(file =>{\r\n      this.queuedFiles = [...this.queuedFiles, file as File];\r\n    });\r\n  }\r\n  \r\n  render() {\r\n    return (\r\n      <Host>\r\n        <h2>{state.localization.Upload}</h2>\r\n        <label>\r\n          <dnn-checkbox onClick={() => this.extract = !this.extract}>\r\n          {state.localization.ExtractUploads}\r\n          </dnn-checkbox>\r\n        </label>\r\n        <dnn-dropzone\r\n          onFilesSelected={e => this.handleFilesDropped(e.detail)}\r\n        />\r\n        {this.allowedExtensions && this.validationCode && this.queuedFiles.map(file => \r\n          <dnn-rm-queued-file\r\n            file={file}\r\n            validationCode={this.validationCode}\r\n            filter={this.allowedExtensions}\r\n            extract={this.extract}\r\n            maxUploadFileSize={this.maxUploadFileSize}\r\n          />\r\n        )}\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n",":host {\n  position: relative;\n  display: flex;\n  justify-content: space-between;\n  --background-color: transparent;\n  --color: #333;\n  --border-size: 1px;\n  --border-color: grey;\n  --border-active-color: black;\n  --border-radius: var(--dnn-controls-radius, 5px);\n  --padding: var(--dnn-controls-padding, 5px);\n  --focus-color: var(--dnn-color-primary, blue);\n}\n:host input {\n  width: 100%;\n  border: var(--border-size) solid var(--border-color);\n  outline: none;\n  border-radius: var(--border-radius);\n  padding: var(--padding);\n  padding-right: 32px;\n  transition: all 300ms ease-in-out;\n}\n:host input:focus, :host input:hover {\n  outline: none;\n  box-shadow: 0 0 2px 2px var(--focus-color);\n}\n:host svg {\n  position: absolute;\n  top: 0;\n  right: 0;\n  height: 100%;\n  transform: scale(0.7);\n  fill: var(--color);\n  outline: var(--color);\n  color: var(--color);\n  transition: all 300ms ease-in-out;\n}\n:host button {\n  background: transparent;\n  border: 0;\n  margin: 0;\n  padding: 0;\n}\n:host button:focus svg, :host button:hover svg {\n  fill: var(--focus-color);\n  outline: var(--focus-color);\n  color: var(--focus-color);\n}","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\")\n    r = Reflect.decorate(decorators, target, key, desc);\n  else\n    for (var i = decorators.length - 1; i >= 0; i--)\n      if (d = decorators[i])\n        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Host, h } from '@stencil/core';\nimport { Debounce } from '../../utilities/debounce';\nexport class DnnSearchbox {\n  constructor() {\n    /**\n     * Sets the field placeholder text.\n     */\n    this.placeholder = \"\";\n    /**\n     * Debounces the queryChanged by 500ms.\n     */\n    this.debounced = true;\n    /** Sets the query */\n    this.query = \"\";\n  }\n  fireQueryChanged() {\n    if (this.debounced) {\n      this.debouncedHandleQueryChanged();\n    }\n    else {\n      this.handleQueryChanged();\n    }\n  }\n  handleQueryChanged() {\n    this.queryChanged.emit(this.query);\n  }\n  debouncedHandleQueryChanged() {\n    this.handleQueryChanged();\n  }\n  render() {\n    return (h(Host, null, h(\"input\", { type: \"text\", value: this.query, placeholder: this.placeholder, onInput: e => this.query = e.target.value }), this.query !== \"\" ?\n      h(\"button\", { class: \"svg clear\", onClick: () => this.query = \"\" }, h(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", height: \"24px\", viewBox: \"0 0 24 24\", width: \"24px\", fill: \"#000000\" }, h(\"path\", { d: \"M0 0h24v24H0z\", fill: \"none\" }), h(\"path\", { d: \"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z\" })))\n      :\n        h(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", height: \"24px\", viewBox: \"0 0 24 24\", width: \"24px\", fill: \"#000000\" }, h(\"path\", { d: \"M0 0h24v24H0z\", fill: \"none\" }), h(\"path\", { d: \"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\" }))));\n  }\n  static get is() { return \"dnn-searchbox\"; }\n  static get encapsulation() { return \"shadow\"; }\n  static get originalStyleUrls() {\n    return {\n      \"$\": [\"dnn-searchbox.scss\"]\n    };\n  }\n  static get styleUrls() {\n    return {\n      \"$\": [\"dnn-searchbox.css\"]\n    };\n  }\n  static get properties() {\n    return {\n      \"placeholder\": {\n        \"type\": \"string\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"string\",\n          \"resolved\": \"string\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": true,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"Sets the field placeholder text.\"\n        },\n        \"attribute\": \"placeholder\",\n        \"reflect\": false,\n        \"defaultValue\": \"\\\"\\\"\"\n      },\n      \"debounced\": {\n        \"type\": \"boolean\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"boolean\",\n          \"resolved\": \"boolean\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"Debounces the queryChanged by 500ms.\"\n        },\n        \"attribute\": \"debounced\",\n        \"reflect\": false,\n        \"defaultValue\": \"true\"\n      },\n      \"query\": {\n        \"type\": \"string\",\n        \"mutable\": true,\n        \"complexType\": {\n          \"original\": \"string\",\n          \"resolved\": \"string\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"Sets the query\"\n        },\n        \"attribute\": \"query\",\n        \"reflect\": false,\n        \"defaultValue\": \"\\\"\\\"\"\n      }\n    };\n  }\n  static get events() {\n    return [{\n        \"method\": \"queryChanged\",\n        \"name\": \"queryChanged\",\n        \"bubbles\": true,\n        \"cancelable\": true,\n        \"composed\": true,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"Fires up each time the search query changes.\\nThe data passed is the new query.\"\n        },\n        \"complexType\": {\n          \"original\": \"string\",\n          \"resolved\": \"string\",\n          \"references\": {}\n        }\n      }];\n  }\n  static get watchers() {\n    return [{\n        \"propName\": \"query\",\n        \"methodName\": \"fireQueryChanged\"\n      }];\n  }\n}\n__decorate([\n  Debounce(500)\n], DnnSearchbox.prototype, \"debouncedHandleQueryChanged\", null);\n//# sourceMappingURL=dnn-searchbox.js.map\n",null,"import { Host, h } from \"@stencil/core\";\n/** Represents a single tab and must be used inside a dnn-tabs element. */\nexport class DnnTab {\n  constructor() {\n    this.visible = false;\n  }\n  /** Shows the tab. */\n  async show() {\n    this.visible = true;\n  }\n  /** Hides the modal */\n  async hide() {\n    this.visible = false;\n  }\n  render() {\n    return (h(Host, null, this.visible &&\n      h(\"slot\", null)));\n  }\n  static get is() { return \"dnn-tab\"; }\n  static get encapsulation() { return \"shadow\"; }\n  static get originalStyleUrls() {\n    return {\n      \"$\": [\"dnn-tab.scss\"]\n    };\n  }\n  static get styleUrls() {\n    return {\n      \"$\": [\"dnn-tab.css\"]\n    };\n  }\n  static get properties() {\n    return {\n      \"tabTitle\": {\n        \"type\": \"string\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"string\",\n          \"resolved\": \"string\",\n          \"references\": {}\n        },\n        \"required\": true,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"Defines the tab title.\"\n        },\n        \"attribute\": \"tab-title\",\n        \"reflect\": false\n      }\n    };\n  }\n  static get states() {\n    return {\n      \"visible\": {}\n    };\n  }\n  static get methods() {\n    return {\n      \"show\": {\n        \"complexType\": {\n          \"signature\": \"() => Promise<void>\",\n          \"parameters\": [],\n          \"references\": {\n            \"Promise\": {\n              \"location\": \"global\"\n            }\n          },\n          \"return\": \"Promise<void>\"\n        },\n        \"docs\": {\n          \"text\": \"Shows the tab.\",\n          \"tags\": []\n        }\n      },\n      \"hide\": {\n        \"complexType\": {\n          \"signature\": \"() => Promise<void>\",\n          \"parameters\": [],\n          \"references\": {\n            \"Promise\": {\n              \"location\": \"global\"\n            }\n          },\n          \"return\": \"Promise<void>\"\n        },\n        \"docs\": {\n          \"text\": \"Hides the modal\",\n          \"tags\": []\n        }\n      }\n    };\n  }\n}\n//# sourceMappingURL=dnn-tab.js.map\n",":host {\n  /**\n  * @prop --color-background: The color of the inactive tabs.\n  * @prop --color-text: The color of the text for inactive tabs.\n  * @prop --color-visible: The color of the active tab.\n  * @prop --color-visible-text: The color of the text for the active tab.\n  * @prop --color-focus: outline color when hovering or pre-selecting a tab.\n  */\n  display: block;\n  --color-background: var(--dnn-color-secondary-dark, lightgray);\n  --color-text: var(--dnn-color-secondary-contrast, #333);\n  --color-visible: var(--dnn-color-primary, #3792ED);\n  --color-visible-text: var(--dnn-color-primary-contrast, #FFF);\n  --color-focus: var(--dnn-color-primary, #3792ed);\n}\n\n.tabTitles {\n  display: flex;\n  background-color: var(--color-background);\n  color: var(--color-text);\n}\n.tabTitles button {\n  padding: 0.5rem 1rem;\n  border: 0;\n  margin: 0;\n  background-color: transparent;\n}\n.tabTitles button.visible {\n  background-color: var(--color-visible);\n  color: var(--color-bisible-text);\n}\n.tabTitles button:focus, .tabTitles button:hover {\n  outline: none;\n  box-shadow: 0 0 2px 2px var(--color-focus);\n}\n\n.currentTab {\n  border: 1px solid var(--color-background);\n}","import { Host, h } from \"@stencil/core\";\nexport class DnnTabs {\n  constructor() {\n    this.tabTitles = [];\n    this.selectedTabTitle = \"\";\n  }\n  componentDidLoad() {\n    requestAnimationFrame(() => {\n      this.updateTitles();\n      this.showFirstTab();\n    });\n  }\n  getTabs() {\n    return this.component.shadowRoot.querySelector(\"slot\").assignedElements();\n  }\n  updateTitles() {\n    const tabs = this.getTabs();\n    tabs.forEach(tab => this.tabTitles = [...this.tabTitles, tab.tabTitle]);\n  }\n  showFirstTab() {\n    const tab = this.getTabs()[0];\n    tab.show();\n    this.selectedTabTitle = tab.tabTitle;\n  }\n  showTab(tabTitle) {\n    const tabs = this.getTabs();\n    tabs.forEach(tab => {\n      if (tab.tabTitle == tabTitle) {\n        tab.show();\n        return;\n      }\n      tab.hide();\n    });\n    this.selectedTabTitle = tabTitle;\n  }\n  render() {\n    return (h(Host, { ref: el => this.component = el }, h(\"div\", { class: \"tabTitles\" }, this.tabTitles.map(tabTitle => h(\"button\", { class: this.selectedTabTitle == tabTitle ? \"visible\" : \"\", onClick: () => this.showTab(tabTitle) }, tabTitle))), h(\"div\", { class: \"currentTab\" }, h(\"slot\", null))));\n  }\n  static get is() { return \"dnn-tabs\"; }\n  static get encapsulation() { return \"shadow\"; }\n  static get originalStyleUrls() {\n    return {\n      \"$\": [\"dnn-tabs.scss\"]\n    };\n  }\n  static get styleUrls() {\n    return {\n      \"$\": [\"dnn-tabs.css\"]\n    };\n  }\n  static get states() {\n    return {\n      \"tabTitles\": {},\n      \"selectedTabTitle\": {}\n    };\n  }\n}\n//# sourceMappingURL=dnn-tabs.js.map\n",":host {\n  display: flex;\n  overflow: visible;\n}\n\n.expander {\n  width: 24px;\n  height: 24px;\n}\n.expander button {\n  transition: all 150ms ease-in-out;\n  background-color: transparent;\n  border: none;\n  padding: 0;\n  margin: 0;\n  height: 1em;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n  position: relative;\n  top: 2px;\n}\n.expander button svg :first-child {\n  transition: all 150ms ease-in-out;\n  fill: white;\n  stroke: black;\n}\n.expander.expanded button {\n  transform: rotate(45deg);\n}\n.expander.expanded button svg :first-child {\n  fill: black;\n  stroke: black;\n}\n\ndiv.item .item-slot {\n  display: flex;\n  align-items: center;\n  gap: 0.25em;\n  min-height: 24px;\n}\ndiv.item div.children {\n  overflow: hidden;\n  height: 0;\n  transition: all 150ms ease-in-out;\n}","import { Host, h } from '@stencil/core';\n/**\n * @slot - The content of this node.\n * @slot children - The content nested under this node.\n*/\nexport class DnnTreeviewItem {\n  constructor() {\n    /** Defines if the current node is expanded.  */\n    this.expanded = false;\n    /** Manages state for whether or not item has children. */\n    this.hasChildren = false;\n  }\n  /** Watch expanded Prop */\n  watchExpanded(expanded) {\n    if (expanded) {\n      this.expander.classList.add(\"expanded\");\n      this.collapsible.expanded = true;\n      return;\n    }\n    this.expander.classList.remove(\"expanded\");\n    this.collapsible.expanded = false;\n  }\n  componentDidLoad() {\n    requestAnimationFrame(() => {\n      const child = this.childElement.children[0];\n      const count = child.assignedElements().length;\n      if (count > 0) {\n        this.hasChildren = true;\n      }\n      if (this.expanded) {\n        this.expander.classList.add(\"expanded\");\n        this.collapsible.expanded = false;\n        setTimeout(() => {\n          this.collapsible.expanded = true;\n        }, 300);\n      }\n    });\n  }\n  toggleCollapse() {\n    this.expanded = !this.expanded;\n    if (this.expanded) {\n      this.expander.classList.add(\"expanded\");\n      this.userExpanded.emit();\n      return;\n    }\n    this.expander.classList.remove(\"expanded\");\n    this.userCollapsed.emit();\n  }\n  render() {\n    return (h(Host, null, h(\"div\", { class: \"expander\", ref: el => this.expander = el }, this.hasChildren &&\n      h(\"button\", { onClick: () => this.toggleCollapse() }, h(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", height: \"24px\", viewBox: \"0 0 24 24\", width: \"24px\", fill: \"#000000\" }, h(\"path\", { d: \"M10 17l5-5-5-5v10z\" }), h(\"path\", { d: \"M0 24V0h24v24H0z\", fill: \"none\" })))), h(\"div\", { class: \"item\" }, h(\"div\", { class: \"item-slot\" }, h(\"slot\", null)), h(\"dnn-collapsible\", { ref: el => this.collapsible = el, expanded: this.expanded }, h(\"div\", { ref: el => this.childElement = el }, h(\"slot\", { name: \"children\" }))))));\n  }\n  static get is() { return \"dnn-treeview-item\"; }\n  static get encapsulation() { return \"shadow\"; }\n  static get originalStyleUrls() {\n    return {\n      \"$\": [\"dnn-treeview-item.scss\"]\n    };\n  }\n  static get styleUrls() {\n    return {\n      \"$\": [\"dnn-treeview-item.css\"]\n    };\n  }\n  static get properties() {\n    return {\n      \"expanded\": {\n        \"type\": \"boolean\",\n        \"mutable\": true,\n        \"complexType\": {\n          \"original\": \"boolean\",\n          \"resolved\": \"boolean\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"Defines if the current node is expanded.\"\n        },\n        \"attribute\": \"expanded\",\n        \"reflect\": true,\n        \"defaultValue\": \"false\"\n      }\n    };\n  }\n  static get states() {\n    return {\n      \"hasChildren\": {}\n    };\n  }\n  static get events() {\n    return [{\n        \"method\": \"userExpanded\",\n        \"name\": \"userExpanded\",\n        \"bubbles\": false,\n        \"cancelable\": true,\n        \"composed\": true,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"Fires when the user expands a node.\"\n        },\n        \"complexType\": {\n          \"original\": \"void\",\n          \"resolved\": \"void\",\n          \"references\": {}\n        }\n      }, {\n        \"method\": \"userCollapsed\",\n        \"name\": \"userCollapsed\",\n        \"bubbles\": false,\n        \"cancelable\": true,\n        \"composed\": true,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"Fires when the user collapses a node.\"\n        },\n        \"complexType\": {\n          \"original\": \"void\",\n          \"resolved\": \"void\",\n          \"references\": {}\n        }\n      }];\n  }\n  static get elementRef() { return \"el\"; }\n  static get watchers() {\n    return [{\n        \"propName\": \"expanded\",\n        \"methodName\": \"watchExpanded\"\n      }];\n  }\n}\n//# sourceMappingURL=dnn-treeview-item.js.map\n",":host {\n  /**\n    * @prop --background-color:  Defines the menu background color.\n    * @prop --foreground-color: A color that contrasts with the background color.\n  */\n  --background-color: var(--dnn-color-primary-contrast, white);\n  --foreground-color: var(--dnn-color-primary, #3792ED);\n  display: block;\n}\n\n.menu-container {\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  background-color: var(--background-color);\n}\n.menu-container .menu {\n  margin: 0.5em;\n  display: flex;\n  gap: 1em;\n  justify-content: flex-start;\n  align-items: center;\n  white-space: nowrap;\n  width: 100%;\n}\n.menu-container .overflow {\n  margin-left: auto;\n  position: relative;\n}\n.menu-container .overflow button {\n  cursor: pointer;\n  padding: 0;\n  margin: 0;\n  background-color: transparent;\n  border: none;\n}\n.menu-container .overflow button svg {\n  fill: var(--foreground-color);\n}\n.menu-container .overflow .dropdown {\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  white-space: nowrap;\n  right: 0;\n  transition: 100ms ease-in-out;\n  height: 0;\n  overflow: hidden;\n}\n.menu-container .overflow .dropdown.visible {\n  padding: 1em;\n  gap: 0.5em;\n  background-color: var(--background-color);\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);\n}","import { Host, h } from '@stencil/core';\nexport class DnnVerticalOverflowMenu {\n  constructor() {\n    this.showDropdownButton = false;\n    this.showDropdownMenu = false;\n    this.previousMenuWidth = 0;\n  }\n  componentDidRender() {\n    requestAnimationFrame(() => {\n      this.moveItemsToDropDownIfNecessery();\n      this.resizeObserver = new ResizeObserver(entries => {\n        for (let entry of entries) {\n          if (entry.contentRect.width < this.previousMenuWidth) {\n            this.moveItemsToDropDownIfNecessery();\n          }\n          if (this.previousMenuWidth > 0 && entry.contentRect.width > this.previousMenuWidth) {\n            this.moveItemsToMenuIfPossible();\n          }\n          this.previousMenuWidth = entry.contentRect.width;\n        }\n      });\n      this.resizeObserver.observe(this.element);\n    });\n  }\n  moveItemsToDropDownIfNecessery() {\n    const menuItems = Array.from(this.menu.querySelector(\"slot\").assignedElements());\n    const availableWidth = this.menu.getBoundingClientRect().width;\n    let neededWidth = parseFloat(getComputedStyle(this.element).fontSize) * 2;\n    menuItems.forEach(item => neededWidth += this.getFullWidth(item));\n    neededWidth += (menuItems.length - 1) * parseFloat(getComputedStyle(this.element).fontSize);\n    if (neededWidth > availableWidth) {\n      this.showDropdownButton = true;\n      var lastItem = menuItems[menuItems.length - 1];\n      if (this.dropdown == undefined) {\n        return;\n      }\n      lastItem.slot = \"dropdown\";\n      this.moveItemsToDropDownIfNecessery();\n    }\n  }\n  moveItemsToMenuIfPossible() {\n    if (this.dropdown == undefined || !this.dropdown.hasChildNodes()) {\n      return;\n    }\n    const menuItems = Array.from(this.menu.querySelector(\"slot\").assignedElements());\n    const availableWidth = this.menu.getBoundingClientRect().width;\n    let neededWidth = parseFloat(getComputedStyle(this.element).fontSize) * 2;\n    neededWidth += (menuItems.length - 1) * parseFloat(getComputedStyle(this.element).fontSize);\n    menuItems.forEach(item => neededWidth += this.getFullWidth(item));\n    const firstItem = this.dropdown.querySelector(\"slot\").assignedElements()[0];\n    if (firstItem != undefined) {\n      neededWidth += this.getFullWidth(firstItem);\n    }\n    if (neededWidth < availableWidth) {\n      if (firstItem != undefined) {\n        firstItem.slot = \"\";\n      }\n      if (firstItem == undefined) {\n        this.dropdown.classList.remove(\"visible\");\n        this.showDropdownMenu = false;\n        this.showDropdownButton = false;\n      }\n    }\n  }\n  getFullWidth(item) {\n    var width = item.getBoundingClientRect().width;\n    var styles = getComputedStyle(item);\n    width += parseFloat(styles.marginLeft);\n    width += parseFloat(styles.marginRight);\n    width += parseFloat(styles.paddingLeft);\n    width += parseFloat(styles.paddingRight);\n    return width;\n  }\n  toggleOverflowMenu() {\n    this.showDropdownMenu = !this.showDropdownMenu;\n    if (this.showDropdownMenu) {\n      this.dropdown.classList.add(\"visible\");\n      let contentHeight = 0;\n      const items = Array.from(this.dropdown.querySelector(\"slot\").assignedElements());\n      items.forEach(item => contentHeight += item.getBoundingClientRect().height);\n      const emHeight = parseFloat(getComputedStyle(this.dropdown).fontSize);\n      const gapsHeight = emHeight * (this.dropdown.children.length - 1) / 2;\n      contentHeight += gapsHeight;\n      const marginHeight = emHeight * 2;\n      contentHeight += marginHeight;\n      this.dropdown.style.height = `${contentHeight}px`;\n      const dismissMenu = (e) => {\n        const buttonRect = this.button.getBoundingClientRect();\n        if (e.clientX < buttonRect.left ||\n          e.clientX > buttonRect.right ||\n          e.clientY < buttonRect.top ||\n          e.clientY > buttonRect.bottom) {\n          this.toggleOverflowMenu();\n        }\n        document.removeEventListener(\"click\", dismissMenu);\n      };\n      setTimeout(() => {\n        document.addEventListener(\"click\", dismissMenu, false);\n      }, 100);\n    }\n    else {\n      this.dropdown.classList.remove(\"visible\");\n      this.dropdown.style.height = \"0px\";\n    }\n  }\n  render() {\n    return (h(Host, null, h(\"div\", { class: \"menu-container\" }, h(\"div\", { class: \"menu\", ref: el => this.menu = el }, h(\"slot\", null)), this.showDropdownButton &&\n      h(\"div\", { class: \"overflow\" }, h(\"button\", { ref: el => this.button = el, class: \"icon\", onClick: () => this.toggleOverflowMenu() }, h(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", height: \"24px\", viewBox: \"0 0 24 24\", width: \"24px\", fill: \"#000000\" }, h(\"path\", { d: \"M0 0h24v24H0z\", fill: \"none\" }), h(\"path\", { d: \"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\" }))), h(\"div\", { class: \"dropdown\", ref: el => this.dropdown = el }, h(\"slot\", { name: \"dropdown\" }))))));\n  }\n  static get is() { return \"dnn-vertical-overflow-menu\"; }\n  static get encapsulation() { return \"shadow\"; }\n  static get originalStyleUrls() {\n    return {\n      \"$\": [\"dnn-vertical-overflow-menu.scss\"]\n    };\n  }\n  static get styleUrls() {\n    return {\n      \"$\": [\"dnn-vertical-overflow-menu.css\"]\n    };\n  }\n  static get states() {\n    return {\n      \"showDropdownButton\": {},\n      \"showDropdownMenu\": {}\n    };\n  }\n  static get elementRef() { return \"element\"; }\n}\n//# sourceMappingURL=dnn-vertical-overflow-menu.js.map\n",":host {\n  /**\n    * @prop --left-pane-background-color:  Allows customizing the left pane background-color\n    * @prop --right-pane-background-color: Allows customizing the right pane background-color\n  */\n  display: flex;\n  align-items: stretch;\n  margin: 0 auto;\n  position: relative;\n  --left-pane-background-color: transparent;\n  --right-pane-background-color: transparent;\n}\n\nbutton {\n  border: none;\n  margin: 0;\n  padding: 0;\n  cursor: ew-resize;\n  position: absolute;\n  height: 100%;\n  background-color: transparent;\n}\nbutton.transition {\n  transition: all 300ms ease-in-out;\n}\n\n.pane {\n  overflow-y: auto;\n}\n.pane.transition {\n  transition: all 300ms ease-in-out;\n}\n.pane.left {\n  background-color: var(--left-pane-background-color);\n}\n.pane.right {\n  background-color: var(--right-pane-background-color);\n  flex-grow: 1;\n}","import { Host, h } from '@stencil/core';\nimport { getMovementFromEvent } from \"../../utilities/mouseUtilities\";\n/**\n * @slot default - The split divider control you want to use.\n * @slot left - The content of the left pane.\n * @slot right - The content of the right pane.\n */\nexport class DnnVerticalSplitview {\n  constructor() {\n    /** The width of the splitter area. */\n    this.splitterWidth = 16;\n    /** The percentage position of the splitter in the container. */\n    this.splitWidthPercentage = 30;\n    this.leftWidth = 0;\n    this.rightWidth = 0;\n  }\n  /** Sets the width percentage of the divider */\n  async setSplitWidthPercentage(newWidth) {\n    const panes = this.element.shadowRoot.querySelectorAll(\".pane\");\n    requestAnimationFrame(() => {\n      panes.forEach(pane => pane.classList.add(\"transition\"));\n      this.splitter.classList.add(\"transition\");\n      requestAnimationFrame(() => {\n        const fullWidth = this.element.getBoundingClientRect().width;\n        let newLeft = fullWidth * newWidth / 100;\n        if (newLeft < 0) {\n          newLeft = 0;\n        }\n        if (newLeft > fullWidth) {\n          newLeft = fullWidth;\n        }\n        this.leftWidth = newLeft;\n        this.rightWidth = fullWidth - newLeft;\n        setTimeout(() => {\n          panes.forEach(pane => pane.classList.remove(\"transition\"));\n          this.splitter.classList.remove(\"transition\");\n        }, 300);\n      });\n    });\n  }\n  /** Gets the current divider position percentage. */\n  async getSplitWidthPercentage() {\n    const fullWidth = this.element.getBoundingClientRect().width;\n    return this.leftWidth / fullWidth;\n  }\n  componentDidLoad() {\n    requestAnimationFrame(() => {\n      this.resizeObserver = new ResizeObserver(() => {\n        const fullWidth = this.element.getBoundingClientRect().width;\n        this.leftWidth = fullWidth * this.splitWidthPercentage / 100;\n        this.rightWidth = fullWidth - this.leftWidth;\n        this.widthChanged.emit(this.splitWidthPercentage);\n      });\n      this.resizeObserver.observe(this.element);\n    });\n  }\n  handleMouseDown(event) {\n    event.preventDefault();\n    const handleDrag = (ev) => {\n      requestAnimationFrame(() => {\n        let fullWidth = this.element.getBoundingClientRect().width;\n        let { movementX } = getMovementFromEvent(ev, this.previousTouch);\n        let newLeft = this.leftWidth + movementX;\n        if (newLeft < 0) {\n          newLeft = 0;\n        }\n        if (newLeft > fullWidth) {\n          newLeft = fullWidth;\n        }\n        this.leftWidth = newLeft;\n        this.rightWidth = fullWidth - newLeft;\n        this.splitWidthPercentage = this.leftWidth / fullWidth * 100;\n      });\n    };\n    const handleDragFinished = () => {\n      document.removeEventListener(\"mousemove\", handleDrag);\n      document.removeEventListener(\"touchmove\", handleDrag);\n      const fullWidth = this.element.getBoundingClientRect().width;\n      const newPercentage = this.leftWidth / fullWidth * 100;\n      this.widthChanged.emit(newPercentage);\n    };\n    document.addEventListener(\"mouseup\", handleDragFinished);\n    document.addEventListener(\"touchend\", handleDragFinished);\n    document.addEventListener(\"mousemove\", handleDrag);\n    document.addEventListener(\"touchmove\", handleDrag);\n  }\n  handleKeyDown(e) {\n    let movementX = 0;\n    switch (e.key) {\n      case \"ArrowLeft\":\n        movementX = -10;\n        break;\n      case \"ArrowRight\":\n        movementX = 10;\n        break;\n      default:\n        return;\n    }\n    if (e.shiftKey) {\n      movementX = movementX * 10;\n    }\n    const fullWidth = this.element.getBoundingClientRect().width;\n    let newLeft = this.leftWidth + movementX;\n    if (newLeft < 0) {\n      newLeft = 0;\n    }\n    if (newLeft > fullWidth) {\n      newLeft = fullWidth;\n    }\n    this.leftWidth = newLeft;\n    this.rightWidth = fullWidth - this.leftWidth;\n  }\n  render() {\n    return (h(Host, null, h(\"div\", { class: \"left pane\", style: {\n        width: `${this.leftWidth}px`,\n      } }, h(\"slot\", { name: \"left\" })), h(\"button\", { onMouseDown: e => this.handleMouseDown(e), onTouchStart: e => this.handleMouseDown(e), onKeyDown: e => this.handleKeyDown(e), ref: el => this.splitter = el, style: {\n        minWidth: `${this.splitterWidth.toString()}px`,\n        left: `${this.leftWidth - 2}px`,\n      } }, h(\"slot\", null)), h(\"div\", { class: \"right pane\", style: {\n        width: `${this.rightWidth}px`,\n      } }, h(\"slot\", { name: \"right\" }))));\n  }\n  static get is() { return \"dnn-vertical-splitview\"; }\n  static get encapsulation() { return \"shadow\"; }\n  static get originalStyleUrls() {\n    return {\n      \"$\": [\"dnn-vertical-splitview.scss\"]\n    };\n  }\n  static get styleUrls() {\n    return {\n      \"$\": [\"dnn-vertical-splitview.css\"]\n    };\n  }\n  static get properties() {\n    return {\n      \"splitterWidth\": {\n        \"type\": \"number\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"number\",\n          \"resolved\": \"number\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"The width of the splitter area.\"\n        },\n        \"attribute\": \"splitter-width\",\n        \"reflect\": false,\n        \"defaultValue\": \"16\"\n      },\n      \"splitWidthPercentage\": {\n        \"type\": \"number\",\n        \"mutable\": true,\n        \"complexType\": {\n          \"original\": \"number\",\n          \"resolved\": \"number\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"The percentage position of the splitter in the container.\"\n        },\n        \"attribute\": \"split-width-percentage\",\n        \"reflect\": false,\n        \"defaultValue\": \"30\"\n      }\n    };\n  }\n  static get states() {\n    return {\n      \"leftWidth\": {},\n      \"rightWidth\": {}\n    };\n  }\n  static get events() {\n    return [{\n        \"method\": \"widthChanged\",\n        \"name\": \"widthChanged\",\n        \"bubbles\": true,\n        \"cancelable\": true,\n        \"composed\": true,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"Fires when the width of the divider changes.\"\n        },\n        \"complexType\": {\n          \"original\": \"number\",\n          \"resolved\": \"number\",\n          \"references\": {}\n        }\n      }];\n  }\n  static get methods() {\n    return {\n      \"setSplitWidthPercentage\": {\n        \"complexType\": {\n          \"signature\": \"(newWidth: number) => Promise<void>\",\n          \"parameters\": [{\n              \"tags\": [],\n              \"text\": \"\"\n            }],\n          \"references\": {\n            \"Promise\": {\n              \"location\": \"global\"\n            }\n          },\n          \"return\": \"Promise<void>\"\n        },\n        \"docs\": {\n          \"text\": \"Sets the width percentage of the divider\",\n          \"tags\": []\n        }\n      },\n      \"getSplitWidthPercentage\": {\n        \"complexType\": {\n          \"signature\": \"() => Promise<number>\",\n          \"parameters\": [],\n          \"references\": {\n            \"Promise\": {\n              \"location\": \"global\"\n            }\n          },\n          \"return\": \"Promise<number>\"\n        },\n        \"docs\": {\n          \"text\": \"Gets the current divider position percentage.\",\n          \"tags\": []\n        }\n      }\n    };\n  }\n  static get elementRef() { return \"element\"; }\n}\n//# sourceMappingURL=dnn-vertical-splitview.js.map\n"],"mappings":"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"}