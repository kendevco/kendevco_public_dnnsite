!function (x) { x.module("ui.bootstrap.contextMenu", []).service("CustomService", function () { "use strict"; return { initialize: function (t) { console.log("got here", t) } } }).directive("contextMenu", ["$parse", "$q", "CustomService", "$sce", function (t, f, u, e) { function p(t) { for (; g.length && (!t || g.length > t);)g.pop().remove(); 0 == g.length && h && h.remove() } function d(t, e, n, o, i, a, r, c, s, l) { "use strict"; var u = x.isArray(o[1]) || o[1] && x.isFunction(o[1].then) ? o[1] : x.isArray(o[2]) || o[2] && x.isFunction(o[2].then) ? o[2] : x.isArray(o[3]) || o[3] && x.isFunction(o[3].then) ? o[3] : null, d = "New Item"; "function" == typeof o[0] || "string" == typeof o[0] || void 0 !== o.text ? d = function (t, e, n, o, i, a, r, c) { "use strict"; var s = c('<a class="dropdown-item">'); s.css("padding-right", "8px"), s.attr({ tabindex: "-1", href: "#" }), "string" == typeof e[0] ? n = e[0] : "function" == typeof e[0] ? n = e[0].call(t, t, o, i) : void 0 !== e.text && (n = e.text); n = f.when(n); return a.push(n), n.then(function (t) { r && (s.css("cursor", "default"), s.append(c('<strong style="font-family:monospace;font-weight:bold;float:right;">&gt;</strong>'))), s.append(t) }), s }(t, o, d, e, n, r, u, s) : "function" == typeof o.html ? d = o.html(t) : void 0 !== o.html && (d = o.html), a.append(d), m(t, void 0 !== o.enabled ? o.enabled.call(t, t, e, n, d) : "function" != typeof o[2] || o[2].call(t, t, e, n, d), o, i, a, u, n, d, e, s, l) } var g = [], h = null, m = function (n, t, e, o, i, a, r, c, s, l, u) { var d; t ? (d = function (t) { p(u + 1); var e = { pageX: s.pageX + o[0].offsetWidth - 1, pageY: o[0].offsetTop + i[0].offsetTop - 3, view: s.view || window }; f.when(a).then(function (t) { v(n, e, t, r, u + 1) }) }, i.on("click", function (t) { t.preventDefault(), n.$apply(function () { a ? d() : (l(s.currentTarget).removeClass("context"), p(), (x.isFunction(e[1]) ? e[1] : e.click).call(n, n, s, r, c)) }) }), i.on("mouseover", function (t) { n.$apply(function () { a && d() }) })) : (i.on("click", function (t) { t.preventDefault() }), i.addClass("disabled")) }, v = function (n, o, t, i, a, e) { a = a || 0; var r = r || x.element; r(o.currentTarget).addClass("context"); var c = r("<div>"); h ? c = h : (h = c).addClass("angular-bootstrap-contextmenu dropdown clearfix"), e && c.addClass(e); var s = r("<ul>"); s.addClass("dropdown-menu"), s.attr({ role: "menu" }), s.css({ display: "block", position: "absolute", left: o.pageX + "px", top: o.pageY + "px", "z-index": 1e4 }); var l = []; x.forEach(t, function (t) { var e = r("<li>"); null === t ? e.addClass("divider") : "object" == typeof t[0] ? u.initialize(e, t) : d(n, o, i, t, s, e, l, 0, r, a), s.append(e) }), c.append(s); t = Math.max(document.body.scrollHeight, document.documentElement.scrollHeight, document.body.offsetHeight, document.documentElement.offsetHeight, document.body.clientHeight, document.documentElement.clientHeight); c.css({ width: "100%", height: t + "px", position: "absolute", top: 0, left: 0, zIndex: 9999, "max-height": window.innerHeight - 3 }), r(document).find("body").append(c), function (a, r) { "use strict"; f.all(l).then(function () { var t = r.pageY, e = x.element(a[0]).prop("offsetHeight"), n = r.view.innerHeight; e < t && n - t < e ? t = r.pageY - e : n <= e ? (x.element(a[0]).css({ height: n - 5, "overflow-y": "scroll" }), t = 0) : n - t < e && (t < (o = 5) && (o = t), t = n - e - o); var o, i = r.pageX, n = x.element(a[0]).prop("offsetWidth"), e = r.view.innerWidth; n < i && e - i - 5 < n ? i = e - n - 5 : e - i < n && (i < (o = 5) + 5 && (o = i + 5), i = e - n - o - 5), a.css({ display: "block", position: "absolute", left: i + "px", top: t + "px" }) }) }(s, o), c.on("mousedown", function (t) { r(t.target).hasClass("dropdown") && (r(o.currentTarget).removeClass("context"), p()) }).on("contextmenu", function (t) { r(t.currentTarget).removeClass("context"), t.preventDefault(), p(a) }), n.$on("$destroy", function () { p() }), g.push(s) }; return function (i, t, a) { var e = "contextmenu"; a.contextMenuOn && "string" == typeof a.contextMenuOn && (e = a.contextMenuOn), t.on(e, function (o) { return o.stopPropagation(), o.preventDefault(), (!("ontouchstart" in window || navigator.maxTouchPoints) || "true" !== t.attr("draggable")) && void i.$apply(function () { var t = i.$eval(a.contextMenu), e = a.contextMenuClass, n = i.$eval(a.model); if (!(t instanceof Array)) throw '"' + a.contextMenu + '" not an array'; 0 !== t.length && v(i, o, t, n, void 0, e) }) }) } }]) }(window.dnnsfAngular15 || window.angular);