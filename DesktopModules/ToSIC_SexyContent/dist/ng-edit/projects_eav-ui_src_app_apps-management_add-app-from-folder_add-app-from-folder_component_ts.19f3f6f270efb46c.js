"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_apps-management_add-app-from-folder_add-app-from-folder_component_ts"],{1205:(T,g,n)=>{n.r(g),n.d(g,{AddAppFromFolderComponent:()=>N});var d=n(253),F=n(6317),p=n(8977),I=n(6562),t=n(4874),D=n(2673),M=n(3158),y=n(745),b=n(1203),Z=n(635),E=n(5457),P=n(5904),w=n(4153),S=n(5446),e=n(3184),c=n(5590),x=n(2376);let r=(()=>{class s{agInit(o){this.name=o.value,this.tooltip=o.tooltipGetter(o.data)}refresh(o){return!0}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-app-name-show"]],decls:5,vars:2,consts:[[1,"name-box"],[1,"info-icon",3,"tippy"]],template:function(o,l){1&o&&(e.TgZ(0,"div",0)(1,"span"),e._uU(2),e.qZA(),e.TgZ(3,"mat-icon",1),e._uU(4,"info"),e.qZA()()),2&o&&(e.xp6(2),e.Oqu(l.name),e.xp6(1),e.Q6J("tippy",l.tooltip))},directives:[c.Hw,x.$],styles:[".name-box[_ngcontent-%COMP%]{display:flex;align-items:center}.info-icon[_ngcontent-%COMP%]{margin-left:7px;margin-bottom:3px}"]}),s})(),O=(()=>{class s{agInit(o){this.params=o}refresh(o){return!0}onChange(o){this.params.onChange(this.params.data,o.currentTarget.checked)}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-checkbox-cell"]],decls:2,vars:2,consts:[[1,"checkbox-box"],["type","checkbox",1,"checkbox-input",3,"disabled","checked","change"]],template:function(o,l){1&o&&(e.TgZ(0,"div",0)(1,"input",1),e.NdJ("change",function($){return l.onChange($)}),e.qZA()()),2&o&&(e.xp6(1),e.Q6J("disabled",l.params.isDisabled)("checked",l.params.value))},styles:[".checkbox-box[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center}.checkbox-input[_ngcontent-%COMP%]{height:15px;width:15px}"]}),s})();var A=n(5758),U=n(2528),a=n(5916),f=n(6362),i=n(9669),m=n(4680),C=n(7317);function h(s,u){1&s&&(e.TgZ(0,"p",4),e._uU(1," Nothing to show. All apps in the 2sxc folder are already installed. "),e.qZA())}function _(s,u){if(1&s&&(e.TgZ(0,"div",10),e._UZ(1,"ag-grid-angular",11),e.qZA()),2&s){const o=e.oxw().ngIf,l=e.oxw();e.xp6(1),e.Q6J("rowData",o.pendingApps)("gridOptions",l.gridOptions)}}function B(s,u){if(1&s){const o=e.EpF();e.ynx(0),e.TgZ(1,"div",1)(2,"div",2),e._uU(3,"Add App from Folder"),e.qZA()(),e._UZ(4,"app-feature-text-info",3),e.TgZ(5,"p",4),e._uU(6," Select an app from the apps-folder which has been copied there (or git-cloned) but not installed yet. "),e.qZA(),e.YNc(7,h,2,0,"p",5),e.YNc(8,_,2,2,"div",6),e.TgZ(9,"div",7)(10,"button",8),e.NdJ("click",function(){return e.CHM(o),e.oxw().closeDialog()}),e._uU(11," Cancel "),e.qZA(),e.TgZ(12,"button",9),e.NdJ("click",function(){return e.CHM(o),e.oxw().install()}),e._uU(13," Install "),e.qZA()(),e.BQk()}if(2&s){const o=u.ngIf,l=e.oxw();e.xp6(4),e.Q6J("featureNameId","AppSyncWithSiteFiles"),e.xp6(3),e.Q6J("ngIf",0==(null==o.pendingApps?null:o.pendingApps.length)),e.xp6(1),e.Q6J("ngIf",(null==o.pendingApps?null:o.pendingApps.length)>0),e.xp6(4),e.Q6J("disabled",0===l.pendingApps.length||l.installing)}}let N=(()=>{class s extends P.f{constructor(o,l,v,$){super(),this.dialogRef=o,this.appsListService=l,this.snackBar=v,this.featuresService=$,this.hostClass="dialog-component",this.gridOptions=this.buildGridOptions(),this.pendingApps=[],this.installing=!1,this.refreshApps$=new d.x,this.isAddFromFolderEnabled$=new F.X(!1)}ngOnInit(){this.subscription.add(this.featuresService.isEnabled$(E.C.AppSyncWithSiteFiles).pipe((0,p.x)()).subscribe(this.isAddFromFolderEnabled$)),this.viewModel$=(0,I.a)([this.refreshApps$.pipe((0,t.O)(void 0),(0,D.w)(()=>this.appsListService.getPendingApps().pipe((0,M.K)(()=>(0,y.of)(void 0)))),(0,b.B)())]).pipe((0,Z.U)(([o])=>({pendingApps:o})))}ngOnDestroy(){this.refreshApps$.complete(),super.ngOnDestroy()}closeDialog(){this.dialogRef.close()}onChange(o,l){l?this.pendingApps.push(o):this.pendingApps.splice(this.pendingApps.indexOf(o),1)}install(){this.installing=!0,this.snackBar.open("Installing",void 0,{duration:2e3}),this.appsListService.installPendingApps(this.pendingApps).subscribe({error:()=>{this.installing=!1,this.snackBar.open("Failed to install app. Please check console for more information",void 0,{duration:3e3})},next:()=>{this.installing=!1,this.snackBar.open("Installed app",void 0,{duration:2e3}),this.closeDialog()}})}buildGridOptions(){return Object.assign(Object.assign({},w.f),{columnDefs:[{field:"",width:40,cellClass:"no-outline",sortable:!0,cellRenderer:O,cellRendererParams:()=>({isDisabled:!this.isAddFromFolderEnabled$.value,onChange:(v,$)=>this.onChange(v,$)})},{field:"Name",flex:1,cellClass:"no-outline",sortable:!0,sort:"asc",filter:"agTextColumnFilter",cellRenderer:r,cellRendererParams:{tooltipGetter:v=>`Server folder: ${v.ServerFolder}\nFolder: ${v.Folder}\nVersion: ${v.Version}\nDescription: ${v.Description}`}}]})}}return s.\u0275fac=function(o){return new(o||s)(e.Y36(A.so),e.Y36(S.A),e.Y36(U.ux),e.Y36(a.k))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-add-app-from-folder"]],hostVars:1,hostBindings:function(o,l){2&o&&e.Ikx("className",l.hostClass)},features:[e.qOj],decls:2,vars:3,consts:[[4,"ngIf"],["mat-dialog-title",""],[1,"dialog-title-box"],[3,"featureNameId"],[1,"dialog-description"],["class","dialog-description",4,"ngIf"],["class","grid-wrapper",4,"ngIf"],[1,"dialog-component-actions"],["type","button","mat-raised-button","",3,"click"],["type","button","mat-raised-button","","color","accent",3,"disabled","click"],[1,"grid-wrapper"],[1,"ag-theme-material",2,"height","200px","width","auto",3,"rowData","gridOptions"]],template:function(o,l){1&o&&(e.YNc(0,B,14,4,"ng-container",0),e.ALo(1,"async")),2&o&&e.Q6J("ngIf",e.lcZ(1,1,l.viewModel$))},directives:[f.O5,A.uh,i.B,m.N8,C.lW],pipes:[f.Ov],styles:[""]}),s})()},5457:(T,g,n)=>{n.d(g,{C:()=>d});const d={AppSyncWithSiteFiles:"AppSyncWithSiteFiles",WysiwygPasteFormatted:"WysiwygPasteFormatted",PasteImageFromClipboard:"PasteImageFromClipboard",EditUiShowNotes:"EditUiShowNotes",EditUiShowMetadataFor:"EditUiShowMetadataFor",NoSponsoredByToSic:"NoSponsoredByToSic",EditUiTranslateWithGoogle:"EditUiTranslateWithGoogle",LightSpeed:"LightSpeedOutputCache",ContentSecurityPolicy:"ContentSecurityPolicy",PermissionsByLanguage:"PermissionsByLanguage"}},9669:(T,g,n)=>{n.d(g,{B:()=>e});var d=n(1329),F=n(6317),p=n(6562),I=n(635),t=n(3184),D=n(5758),M=n(5916),y=n(6362),b=n(2376),Z=n(5590),E=n(7514);function P(c,x){if(1&c){const r=t.EpF();t.TgZ(0,"div",3),t.NdJ("click",function(){return t.CHM(r),t.oxw(2).openDialog()}),t.ALo(1,"translate"),t.TgZ(2,"mat-icon"),t._uU(3),t.qZA(),t.TgZ(4,"div",4)(5,"div",5),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"div",6),t._uU(9),t.ALo(10,"translate"),t.qZA()()()}if(2&c){const r=t.oxw().ngIf;t.Q6J("tippy",t.xi3(1,7,"Features.Tooltip",r.feature)),t.xp6(2),t.Gre("icon icon-",r.icon,""),t.xp6(1),t.Oqu(r.icon),t.xp6(3),t.Oqu(t.lcZ(7,10,"Features.FeatureNotActivated")),t.xp6(3),t.Oqu(t.lcZ(10,12,"Features.ClickToFindOutMore"))}}function w(c,x){if(1&c&&(t.ynx(0),t.YNc(1,P,11,14,"div",2),t.BQk()),2&c){const r=x.ngIf;t.xp6(1),t.Q6J("ngIf",r.show)}}function S(c,x){1&c&&(t.TgZ(0,"div"),t._uU(1,"loading..."),t.qZA())}let e=(()=>{class c extends d.B{constructor(r,O,A,U){super(r,O,U,A),this.asInfo$=new F.X(!1),this.viewModel$=(0,p.a)([this.feature$,this.asInfo$,this.show$]).pipe((0,I.U)(([a,f,i])=>({feature:a,icon:f?"info":"warning",show:i})))}set asInfo(r){this.asInfo$.next(r)}}return c.\u0275fac=function(r){return new(r||c)(t.Y36(D.uw),t.Y36(t.s_b),t.Y36(M.k),t.Y36(t.sBO))},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-feature-text-info"]],inputs:{asInfo:"asInfo"},features:[t.qOj],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["loading",""],["class","feature-text-info",3,"tippy","click",4,"ngIf"],[1,"feature-text-info",3,"tippy","click"],[1,"feature-text-info-content"],[1,"feature-text-info-title"],[1,"feature-text-info-subtitle"]],template:function(r,O){if(1&r&&(t.YNc(0,w,2,1,"ng-container",0),t.ALo(1,"async"),t.YNc(2,S,2,0,"ng-template",null,1,t.W1O)),2&r){const A=t.MAs(3);t.Q6J("ngIf",t.lcZ(1,2,O.viewModel$))("ngIfElse",A)}},directives:[y.O5,b.$,Z.Hw],pipes:[y.Ov,E.X$],styles:[".feature-text-info[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;cursor:pointer;box-shadow:0 2px 1px -1px #0003,0 1px 1px #00000024,0 1px 3px #0000001f;border-radius:4px;padding:5px;margin-bottom:10px}.feature-text-info-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;justify-content:center;margin-left:10px}.feature-text-info-title[_ngcontent-%COMP%]{font-size:large}.feature-text-info-subtitle[_ngcontent-%COMP%]{font-size:medium}.icon[_ngcontent-%COMP%]{font-size:45px;height:-moz-fit-content;height:fit-content;width:-moz-fit-content;width:fit-content}.icon-warning[_ngcontent-%COMP%]{color:red}"]}),c})()},1329:(T,g,n)=>{n.d(g,{B:()=>U});var d=n(5758),F=n(6562),p=n(635),I=n(9673),t=n(3184),D=n(2528),M=n(3265),y=n(6362),b=n(2376),Z=n(7317),E=n(5590),P=n(1555),w=n(7514);function S(a,f){if(1&a){const i=t.EpF();t.TgZ(0,"div",5)(1,"div",6),t._uU(2,"ID"),t.qZA(),t.TgZ(3,"div",12)(4,"span",13),t.NdJ("click",function(){const h=t.CHM(i).ngIf;return t.oxw(2).copyToClipboard(h)}),t._uU(5),t.qZA()()()}if(2&a){const i=f.ngIf;t.xp6(4),t.Q6J("tippy",i),t.xp6(1),t.Oqu(i)}}function e(a,f){if(1&a){const i=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){const h=t.CHM(i).ngIf;return t.oxw(2).findOutMore(h)}),t.TgZ(1,"mat-icon"),t._uU(2,"open_in_new"),t.qZA(),t._uU(3),t.ALo(4,"translate"),t.qZA()}2&a&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"Features.FindOutMore")," "))}function c(a,f){if(1&a){const i=t.EpF();t.TgZ(0,"div")(1,"div",1)(2,"div",2)(3,"div"),t._uU(4),t.qZA()()(),t._UZ(5,"p",3),t.ALo(6,"safeHtml"),t.TgZ(7,"div",4)(8,"div",5)(9,"div",6),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"div",7)(13,"span"),t._uU(14),t.ALo(15,"translate"),t.qZA()()(),t.YNc(16,S,6,2,"div",8),t.qZA(),t.TgZ(17,"div",9),t.YNc(18,e,5,3,"button",10),t.TgZ(19,"button",11),t.NdJ("click",function(){return t.CHM(i),t.oxw().closeDialog()}),t._uU(20),t.ALo(21,"translate"),t.qZA()()()}if(2&a){const i=f.ngIf;t.xp6(4),t.Oqu(i.feature.Name),t.xp6(1),t.Q6J("innerHtml",t.lcZ(6,7,i.feature.Description),t.oJD),t.xp6(5),t.Oqu(t.lcZ(11,9,"Features.Status")),t.xp6(4),t.Oqu(t.lcZ(15,11,i.feature.Enabled?"Features.Active":"Features.NotActive")),t.xp6(2),t.Q6J("ngIf",i.feature.NameId),t.xp6(2),t.Q6J("ngIf",i.feature.Link),t.xp6(2),t.hij(" ",t.lcZ(21,13,"Features.Close")," ")}}let x=(()=>{class a{constructor(i,m,C,h){this.dialogData=i,this.dialogRef=m,this.snackBar=C,this.featureDetailService=h}ngOnInit(){this.viewModel$=(0,F.a)([this.featureDetailService.getFeatureDetails(this.dialogData)]).pipe((0,p.U)(([i])=>({feature:i})))}copyToClipboard(i){(0,I.v)(i),this.snackBar.open("Copied to clipboard",null,{duration:2e3})}findOutMore(i){window.open(i,"_blank")}closeDialog(){this.dialogRef.close()}}return a.\u0275fac=function(i){return new(i||a)(t.Y36(d.WI),t.Y36(d.so),t.Y36(D.ux),t.Y36(M.f))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-feature-info-dialog"]],decls:2,vars:3,consts:[[4,"ngIf"],["mat-dialog-title",""],[1,"dialog-title-box"],[1,"dialog-description",3,"innerHtml"],[1,"info-box"],[1,"info-row"],[1,"info-row__label"],[1,"info-row__value"],["class","info-row",4,"ngIf"],[1,"dialog-component-actions"],["mat-raised-button","","class","dialog-component-button","color","accent",3,"click",4,"ngIf"],["mat-raised-button","",1,"dialog-component-button",3,"click"],[1,"info-row__value","click"],[3,"tippy","click"],["mat-raised-button","","color","accent",1,"dialog-component-button",3,"click"]],template:function(i,m){1&i&&(t.YNc(0,c,22,15,"div",0),t.ALo(1,"async")),2&i&&t.Q6J("ngIf",t.lcZ(1,1,m.viewModel$))},directives:[y.O5,b.$,Z.lW,E.Hw],pipes:[y.Ov,P.z,w.X$],styles:[".info-box[_ngcontent-%COMP%]{margin-top:32px}.info-row[_ngcontent-%COMP%]{display:flex;overflow-wrap:anywhere;margin-top:4px;margin-bottom:4px;font-size:14px}.info-row__label[_ngcontent-%COMP%]{flex:1;font-weight:500}.info-row__value[_ngcontent-%COMP%]{flex:3}.info-row__value.click[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer}.dialog-component-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:16px}.dialog-component-button[_ngcontent-%COMP%]{margin-left:8px}"]}),a})();var r=n(6317),O=n(2673),A=n(5916);let U=(()=>{class a{constructor(i,m,C,h){this.dialog=i,this.viewContainerRef=m,this.changeDetectorRef=C,this.featuresService=h,this.featureNameId$=new r.X(null),this.showIf$=new r.X(!1),this.feature$=this.featureNameId$.pipe((0,O.w)(_=>this.featuresService.get$(_))),this.show$=(0,F.a)([this.feature$,this.showIf$]).pipe((0,p.U)(([_,B])=>{var N;return B==(null!==(N=null==_?void 0:_.Enabled)&&void 0!==N&&N)}))}set featureNameId(i){this.featureNameId$.next(i)}set showIf(i){this.showIf$.next(1==i)}openDialog(){a.openDialog(this.dialog,this.featureNameId$.value,this.viewContainerRef,this.changeDetectorRef)}static openDialog(i,m,C,h){i.open(x,{autoFocus:!1,data:m,viewContainerRef:C,width:"600px"}),h.markForCheck()}}return a.\u0275fac=function(i){return new(i||a)(t.Y36(d.uw),t.Y36(t.s_b),t.Y36(t.sBO),t.Y36(A.k))},a.\u0275dir=t.lG2({type:a,inputs:{featureNameId:"featureNameId",showIf:"showIf"}}),a})()},4153:(T,g,n)=>{n.d(g,{f:()=>d});const d={accentedSort:!0,animateRows:!0,enableCellTextSelection:!0,headerHeight:32,suppressScrollOnNewData:!0,valueCache:!0,defaultColDef:{filterParams:{newRowsAction:"keep"}},tooltipShowDelay:0,tooltipHideDelay:1e5,suppressMovableColumns:!0}},9673:(T,g,n)=>{function d(F){const p=document.createElement("textarea");p.value=F,p.setAttribute("readonly",""),p.style.position="absolute",p.style.left="-9999px",document.body.appendChild(p);const I=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);p.select(),document.execCommand("copy"),document.body.removeChild(p),I&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(I))}n.d(g,{v:()=>d})}}]);
//# sourceMappingURL=https://sources.2sxc.org/16.09.00/dist/ng-edit/projects_eav-ui_src_app_apps-management_add-app-from-folder_add-app-from-folder_component_ts.19f3f6f270efb46c.js.map