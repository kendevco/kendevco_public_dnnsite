"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_apps-management_create-app_create-app_component_ts"],{3640:(Z,d,o)=>{o.r(d),o.d(d,{CreateAppComponent:()=>F});var n=o(587),p=o(6317),f=o(6562),_=o(635);const h=/^[A-Za-z](?:[A-Za-z0-9\s\(\)-]+)*$/;var x=o(5446),t=o(3184),g=o(5758),v=o(2528),u=o(6362),a=o(2977),s=o(4770),l=o(4683),m=o(8352),T=o(7317);function O(i,c){1&i&&(t.TgZ(0,"app-field-hint",10),t._uU(1," Required "),t.qZA()),2&i&&t.Q6J("isError",!0)}function b(i,c){if(1&i&&(t.TgZ(0,"app-field-hint",10),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);t.Q6J("isError",!0),t.xp6(1),t.hij(" ",e.appNameError," ")}}function E(i,c){if(1&i&&(t.ynx(0),t.YNc(1,O,2,1,"app-field-hint",9),t.YNc(2,b,2,2,"app-field-hint",9),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.form.controls.name.errors?null:e.form.controls.name.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.form.controls.name.errors?null:e.form.controls.name.errors.pattern)}}function M(i,c){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",1)(2,"div",2),t._uU(3,"Create App"),t.qZA()(),t._UZ(4,"router-outlet"),t.TgZ(5,"form",3)(6,"mat-form-field",4)(7,"mat-label"),t._uU(8,"Name"),t.qZA(),t._UZ(9,"input",5),t.qZA(),t.TgZ(10,"app-field-hint"),t._uU(11," App name will also be used for the folder "),t.qZA(),t.YNc(12,E,3,2,"ng-container",0),t.qZA(),t.TgZ(13,"div",6)(14,"button",7),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeDialog()}),t._uU(15," Cancel "),t.qZA(),t.TgZ(16,"button",8),t.NdJ("click",function(){return t.CHM(e),t.oxw().create()}),t._uU(17," Create "),t.qZA()(),t.BQk()}if(2&i){const e=c.ngIf,r=t.oxw();t.xp6(5),t.Q6J("formGroup",r.form),t.xp6(7),t.Q6J("ngIf",r.form.controls.name.touched),t.xp6(2),t.Q6J("disabled",e.loading),t.xp6(2),t.Q6J("disabled",e.loading||!r.form.valid)}}let F=(()=>{class i{constructor(e,r,A){this.dialogRef=e,this.appsListService=r,this.snackBar=A,this.hostClass="dialog-component",this.appNameError="Standard letters, numbers, spaces, hyphens and round brackets are allowed. Must start with a letter.",this.form=this.buildForm(),this.loading$=new p.X(!1)}ngOnInit(){this.viewModel$=(0,f.a)([this.loading$]).pipe((0,_.U)(([e])=>({loading:e})))}ngOnDestroy(){this.loading$.complete()}closeDialog(){this.dialogRef.close()}create(){var e;this.form.disable(),this.loading$.next(!0);const r=null===(e=this.form.controls.name.value)||void 0===e?void 0:e.trim().replace(/\s\s+/g," ");this.snackBar.open("Creating app..."),this.appsListService.create(r).subscribe({error:()=>{this.form.enable(),this.loading$.next(!1),this.snackBar.open("Failed to create app. Please check console for more information",void 0,{duration:3e3})},next:()=>{this.form.enable(),this.snackBar.open("Created app",void 0,{duration:2e3}),this.closeDialog()}})}buildForm(){return new n.cw({name:new n.NI(null,[n.kI.required,n.kI.pattern(h)])})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(g.so),t.Y36(x.A),t.Y36(v.ux))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-create-app"]],hostVars:1,hostBindings:function(e,r){2&e&&t.Ikx("className",r.hostClass)},decls:2,vars:3,consts:[[4,"ngIf"],["mat-dialog-title",""],[1,"dialog-title-box"],[3,"formGroup"],["appearance","standard","color","accent"],["matInput","","type","text","formControlName","name"],[1,"dialog-component-actions"],["type","button","mat-raised-button","",3,"disabled","click"],["type","button","mat-raised-button","","color","accent",3,"disabled","click"],[3,"isError",4,"ngIf"],[3,"isError"]],template:function(e,r){1&e&&(t.YNc(0,M,18,4,"ng-container",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,r.viewModel$))},directives:[u.O5,g.uh,a.lC,n._Y,n.JL,n.sg,s.KE,s.hX,l.Nt,n.Fj,n.JJ,n.u,m.Y,T.lW],pipes:[u.Ov],styles:[""]}),i})()},8352:(Z,d,o)=>{o.d(d,{Y:()=>u});var n=o(3184),p=o(6362),f=o(4770);function _(a,s){1&a&&n.GkF(0)}function h(a,s){if(1&a&&(n.TgZ(0,"mat-hint"),n.YNc(1,_,1,0,"ng-container",3),n.qZA()),2&a){n.oxw();const l=n.MAs(4);n.xp6(1),n.Q6J("ngTemplateOutlet",l)}}function C(a,s){1&a&&n.GkF(0)}function x(a,s){if(1&a&&(n.TgZ(0,"mat-error"),n.YNc(1,C,1,0,"ng-container",3),n.qZA()),2&a){n.oxw();const l=n.MAs(4);n.xp6(1),n.Q6J("ngTemplateOutlet",l)}}function t(a,s){1&a&&n.Hsn(0)}const g=function(a){return{"hint-box__short":a}},v=["*"];let u=(()=>{class a{constructor(){this.isError=!1,this.isShort=!0}toggleIsShort(){this.isShort=!this.isShort}}return a.\u0275fac=function(l){return new(l||a)},a.\u0275cmp=n.Xpm({type:a,selectors:[["app-field-hint"]],inputs:{isError:"isError"},ngContentSelectors:v,decls:5,vars:6,consts:[[1,"hint-box",3,"ngClass","ngSwitch","click"],[4,"ngSwitchCase"],["content",""],[4,"ngTemplateOutlet"]],template:function(l,m){1&l&&(n.F$t(),n.TgZ(0,"div",0),n.NdJ("click",function(){return m.toggleIsShort()}),n.YNc(1,h,2,1,"mat-hint",1),n.YNc(2,x,2,1,"mat-error",1),n.qZA(),n.YNc(3,t,1,0,"ng-template",null,2,n.W1O)),2&l&&(n.Q6J("ngClass",n.VKq(4,g,m.isShort))("ngSwitch",m.isError),n.xp6(1),n.Q6J("ngSwitchCase",!1),n.xp6(1),n.Q6J("ngSwitchCase",!0))},directives:[p.mk,p.RF,p.n9,f.bx,p.tP,f.TO],styles:[".hint-box[_ngcontent-%COMP%]{margin-top:4px}.hint-box[_ngcontent-%COMP%]   .mat-hint[_ngcontent-%COMP%], .hint-box[_ngcontent-%COMP%]   .mat-error[_ngcontent-%COMP%]{font-size:12px;display:block}.hint-box__short[_ngcontent-%COMP%]   .mat-hint[_ngcontent-%COMP%], .hint-box__short[_ngcontent-%COMP%]   .mat-error[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]}),a})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/16.09.00/dist/ng-edit/projects_eav-ui_src_app_apps-management_create-app_create-app_component_ts.bf97a831e935d5e0.js.map